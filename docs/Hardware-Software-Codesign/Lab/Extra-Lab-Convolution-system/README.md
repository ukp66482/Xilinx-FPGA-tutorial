# FPGA Design Lab


åœ¨é€™æ¬¡çš„ Lab ä¸­éœ€è‡ªè¡Œè¨­è¨ˆä¸€å€‹å¯åŸ·è¡Œ convolution é‹ç®—çš„ IPï¼Œä¸¦ä»¥æ­¤ IP å»ºæ§‹æ•´å€‹ç³»çµ±ã€‚ä¾æ“šæä¾›çš„ input.hex ä»¥åŠ golden.hexä¾†é€²è¡Œè¼¸å‡ºçµæœæ¯”å°ã€‚

è»Ÿé«”ç«¯åƒ…è² è²¬è³‡æ–™æ¬é‹ï¼Œæ‰€æœ‰ convolution é‹ç®—å¿…é ˆåœ¨è‡ªè¡Œè¨­è¨ˆçš„ convolution IP ä¸­å®Œæˆï¼Œè»Ÿé«”ç«¯ä¸å¾—é€²è¡Œä¸»è¦é‹ç®—ã€‚


>ğŸ’¡ **Hintï¼š** ä½¿ç”¨ Lab3 æ‰€å­¸ CDMA ä¾†æ¬é‹è³‡æ–™é€²å…¥ Bram ï¼ŒConvolution IP å¾ Bram å…§è®€å– input data å¾Œï¼Œå°‡å·ç©çµæœå­˜å› Bram å…§ï¼Œæœ€å¾Œä½¿ç”¨ CDMA ä¾†æ¬é‹è³‡æ–™å›åˆ° PS ç«¯ã€‚


## IP è¨­è¨ˆæ³¨æ„äº‹é … : 

### Convolution ç¯„ä¾‹ : 
![](png/Convolution.png)

inputåŠæœ€å¾Œconvolutionçš„å€¼éƒ½æ˜¯32bitã€‚

Convolutionçš„æ­¥é©Ÿ :

   1. åšconvolutionæ™‚ï¼Œå°‡ç›¸ä¹˜å¾Œçš„çµæœ(64bit)ï¼Œå–[47:16]çš„å€¼ã€‚

   2. å°‡9å€‹ç›¸ä¹˜ä¸¦é€²ä½çš„çµæœï¼Œç´¯åŠ è¼¸å‡ºç‚ºoutputã€‚

> **å‚™è¨»ï¼š** 
æ­¤æ¬¡ Lab çš„ é‹ç®—ä¸­ç„¡é ˆåŠ å…¥ bias ã€‚ 


> ğŸ“Œ åŸå§‹è¼¸å…¥å½±åƒå¤§å°ç‚º 28Ã—28ï¼Œç¶“é 3Ã—3 kernel çš„ convolution é‹ç®—ï¼ˆä¸é€²è¡Œ zero paddingï¼‰å¾Œï¼Œè¼¸å‡ºå½±åƒå¤§å°æœƒè®Š 26*26 ã€‚

> ğŸ“Œ æœ‰æä¾› tb å»é©—è­‰è‡ªè¡Œè¨­è¨ˆçš„ IP ã€‚

---

### Kernel Value

|   |  |  |
|-------------------|-------------------|-------------------|
| kernel[0] | kernel[1] | kernel[2] |
| 0000A89E | 000092D5 | 00006D43 |
| kernel[3] | kernel[4] | kernel[5] |
| 00001004 | FFFF8F71 | FFFF6E54 |
| kernel[6] | kernel[7] | kernel[8]|
| FFFFA6D7 | FFFFC834 | FFFFAC19 |

---

### Bram è®€å¯«æ“ä½œ :

![](png/bram.png)

1. è®€å–æ“ä½œï¼ˆRead Requestï¼‰ï¼š

    å°æ–¼è®€å–è«‹æ±‚ï¼Œå¿…é ˆå°‡è¨˜æ†¶é«”æ¨¡çµ„çš„ R_req è…³ä½æ‹‰ç‚º 1'b1ï¼ˆè¡¨ç¤ºç™¼å‡ºè®€å–è«‹æ±‚ï¼‰ï¼Œä¸¦åœ¨ addr bus ä¸Šçµ¦å‡ºæ¬²è®€å–çš„ä½å€ã€‚
    è³‡æ–™å°‡æœƒåœ¨ä¸€å€‹æ™‚è„ˆé€±æœŸå¾Œå‡ºç¾åœ¨ R_data ä¸Šã€‚

2. å¯«å…¥æ“ä½œï¼ˆWrite Requestï¼‰ï¼š

    å°æ–¼å¯«å…¥è«‹æ±‚ï¼Œåªéœ€å°‡ R_req è¨­ç‚º 1'b1ï¼ŒW_req è¨­ç‚º 4'b1111ï¼ˆè¡¨ç¤ºæ‰€æœ‰ byte éƒ½å¯«å…¥ï¼‰ã€‚
    æ­¤æ™‚ï¼Œ W_data çš„è³‡æ–™æœƒåœ¨æ­£ç·£ï¼ˆpositive edgeï¼‰æ™‚è¢«å¯«å…¥åˆ° addr æŒ‡å®šçš„ä½å€ä¸­ã€‚


---
### åƒè€ƒ Block design  : 
![](png/block_design.png)

---

### æ¸¬è©¦çµæœ : 
![](png/check.png)