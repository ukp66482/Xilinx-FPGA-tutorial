{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Xilinx FPGA tutorial (\u672a\u5b8c\u6210)","text":"<p>\u672c\u6559\u5b78\u76ee\u7684\u662f\u5354\u52a9\u7b2c\u4e00\u6b21\u63a5\u89f8 FPGA \u7684\u521d\u5b78\u8005\u5165\u9580 Xilinx \u7cfb\u5217 FPGA \u548c Vivado \u7684\u4f7f\u7528\u3002</p>"},{"location":"#_1","title":"\u63a8\u85a6\u95b1\u8b80\u9806\u5e8f","text":"<ol> <li> <p>Vivado-Installation-Guide\uff1a<code>Vivado</code> \u5b89\u88dd\u6559\u5b78</p> </li> <li> <p>Vivado-Tutorial\uff1aFPGA \u57fa\u790e\u958b\u767c\u6d41\u7a0b\u6559\u5b78</p> </li> <li> <p>Hardware-Software-Codesign\uff1a\u4f7f\u7528 <code>Vitis</code> \u6216 <code>PYNQ Python</code> \u9032\u884c\u8edf\u786c\u9ad4\u5354\u540c\u8a2d\u8a08\u7684\u61c9\u7528\u5be6\u4f5c\u8207\u63a7\u5236</p> </li> </ol> <p>FPGA Board\uff1aTUL PYNQ-Z2 / xc7z020clg400-1</p> <p></p> <p>\u5efa\u8b70\u7248\u672c\uff1aVivado 2023.2\u3001Vitis 2023.2 / PYNQ 3.0.1</p>"},{"location":"Hardware-Software-Codesign/","title":"Hardware-Software-Codesign","text":"<p>\u672c\u7ae0\u7bc0\u5c07\u4ecb\u7d39\u5982\u4f55\u5728 Zynq \u7cfb\u5217 FPGA \u4e0a\u9032\u884c\u8edf\u786c\u9ad4\u5354\u540c\u8a2d\u8a08\uff08Hardware-Software Codesign\uff09\u3002</p>"},{"location":"Hardware-Software-Codesign/#whats-zynq","title":"What's Zynq","text":"<p>Zynq \u7cfb\u5217\u6676\u7247\u5c07 Programmable Logic\uff08PL\uff09 \u8207 Processing System\uff08PS\uff09\u6574\u5408\u5728\u540c\u4e00\u6676\u7247\u4e2d\uff0c\u5be6\u73fe\u8edf\u9ad4\u786c\u9ad4\u7684\u5354\u540c\u8a2d\u8a08\u3002</p> \u5340\u584a \u8aaa\u660e PS (Processing System) \u5167\u5efa \u96d9\u6838\u5fc3 ARM Cortex-A9 \u8655\u7406\u5668\uff0c\u53ef\u57f7\u884c Linux / Baremetal \u7a0b\u5f0f\uff0c\u5177\u5099\u8a18\u61b6\u9ad4\u8207\u9031\u908a\u63a7\u5236 PL (Programmable Logic) \u57fa\u65bc 28nm Artix-7 \u6216 Kintex \u67b6\u69cb\u7684 FPGA\uff0c\u53ef\u5be6\u73fe\u904b\u7b97\u52a0\u901f\u3001\u7570\u8cea\u904b\u7b97\u8207\u81ea\u8a02\u908f\u8f2f\u529f\u80fd <p></p>"},{"location":"Hardware-Software-Codesign/#whats-pynq","title":"What's Pynq","text":"<p>PYNQ\uff08Python Productivity for Zynq\uff09\u662f\u7531 Xilinx \u63a8\u51fa\u7684\u958b\u6e90\u6846\u67b6\uff0c\u76ee\u7684\u662f\u8b93\u958b\u767c\u8005\u80fd\u5920\u4ee5 Python \u7a0b\u5f0f\u8a9e\u8a00\u4f86\u63a7\u5236 Zynq FPGA \u4e2d\u7684\u786c\u9ad4\u8a2d\u8a08\u3002</p> <p>\u5728 Zynq \u8a2d\u8a08\u50b3\u7d71\u6d41\u7a0b\u4e2d\uff0c\u63a7\u5236 FPGA \u4e0a\u7684\u81ea\u8a02\u908f\u8f2f\u901a\u5e38\u9700\u8981\uff1a</p> <ul> <li> <p>\u4f7f\u7528 RTL \u8a2d\u8a08\u786c\u9ad4\u96fb\u8def</p> </li> <li> <p>\u642d\u914d C/C++ \u7de8\u5beb\u97cc\u9ad4\u6216\u8edf\u9ad4\u61c9\u7528\u7a0b\u5f0f</p> </li> <li> <p>\u4ea4\u53c9\u7de8\u8b6f</p> </li> </ul> <p>PYNQ \u900f\u904e Python \u5c01\u88dd\u8207 Jupyter Notebook \u4ecb\u9762\uff0c\u6975\u5927\u5316\u7c21\u5316\u4e86\u50b3\u7d71\u7684\u8edf\u786c\u9ad4\u6574\u5408\u6d41\u7a0b\u3002</p> <p>\u7576\u786c\u9ad4\uff08Bitstream / Overlay\uff09\u8a2d\u8a08\u5b8c\u6210\u5f8c\uff0c\u53ea\u9700\u6253\u958b\u700f\u89bd\u5668\uff0c\u5373\u53ef\u900f\u904e Jupyter Notebook \u5b8c\u6210\u5269\u9918\u958b\u767c</p> \u5143\u4ef6 \u529f\u80fd Overlay (Bitstream) \u5c07 Vivado \u532f\u51fa\u7684\u786c\u9ad4\u8a2d\u8a08\u5305\u88dd\u6210\u4e00\u500b\u53ef\u88ab Python \u63a7\u5236\u7684\u786c\u9ad4\u6a21\u7d44 Python API \u63d0\u4f9b\u7c21\u55ae\u7684 Python class \u4f86\u5b58\u53d6 FPGA \u8207\u8a18\u61b6\u9ad4 Jupyter Notebook \u53ef\u5728\u700f\u89bd\u5668\u4e2d\u64b0\u5beb Python \u7a0b\u5f0f\u4e26\u5373\u6642\u89c0\u5bdf\u57f7\u884c\u7d50\u679c <p></p> <p></p>"},{"location":"Hardware-Software-Codesign/#_1","title":"\ud83d\udcd8 \u63a8\u85a6\u95b1\u8b80\u9806\u5e8f","text":"<ol> <li>Part1-Zynq-Processor</li> <li>Part2-AXI-GPIO</li> <li>Extra1-Vitis-Change-xsa</li> <li>Part3-AXI-Lite</li> <li>Extra2-AXI-Mapping</li> <li>Extra3-AXI-Protocol(\u672a\u5b8c)</li> <li>Part4-BRAM</li> <li>Part5-DSP</li> <li>Part6-PYNQ-Jupyter-Notebook</li> <li>Extra4-ILA-with-PYNQ</li> <li>Part7-DMA</li> <li>Part8-CDMA(\u672a\u5b8c)</li> <li>Part9-HDMI</li> </ol>"},{"location":"Hardware-Software-Codesign/Extra1-Vitis-Change-xsa-and-Update-Bitstream/","title":"Extra1-Vitis-Change-xsa-and-Update-Bitstream","text":"<p>\u7531\u65bc Vitis \u5728\u66f4\u65b0 Vivado \u786c\u9ad4\u8a2d\u8a08\u6642\uff0c\u4e0d\u6703\u81ea\u52d5\u5c07\u65b0\u7684 bitstream \u6a94\u66f4\u65b0\u5230 Application Project \u4e2d\uff0c\u56e0\u6b64\u6bcf\u7576\u4f60\u5728 Vivado \u4e2d\u5c0d\u786c\u9ad4\u8a2d\u8a08\u9032\u884c\u4fee\u6539\u4e26\u7522\u751f\u65b0\u7684 <code>.xsa</code> \u6a94\u6848\u5f8c\uff0c\u5fc5\u9808\u624b\u52d5\u66f4\u65b0 Application Project \u6240\u4f7f\u7528\u7684 bitstream\uff0c\u624d\u80fd\u78ba\u4fdd\u57f7\u884c\u6642\u8f09\u5165\u7684\u662f\u4fee\u6539\u904e\u5f8c\u7684\u786c\u9ad4\u3002</p>"},{"location":"Hardware-Software-Codesign/Extra1-Vitis-Change-xsa-and-Update-Bitstream/#solution-1-recommended","title":"Solution 1 (Recommended)","text":"<ol> <li> <p>Generate new bitstream and export <code>.xsa</code> file in Vivado</p> </li> <li> <p>\u9ede\u9078 <code>your_platform_component -&gt; Settings -&gt; vitis-comp.json -&gt; Switch XSA</code>\uff0c\u9078\u64c7\u525b\u525b\u7522\u751f\u51fa\u4f86\u7684\u65b0\u7248 <code>.xsa</code> \u6a94\u6848  </p> <p></p> </li> <li> <p>Build Platform</p> </li> <li> <p>\u5c07 Platform Component \u7522\u751f\u7684 bitstream\uff08\u901a\u5e38\u8def\u5f91\u70ba\uff09\uff1a</p> <p><code>shell {workspace}/platform/hw/sdt/system_wrapper.bit</code></p> <p>\u624b\u52d5\u8907\u88fd\u5230 Application Project \u7684\u76ee\u9304\u4e0b\uff0c\u53d6\u4ee3\u539f\u672c\u7684 bitstream\uff1a</p> <p><code>shell {workspace}/app/_ide/bitstream/system_wrapper.bit</code> </p> </li> <li> <p>Build Application</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Extra1-Vitis-Change-xsa-and-Update-Bitstream/#solution-2","title":"Solution 2","text":"<ol> <li> <p>\u6b65\u9a5f\u8207 Solution 1\u7684 <code>1~3.</code>\u76f8\u540c</p> </li> <li> <p>\u9ede\u9078 <code>your_application_project -&gt; Settings -&gt; launch.json</code>\u4e2d\u627e\u5230\u4e26\u958b\u555f launch.json</p> <p> </p> <p>\u5c07\u5176\u6539\u6210\u5982\u4e0b\u7684 Bitstream \u8def\u5f91</p> <p><code>shell ${workspace}/platform/hw/sdt/system_wrapper.bit</code></p> </li> <li> <p>Build Application</p> </li> </ol> <p>\ud83d\udccc Note\uff1a Switch XSA \u50c5\u66f4\u65b0 platform metadata\uff0cbitstream \u4e0d\u6703\u81ea\u52d5\u8986\u84cb</p> <p>\u82e5\u6c92\u6709\u624b\u52d5\u8907\u88fd\u6216\u6307\u5b9a .bit \u6a94\uff0cApplication \u4ecd\u6703\u4f7f\u7528\u820a\u7248\u672c\uff0c\u5c0e\u81f4\u57f7\u884c\u7d50\u679c\u932f\u8aa4</p>"},{"location":"Hardware-Software-Codesign/Extra2-AXI-Mapping/","title":"Extra2-AXI-Mapping","text":"<p>\u4ee5\u4e0b\u6559\u5b78\u7686\u4ee5 PYNQ-Z2 (ZC7020) \u70ba\u4e3b\uff0c\u6839\u64da PYNQ-Z2 \u7684 Spec \u53ef\u4ee5\u767c\u73fe\u677f\u5b50\u4e0a\u6709 512 MB \u7684 DDR3 \u8a18\u61b6\u9ad4\u53ef\u4ee5\u4f7f\u7528\u3002</p> <p></p> <p>\u89c0\u5bdf ZYNQ7 Processing System \u6642\uff0c\u53ef\u4ee5\u767c\u73fe Master GP0 (General Purpose Port 0) \u63d0\u4f9b\u4e00\u7d44 AXI \u532f\u6d41\u6392\u7d66 PL \u4f7f\u7528\u3002\u5176\u4e2d <code>M_AXI_GP0_ARADDR</code> \u8207 <code>M_AXI_GP0_AWADDR</code> \u7686\u70ba 32-bit \u5bec\u5ea6\uff0c\u4ee3\u8868\u9019\u689d AXI \u532f\u6d41\u6392\u53ef\u4ee5\u5c0d\u61c9\u5230\u6700\u591a\uff1a  </p> <pre><code>2^32 = 4GB \u7684\u7a7a\u9593\uff08Addressable Space\uff09\n</code></pre> <p>\u4f46\u5be6\u969b\u4e0a\u6211\u5011\u53ea\u6709 512 MB \u7684\u5be6\u9ad4 DDR3 \u8a18\u61b6\u9ad4\u7a7a\u9593\uff0c\u800c\u9019 4GB \u7684\u4f4d\u5740\u7a7a\u9593 (32bit width) \u6703\u88ab\u5283\u5206\u4e26 Map \u5230\u4e0d\u540c\u7684\u8a2d\u5099\u6216 PL AXI IP:</p> <ul> <li>DDR3 \u8a18\u61b6\u9ad4\uff08PS DDR\uff09</li> <li>AXI GPIO\u3001AXI BRAM \u7b49 PL \u7aef IP</li> <li>PS \u7684\u5167\u5efa\u5468\u908a\uff08\u5982 UART\u3001SPI\u3001I2C\u3001SD \u5361\uff09</li> <li>On-Chip Memory\uff08OCM\uff09</li> </ul> \u5730\u5740\u7bc4\u570d \u7528\u9014 <code>0x0000_0000 ~ 0x1FFF_FFFF</code> PS DDR3\uff08512MB Memory\uff09 <code>0x4000_0000 ~ 0x4FFF_FFFF</code> PL AXI IP\uff08AXI GPIO\u3001AXI BRAM \u7b49\uff09 <code>0xF800_0000 ~</code> PS \u5916\u8a2d\uff08UART\u3001I2C\u3001SPI \u7b49\uff09 <code>0xFFFC_0000 ~ 0xFFFF_FFFF</code> OCM\uff08\u5167\u5efa SRAM\uff0c256KB\uff09"},{"location":"Hardware-Software-Codesign/Extra2-AXI-Mapping/#axi-master-slave","title":"AXI Master \u8207 Slave \u7684\u89d2\u8272\u95dc\u4fc2","text":"<p>\u5728 AXI Protocol \u4e2d\uff0c\u6bcf\u4e00\u7b46\u50b3\u8f38\u90fd\u6703\u767c\u751f\u5728 <code>\u4e00\u500b Master</code> \u548c <code>\u4e00\u500b Slave</code> \u4e4b\u9593\u3002</p>"},{"location":"Hardware-Software-Codesign/Extra2-AXI-Mapping/#axi-master","title":"AXI Master","text":"<ul> <li>\u4e3b\u52d5\u7aef</li> <li>\u8ca0\u8cac\u767c\u51fa\u50b3\u8f38\u8acb\u6c42\uff08\u4f8b\u5982\uff1a\u6211\u8981\u8b80\u9019\u584a\u8a18\u61b6\u9ad4\u3001\u6211\u8981\u5beb\u9032\u9019\u584a\u4f4d\u5740\uff09</li> <li>\u5e38\u898b\u7684 Master:</li> <li>ARM CPU</li> <li>DMA\uff08\u5982 AXI CDMA\u3001VDMA\uff09</li> </ul>"},{"location":"Hardware-Software-Codesign/Extra2-AXI-Mapping/#axi-slave","title":"AXI Slave","text":"<ul> <li>\u88ab\u52d5\u7aef</li> <li>\u7b49\u5f85 Master \u50b3\u904e\u4f86\u7684\u5730\u5740\u8207\u8cc7\u6599\uff0c\u56de\u61c9\u8b80\u5beb\u8acb\u6c42</li> <li>\u5e38\u898b\u7684 Slave\uff1a</li> <li>AXI GPIO</li> <li>AXI BRAM Controller  </li> </ul> <p>\u7576 Master \u767c\u51fa\u4e00\u7b46\u50b3\u8f38\u8acb\u6c42\u6642\uff0c\u5b83\u6703\u540c\u6642\u9001\u51fa\u4e00\u500b <code>Target Address</code>\uff0c\u9019\u500b\u5730\u5740\u6703\u7531 <code>AXI Interconnect</code> \u6216 <code>SmartConnect</code> \u5224\u65b7\u5b83\u5c0d\u61c9\u7684\u662f\u54ea\u4e00\u500b Slave\u3002  </p> <p>\u9019\u80cc\u5f8c\u7684\u908f\u8f2f\u5c31\u662f\u6211\u5011\u5728 Vivado Address Editor \u4e2d\u8a2d\u5b9a\u7684 Base Address / Range\uff0c\u53ea\u8981\u662f\u8981\u5beb\u5165\u6216\u8b80\u53d6\u67d0\u500b IP \u7684\u8a18\u61b6\u9ad4\u5340\u6bb5\uff0c\u5c31\u5fc5\u9808\u78ba\u4fdd\u8a72 Address \u843d\u5728\u8a72 Slave IP \u6240\u5c6c\u7684 Address Range \u4e4b\u5167\u3002\u9019\u6a23 AXI \u7cfb\u7d71\u4e2d\u7684 Interconnect IP \u624d\u80fd\u6b63\u78ba\u628a\u8cc7\u6599\u9001\u5230\u5c0d\u61c9\u7684 Slave Module\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Extra2-AXI-Mapping/#axi-interconnect-axi-smart-connect","title":"AXI Interconnect / AXI Smart Connect","text":"<p>AXI Interconnect \u6216 AXI SmartConnect \u70ba\u4e00\u500b AXI \u532f\u6d41\u6392\u7684\u300c\u8f49\u63a5\u7ad9\u300d\uff0c\u4f86\u8ca0\u8cac\u300c\u5e6b Master \u5c0b\u627e\u5c0d\u61c9\u7684 Slave\u300d</p> <ul> <li> <p>\u5c07\u4e00\u500b\u6216\u591a\u500b AXI Master \u9023\u63a5\u5230 \u4e00\u500b\u6216\u591a\u500b AXI Slave</p> </li> <li> <p>\u6839\u64da Master \u767c\u51fa\u7684 Address \u5c07\u50b3\u8f38\u8acb\u6c42\u8f49\u9001\u7d66\u6b63\u78ba\u7684 Slave</p> </li> <li> <p>\u8ca0\u8cac\u7ba1\u7406 AXI \u50b3\u8f38 handshake\u3001Arbitration\u3001\u8cc7\u6599\u5bec\u5ea6\u8f49\u63db\u3001\u6642\u8108\u8f49\u63db\u7b49\u5e95\u5c64\u908f\u8f2f</p> </li> </ul>"},{"location":"Hardware-Software-Codesign/Extra2-AXI-Mapping/#0x0000_0000-0x1fff_ffff","title":"0x0000_0000 ~ 0x1FFF_FFFF \u7cfb\u7d71\u4e3b\u8a18\u61b6\u9ad4","text":"<p><code>0x0000_0000 ~ 0x1FFF_FFFF</code> \u9019\u6bb5 Address Range \u5c0d\u61c9\u7684\u662f ZYNQ PS \u6240\u4f7f\u7528\u7684 DDR3 \u4e3b\u8a18\u61b6\u9ad4\u3002\u5728 Linux\uff08PYNQ\uff09\u6216\u88f8\u6a5f\u958b\u767c\u4e2d\uff0c\u9019\u6bb5\u8a18\u61b6\u9ad4\u662f ARM Cortex-A9 CPU \u57f7\u884c\u4f5c\u696d\u7cfb\u7d71\u8207\u61c9\u7528\u7a0b\u5f0f\u7684\u4e3b\u8981\u7a7a\u9593\uff0c\u5c6c\u65bc PS \u5c08\u5c6c\u7684\u8a18\u61b6\u9ad4\u5340\u6bb5\u3002</p> <p>\u26a0\ufe0f  \u4e00\u822c PL \u7aef\u7684 AXI IP\uff08\u5982 AXI GPIO\u3001AXI BRAM \u7b49\uff09 \u662f\u7121\u6cd5\u4e14\u7981\u6b62\u76f4\u63a5 Mapping \u5230\u9019\u6bb5\u5340\u57df\u7684\u3002  </p> <ul> <li>PL \u7aef\u7684 AXI IP \u4e26\u4e0d\u80fd\u76f4\u63a5\u8a2a\u554f PS \u5167\u90e8\u7684 DDR \u63a7\u5236\u5668</li> <li>DDR \u662f\u639b\u5728 ZYNQ \u7684 PS \u5074  </li> <li>\u53ea\u6709 PS \u672c\u8eab\uff0c\u6216\u900f\u904e ZYNQ7 PS \u6240\u63d0\u4f9b\u7684 AXI HP\uff08High Performance\uff09Port\uff0c\u624d\u80fd\u5408\u6cd5\u5b58\u53d6\u8a72\u5340\u6bb5</li> </ul>"},{"location":"Hardware-Software-Codesign/Extra2-AXI-Mapping/#pl-ddr3-hp-port","title":"\u82e5\u8981\u8b93 PL \u5b58\u53d6 DDR3 \u4e3b\u8a18\u61b6\u9ad4\uff0c\u5fc5\u9808\u900f\u904e HP Port","text":"<p>\u7576\u6211\u5011\u5728\u8a2d\u8a08\u4e2d\u4f7f\u7528\u50cf\u662f AXI DMA \u6216 AXI CDMA \u9019\u985e\u652f\u63f4\u76f4\u63a5\u8a18\u61b6\u9ad4\u5b58\u53d6\uff08Direct Memory Access, DMA\uff09\u7684 IP \u6642\uff1a</p> <ul> <li> <p>\u9019\u4e9b IP \u4f5c\u70ba AXI Master</p> </li> <li> <p>\u5176\u4e3b\u8981\u8cc7\u6599\u50b3\u8f38 Port\uff08\u5982 M_AXI_MM2S / M_AXI_S2MM / M_AXI\uff09     \u5fc5\u9808\u9023\u63a5\u5230 ZYNQ PS \u7684 HP Port\uff08\u5982 S_AXI_HP0\uff09</p> </li> <li> <p>\u4e26\u5728 Vivado Address Editor \u4e2d\u8a2d\u5b9a\u6620\u5c04\u81f3 DDR \u7bc4\u570d</p> </li> <li>Base Address: 0x10000000</li> <li>High Address: 0x1FFFFFFF  </li> </ul> <p>\u9019\u6a23\u8a72 DMA IP \u624d\u80fd\u5408\u6cd5\u5730\u5c07\u8cc7\u6599\u50b3\u9001\u81f3 PS DDR\uff0c\u4e5f\u5c31\u662f 0x0000_0000 ~ 0x1FFF_FFFF \u7684\u7bc4\u570d\u5167\u3002</p> <p> </p>"},{"location":"Hardware-Software-Codesign/Extra4-ILA-with-PYNQ/","title":"Extra4-ILA-with-PYNQ","text":"<p>\u5148\u524d\u5728 Vivado-Tutorial/Extra4-Debugger \u7576\u4e2d\u5df2\u7d93\u6709\u6559\u904e Debugger \u5982\u4f55\u4f7f\u7528\uff0c\u82e5\u9084\u6c92\u770b\u904e\u53ef\u5148\u56de\u53bb\u8907\u7fd2\uff0c\u5728\u672c\u7ae0\u7bc0\u4e2d\uff0c\u6211\u5011\u5c07\u8aaa\u660e\u5982\u4f55\u5728 PYNQ \u7aef\u57f7\u884c\u7a0b\u5f0f\u6642\uff0c\u5373\u6642\u89c0\u6e2c PL\uff08Programmable Logic\uff09\u7aef\u7684\u8a0a\u865f\uff0c\u4fbf\u65bc\u9664\u932f\u8207\u9a57\u8b49\u786c\u9ad4\u8a2d\u8a08\u3002</p>"},{"location":"Hardware-Software-Codesign/Extra4-ILA-with-PYNQ/#add-system-ila-ip","title":"Add System ILA IP","text":"<ol> <li> <p>\u6211\u5011\u9019\u908a\u6cbf\u7528 Part6-PYNQ-Jupyter-Notebook \u6700\u5f8c\u9762\u8a2d\u8a08\u51fa\u7684 Block Design \u4f5c\u70ba\u8a72\u6b21\u6211\u5011\u8981\u52a0\u5165 ILA \u4f86\u89c0\u5bdf\u8a0a\u865f\u7684\u96fb\u8def</p> <p></p> </li> <li> <p>\u9078\u53d6\u8981\u89c0\u5bdf\u7684\u96fb\u8def\u8a0a\u865f\uff0c\u9ede\u53f3\u9375\u9078\u53d6 <code>Debug</code> \u9019\u908a\u6211\u4ee5 ZYNQ7_PS \u7684 Master GP port \u70ba\u7bc4\u4f8b\uff0c\u53ef\u81ea\u884c\u9078\u64c7\u60f3\u89c0\u5bdf\u7684\u8a0a\u865f</p> <p></p> <p>\u9ede\u53f3\u9375\u9078\u53d6 <code>Debug</code> \u5f8c\u5c31\u6703\u770b\u5230\u4f60\u8981\u89c0\u5bdf\u7684\u8a0a\u865f\u7dda\u6709 <code>\u7da0\u8272\u7684 Bug</code> \u7b26\u865f\u5728\u4e0a\u9762</p> <p></p> </li> <li> <p>\u9ede\u9078\u4e0a\u65b9 <code>Run Connection Automation</code> \u4e4b\u5f8c\u4f60\u5c31\u6703\u770b\u5230\u4f60\u7684 Block Design \u88e1\u9762\u591a\u4e86 <code>ILA System</code> \u9019\u9846 IP</p> <p></p> </li> <li> <p>\u9ede\u958b <code>ILA System</code> \u7684\u8a2d\u5b9a\u53ef\u4ee5\u53bb\u8abf\u6574\u4e00\u4e9b\u8a2d\u5b9a</p> <p></p> <ul> <li> <p>Monitor Type: <code>INTERFACE</code> \u8868\u793a\u4f60\u8981\u89c0\u5bdf AXI\u3001AXI-Stream \u7b49\u300cInterface Protocol\u300d\u7684\u8a0a\u865f\u3002\u5982\u679c\u4f60\u60f3\u81ea\u5df1\u9078\u64c7 signal\uff08\u5982 clock\u3001data\u3001valid\uff09\uff0c\u53ef\u6539\u9078 <code>NATIVE</code>\uff0c\u5169\u8005\u90fd\u8981\u5247\u662f <code>MIX</code>\u3002</p> </li> <li> <p>Number of Interface Slots:     \u8868\u793a\u4f60\u8981\u76e3\u63a7\u5e7e\u7d44 interface\uff0c\u55ae\u7d14 signal \u8a0a\u865f\u5247\u662f Probe</p> </li> <li> <p>Sample Data Depth:     \u8868\u793a ILA \u6700\u591a\u53ef\u4ee5\u5132\u5b58\u591a\u5c11\u7b46\u6a23\u672c\u8cc7\u6599\u3002\u8d8a\u5927\u4f54\u7528 BRAM \u8d8a\u591a\u3002</p> </li> </ul> <p>\u5176\u9918\u8a2d\u5b9a\u81ea\u5df1\u53ef\u4ee5\u6478\u7d22\u770b\u770b</p> </li> <li> <p>Create HDL Wrapper &amp; Generate Bitstream</p> </li> <li> <p>File -&gt; Export -&gt; Export Bitstream</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Extra4-ILA-with-PYNQ/#using-ila-for-signal-monitoring","title":"Using ILA for Signal Monitoring","text":"<ol> <li> <p>\u9023\u7dda\u5230 Jupyter Notebook\uff0c\u4e26\u57f7\u884c\u7b2c\u4e00\u500b cell\uff0c\u5148\u8f09\u5165 <code>Overlay</code></p> <p></p> </li> <li> <p>\u9ede\u9078 Open Target -&gt; Auto Connect \u9023\u7dda\u5230\u4f60\u7684\u677f\u5b50</p> <p></p> </li> <li> <p>\u82e5\u6a94\u6848\u914d\u7f6e\u6b63\u78ba\uff0c\u61c9\u8a72\u5c31\u6703\u8df3\u51fa ILA \u7684 Waveform \u8996\u7a97\uff0c\u82e5\u6c92\u6709\u8df3\u51fa\u4f86\u5247 Program Device \u770b\u770b</p> <p></p> <p>\u82e5\u9084\u662f\u6c92\u6709\u51fa\u73fe\u901a\u5e38\u662f\u56e0\u70ba bit \u6a94\u8ddf ltx\u6a94 (ILA\u7684Probe\u8cc7\u8a0a) \u6307\u5411\u932f\u8aa4\u7684\u95dc\u4fc2\uff0c\u53ef\u4ee5\u5f9e\u4e0b\u5716\u7684\u8a72\u8655\u53bb\u4fee\u6539\u518d\u6b21 Program Device</p> <p></p> </li> <li> <p>\u6309\u7167 Vivado-Tutorial/Extra4-Debugger \u6240\u5b78\u7684\uff0c\u8a2d\u5b9a\u6293\u53d6\u8a0a\u865f\u7684\u689d\u4ef6\uff0c\u4e26\u6309\u4e0b\u7bad\u982d\u958b\u59cb\u7b49\u5f85\u6293\u53d6\u8a0a\u865f</p> <p></p> </li> <li> <p>\u6b64\u6642\u53ef\u4ee5\u56de\u5230 Jupyter Notebook \u57f7\u884c\u5269\u9918\u7684 cell \u53bb\u5c0d GPIO \u5beb\u5165\u8cc7\u6599\uff0c\u5c31\u53ef\u4ee5\u6293\u5230\u5beb\u5165\u8cc7\u6599\u6642\u7684\u8a0a\u865f\u4e86</p> <p></p> <p></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Lab/","title":"Hardware-Software-Codesign-Lab","text":""},{"location":"Hardware-Software-Codesign/Lab/#_1","title":"\ud83d\udee0\ufe0f \u63a8\u85a6\u5be6\u4f5c\u9806\u5e8f","text":"<p>Lab1-UART</p> <p>Lab2-AXI-GPIO</p> <p>Lab3-AXI-lite</p> <p>Lab4-BRAM</p> <p>Lab5-DSP</p> <p>Lab6-CDMA</p>"},{"location":"Hardware-Software-Codesign/Lab/Extra-Lab-Convolution-system/","title":"FPGA Design Lab","text":"<p>\u5728\u9019\u6b21\u7684 Lab \u4e2d\u9700\u81ea\u884c\u8a2d\u8a08\u4e00\u500b\u53ef\u57f7\u884c convolution \u904b\u7b97\u7684 IP\uff0c\u4e26\u4ee5\u6b64 IP \u5efa\u69cb\u6574\u500b\u7cfb\u7d71\u3002\u4f9d\u64da\u63d0\u4f9b\u7684 input.hex \u4ee5\u53ca golden.hex\u4f86\u9032\u884c\u8f38\u51fa\u7d50\u679c\u6bd4\u5c0d\u3002</p> <p>\u8edf\u9ad4\u7aef\u50c5\u8ca0\u8cac\u8cc7\u6599\u642c\u904b\uff0c\u6240\u6709 convolution \u904b\u7b97\u5fc5\u9808\u5728\u81ea\u884c\u8a2d\u8a08\u7684 convolution IP \u4e2d\u5b8c\u6210\uff0c\u8edf\u9ad4\u7aef\u4e0d\u5f97\u9032\u884c\u4e3b\u8981\u904b\u7b97\u3002</p> <p>\ud83d\udca1 Hint\uff1a \u4f7f\u7528 Lab3 \u6240\u5b78 CDMA \u4f86\u642c\u904b\u8cc7\u6599\u9032\u5165 Bram \uff0cConvolution IP \u5f9e Bram \u5167\u8b80\u53d6 input data \u5f8c\uff0c\u5c07\u5377\u7a4d\u7d50\u679c\u5b58\u56de Bram \u5167\uff0c\u6700\u5f8c\u4f7f\u7528 CDMA \u4f86\u642c\u904b\u8cc7\u6599\u56de\u5230 PS \u7aef\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Extra-Lab-Convolution-system/#ip","title":"IP \u8a2d\u8a08\u6ce8\u610f\u4e8b\u9805 :","text":""},{"location":"Hardware-Software-Codesign/Lab/Extra-Lab-Convolution-system/#convolution","title":"Convolution \u7bc4\u4f8b :","text":"<p>input\u53ca\u6700\u5f8cconvolution\u7684\u503c\u90fd\u662f32bit\u3002</p> <p>Convolution\u7684\u6b65\u9a5f :</p> <ol> <li> <p>\u505aconvolution\u6642\uff0c\u5c07\u76f8\u4e58\u5f8c\u7684\u7d50\u679c(64bit)\uff0c\u53d6[47:16]\u7684\u503c\u3002</p> </li> <li> <p>\u5c079\u500b\u76f8\u4e58\u4e26\u9032\u4f4d\u7684\u7d50\u679c\uff0c\u7d2f\u52a0\u8f38\u51fa\u70baoutput\u3002</p> </li> </ol> <p>\u5099\u8a3b\uff1a  \u6b64\u6b21 Lab \u7684 \u904b\u7b97\u4e2d\u7121\u9808\u52a0\u5165 bias \u3002 </p> <p>\ud83d\udccc \u539f\u59cb\u8f38\u5165\u5f71\u50cf\u5927\u5c0f\u70ba 28\u00d728\uff0c\u7d93\u904e 3\u00d73 kernel \u7684 convolution \u904b\u7b97\uff08\u4e0d\u9032\u884c zero padding\uff09\u5f8c\uff0c\u8f38\u51fa\u5f71\u50cf\u5927\u5c0f\u6703\u8b8a 26*26 \u3002</p> <p>\ud83d\udccc \u6709\u63d0\u4f9b tb \u53bb\u9a57\u8b49\u81ea\u884c\u8a2d\u8a08\u7684 IP \u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Extra-Lab-Convolution-system/#kernel-value","title":"Kernel Value","text":"kernel[0] kernel[1] kernel[2] 0000A89E 000092D5 00006D43 kernel[3] kernel[4] kernel[5] 00001004 FFFF8F71 FFFF6E54 kernel[6] kernel[7] kernel[8] FFFFA6D7 FFFFC834 FFFFAC19"},{"location":"Hardware-Software-Codesign/Lab/Extra-Lab-Convolution-system/#bram","title":"Bram \u8b80\u5beb\u64cd\u4f5c :","text":"<ol> <li> <p>\u8b80\u53d6\u64cd\u4f5c\uff08Read Request\uff09\uff1a</p> <p>\u5c0d\u65bc\u8b80\u53d6\u8acb\u6c42\uff0c\u5fc5\u9808\u5c07\u8a18\u61b6\u9ad4\u6a21\u7d44\u7684 R_req \u8173\u4f4d\u62c9\u70ba 1'b1\uff08\u8868\u793a\u767c\u51fa\u8b80\u53d6\u8acb\u6c42\uff09\uff0c\u4e26\u5728 addr bus \u4e0a\u7d66\u51fa\u6b32\u8b80\u53d6\u7684\u4f4d\u5740\u3002 \u8cc7\u6599\u5c07\u6703\u5728\u4e00\u500b\u6642\u8108\u9031\u671f\u5f8c\u51fa\u73fe\u5728 R_data \u4e0a\u3002</p> </li> <li> <p>\u5beb\u5165\u64cd\u4f5c\uff08Write Request\uff09\uff1a</p> <p>\u5c0d\u65bc\u5beb\u5165\u8acb\u6c42\uff0c\u53ea\u9700\u5c07 R_req \u8a2d\u70ba 1'b1\uff0cW_req \u8a2d\u70ba 4'b1111\uff08\u8868\u793a\u6240\u6709 byte \u90fd\u5beb\u5165\uff09\u3002 \u6b64\u6642\uff0c W_data \u7684\u8cc7\u6599\u6703\u5728\u6b63\u7de3\uff08positive edge\uff09\u6642\u88ab\u5beb\u5165\u5230 addr \u6307\u5b9a\u7684\u4f4d\u5740\u4e2d\u3002</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Lab/Extra-Lab-Convolution-system/#block-design","title":"\u53c3\u8003 Block design  :","text":""},{"location":"Hardware-Software-Codesign/Lab/Extra-Lab-Convolution-system/#_1","title":"\u6e2c\u8a66\u7d50\u679c :","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/","title":"FPGA Design Lab1","text":"<p>\u4f7f\u7528 PYNQ-Z2 \u4e0a\u7684 Zynq Processor \u64cd\u4f5c\u7c21\u55ae\u7684 C/C++  Project\u3002</p> <p>[!TIP] Block design \u53ef\u4ee5\u53c3\u8003 Part1 \u7684\u8a2d\u8a08</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#problem-1","title":"Problem 1","text":"<p>\u4f7f\u7528\u9375\u76e4\u8f38\u5165\u4e94\u500b\u975e\u8ca0\u6574\u6578\u5f8c\uff0c\u900f\u904e PS \u7aef (\u8edf\u9ad4) \u53bb\u5c07\u9019\u4e94\u500b\u6578\u7531\u5c0f\u5230\u5927\u6392\u5e8f</p> <p>\u53c3\u8003\u8f38\u51fa\u7d50\u679c\uff1a</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#problem-2","title":"Problem 2","text":"<p>\u5728\u9019\u500b Lab \u4e2d\uff0c\u5b78\u7fd2\u5982\u4f55\u4f7f\u7528 UART \u5728 PC \u548c PYNQ \u4e4b\u9593\u9032\u884c\u901a\u8a0a</p> <p>PC \u6703\u900f\u904e UART \u50b3\u9001\u4e00\u5f35\u5716\u7247 (<code>.bmp</code>) \u5230 PYNQ\uff0cPYNQ \u6703\u5c07\u539f\u59cb\u5716\u7247\u7d93\u904e \u4e8c\u503c\u5316\u8655\u7406 (Binarization) \u5f8c\uff0c\u6700\u5f8c\u518d\u5c07\u8f49\u63db\u5f8c\u7684\u5716\u7247\u50b3\u56de\u7d66 PC</p> <p>[!NOTE] \u4e8c\u503c\u5316\u8655\u7406 (Binarization)</p> <p>\u5c0d\u65bc\u7070\u968e\u5716\u50cf\u4e2d\u6bcf\u500b\u50cf\u7d20\u503c\uff080\uff5e255\uff09\uff0c\u8a2d\u5b9a\u4e00\u500b threshold\uff0c\u5982\u679c\u50cf\u7d20\u503c\u9ad8\u65bc\u95be\u503c\uff0c\u5c31\u8a2d\u5b9a\u70ba\u767d\u8272\uff081\uff09\uff1b\u5426\u5247\u8a2d\u5b9a\u70ba\u9ed1\u8272\uff080\uff09</p> <p>```python</p> <p></p> <p>[!NOTE] BMP file</p> <p>BMP (Bitmap) \u662f\u4e00\u7a2e\u7121\u58d3\u7e2e\u7684\u5716\u7247\u683c\u5f0f\uff0c\u70ba Microsoft \u958b\u767c\u7684\u9ede\u9663\u5716\u5f71\u50cf\u683c\u5f0f\uff0cBMP \u6a94\u6848\u662f\u7531\u6578\u500b header \u4ee5\u53ca\u50cf\u7d20\u8cc7\u8a0a\u7d44\u6210</p> <p>\u4ee5\u4e0b\u5217\u51fa\u4e86\u4e00\u4e9b header \u4e2d\u8b93\u6211\u5011\u53ef\u4ee5\u5224\u65b7\u6a94\u6848\u5927\u5c0f\u8207\u5716\u7247\u9577\u5bec\u7684\u6b04\u4f4d\uff1a</p> offset (hex) size description 02 4 The size of the BMP file in bytes 12 4 The bitmap width in pixels (signed integer) 16 4 The bitmap height in pixels (signed integer) <p>\u5728 Unix \u7cfb\u7d71\u4e2d\u53ef\u4ee5\u4f7f\u7528 <code>hexdump &lt;file&gt;</code> \u4ee5 16 \u9032\u4f4d\u683c\u5f0f\u67e5\u770b\u6a94\u6848\u5167\u5bb9\uff0c\u4ee5\u4e0b\u70ba lab \u4e2d\u7bc4\u4f8b\u5716\u7247\u7684\u90e8\u5206\u8f38\u51fa\u7d50\u679c\uff1a</p> <p></p> <p>\u6700\u5de6\u908a\u7684 column \u662f offset (\u5341\u516d\u9032\u4f4d)\uff0c\u5176\u9918\u90e8\u5206\u5247\u662f 2 bytes \u70ba\u4e00\u7d44\u7684 hex value\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c0d\u7167\u524d\u9762\u7684\u8868\u683c (\u6ce8\u610f BMP \u662f\u4ee5 little-endian \u4f86\u5132\u5b58)\uff0c\u6a94\u6848\u5927\u5c0f\u70ba <code>0x0004_0438</code> $= 263224$\uff0c\u5716\u7247\u7684\u9577\u8207\u5bec\u5247\u90fd\u662f <code>0x0000_0200</code> $= 512$</p> <p>\u6709\u4e86\u9019\u4e9b\u8cc7\u8a0a\u6211\u5011\u4e5f\u53ef\u4ee5\u9593\u63a5\u63a8\u7b97\u51fa header \u7684\u5927\u5c0f\u70ba $263224 - 512 \\times 512 = 1080$\uff0c\u4e5f\u5c31\u662f\u8aaa\u8981\u5c0d\u5716\u7247\u9032\u884c\u4e8c\u503c\u5316\u8655\u88e1\u8981\u5f9e offset = 1080 (\u5341\u9032\u4f4d) \u7684\u4f4d\u7f6e\u958b\u59cb</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#binarization","title":"Binarization","text":"<p>if pixel &gt; threshold:     pixel = 255  # \u767d\u8272 else:     pixel = 0    # \u9ed1\u8272 ```</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#step-1","title":"Step 1","text":"<p>\u7167\u8457 Part1 \u7684\u6b65\u9a5f\u5b8c\u6210 block design \u4e26\u4e14\u5efa\u7acb platform \u3001 Application</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#step-2","title":"Step 2","text":"<p>\u6253\u958b <code>Application</code> \u2192 <code>Source</code> \u2192 <code>lscript.ld</code>\uff0c\u66f4\u6539 <code>Heap Size</code> \u7684\u503c (\u5c07\u5716\u7247\u5b58\u5165\u8a72\u96bb\u7a0b\u5f0f\u7684 Heap \u4e2d)</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#step-3","title":"Step 3","text":"<p>\u52a0\u5165 src \u6a94\u6848\u4e2d\u7684 <code>main.c</code> \uff0c \u81ea\u884c\u5b8c\u6210\u5269\u9918\u90e8\u5206</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#step-4","title":"Step 4","text":"<p>\u4f9d\u5e8f\u9ede\u9078</p> <ul> <li> <p><code>Platform</code> \u2192 <code>Build</code></p> </li> <li> <p><code>Application</code> \u2192 <code>Build</code> \u2192 <code>Run</code></p> </li> </ul>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#setp-5","title":"Setp 5","text":"<p>\u57f7\u884c <code>src</code> \u4e0b\u7684 <code>transfer.exe</code>\uff0c\u9019\u500b\u7a0b\u5f0f\u6703\u5c07 <code>src/lena_gray.bmp</code> \u900f\u904e Serial port \u50b3\u9001\u5230 PYNQ \u677f\u5b50\u4e0a</p> <p>\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5efa\u7acb\u865b\u64ec\u74b0\u5883\u4f86\u57f7\u884c <code>transfer.py</code>\uff1a</p> <pre><code>py -m venv .venv\n.\\.venv\\Scripts\\activate\n</code></pre> <p>\u7136\u5f8c\u5b89\u88dd\u6240\u9700\u7684\u5957\u4ef6\u4e26\u57f7\u884c\u7a0b\u5f0f</p> <pre><code>pip install -r requirements.txt\npython transfer.py\n</code></pre> <p>[!WARNING] \u8acb\u5148\u78ba\u8a8d PYNQ \u677f\u5b50\u662f\u4f7f\u7528\u54ea\u500b Serial port\uff0c\u7136\u5f8c\u5728 <code>transfer.py</code> \u4fee\u6539 <code>serial.Serial(port=\"COM4\", baudrate=115200)</code> \u4e2d <code>port</code> \u7684\u503c</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab1-UART/#step-6","title":"Step 6","text":"<p>\u6253\u958b <code>lena_gray_binarization.bmp</code> \u67e5\u770b\u7d50\u679c</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab2-AXI-GPIO/","title":"FPGA Design Lab2","text":"<p>\u5229\u7528 AXI-GPIO \u642d\u914d Vitis \u8a2d\u8a08\u4e00\u500b\u7c21\u6613\u7d05\u7da0\u71c8\u3002</p> <p>\u4ee5 RGB led4 \u505a\u70ba\u7d05\u7da0\u71c8\uff0c\u4e26\u4e14\u5728 terminal \u4e0a\u986f\u793a\u76ee\u524d\u7684\u71c8\u865f\u4ee5\u53ca\u5269\u9918\u79d2\u6578\u3002  </p> <p>\u6bcf\u500b\u71c8\u865f\u7684\u7dad\u6301\u6642\u9593\u7531 sw0 \u4f86\u63a7\u5236\u3002  sw0 \u7684\u5207\u63db\u4e0d\u5f71\u97ff\u7576\u524d\u71c8\u865f\u8f38\u51fa\u79d2\u6578\uff0c\u71c8\u865f\u7dad\u6301\u79d2\u6578\u5728\u8b8a\u63db\u71c8\u865f\u5f8c\u624d\u5207\u63db\u3002</p> sw0 Green Yellow Red 0 15 \u79d2 1 \u79d2 16 \u79d2 1 7 \u79d2 1 \u79d2 8 \u79d2 <p>\ud83d\udca1 Hint\uff1a \u5012\u6578\u8a08\u6642\u90e8\u5206\u53ef\u7531 C \u53bb\u5b8c\u6210\uff0c\u6240\u4ee5\u9019\u500b lab \u53ef\u4e0d\u52a0\u5165\u81ea\u5df1\u88fd\u4f5c\u7684 IP \uff0c\u50c5\u9700\u4f7f\u7528 AXI GPIO \u5373\u53ef\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab2-AXI-GPIO/#block-design","title":"\u53c3\u8003 block design :","text":"<p>\ud83d\udccc \u70ba\u4ec0\u9ebc\u53ea\u7528\u4e00\u500b GPIO IP ? \u4e00\u500b AXI GPIO IP \u6709\u5169\u500b channels \uff0c\u5728\u6b64\u6b21\u7684 Lab \u4e2d\uff0c\u53ea\u6703\u7528\u5230\u4e00\u500b output \u548c\u4e00\u500b input\uff0c\u56e0\u6b64\u53ef\u53ea\u4f7f\u7528\u4e00\u500b GPIO IP \u3002 </p>"},{"location":"Hardware-Software-Codesign/Lab/Lab2-AXI-GPIO/#gpio-ip","title":"GPIO IP \u8a2d\u5b9a :","text":"<p>Channel 1 \u4f5c\u70ba rgb_led \u7684 6 bits output Channel\u3002 Channel 2 \u4f5c\u70ba switch \u7684 2 bits input Channel\u3002  </p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab2-AXI-GPIO/#rgb-led","title":"RGB Led \u984f\u8272\u8a2d\u5b9a :","text":"Preview R G B Binary Hex Name \u2b1b 0 0 0 000 0x0 Black \ud83d\udfe6 0 0 1 001 0x1 Blue \ud83d\udfe9 0 1 0 010 0x2 Green \ud83d\udfe6\ud83d\udfe9 0 1 1 011 0x3 Cyan \ud83d\udfe5 1 0 0 100 0x4 Red \ud83d\udfe5\ud83d\udfe6 1 0 1 101 0x5 Magenta \ud83d\udfe8 1 1 0 110 0x6 Yellow \u2b1c 1 1 1 111 0x7 White"},{"location":"Hardware-Software-Codesign/Lab/Lab2-AXI-GPIO/#demo","title":"Demo \u7bc4\u4f8b","text":"<p>\u25b6 Watch Video on YouTube</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab3-AXI-lite/","title":"FPGA Design Lab3","text":"<p>\u8207 Lab1-UART Problem 1 \u76f8\u4f3c\uff0c\u4f46\u8acb\u6539\u7528 Verilog \u8a2d\u8a08\u4e00\u500b Sorting \u96fb\u8def\uff0c\u6253\u5305\u6210 AXI IP \u5f8c\uff0c\u4f7f\u7528 block design \u7684\u65b9\u5f0f\u4f86\u5b8c\u6210\u6b64 Lab \u3002 </p>"},{"location":"Hardware-Software-Codesign/Lab/Lab3-AXI-lite/#problem","title":"Problem","text":"<p>\u8a2d\u8a08\u4e00\u500b\u6392\u5e8f\u96fb\u8def\uff0c\u7531 processor \u8f38\u5165\u4e00\u4e32\u6b63\u6574\u6578\u5c07\u5176\u6392\u5e8f\u5f8c\u50b3\u56de\u3002</p> <ol> <li>\u6578\u5b57\u4f4d\u5143\u6578\u81ea\u8a02\u3002(\u6700\u5c114bit)</li> <li>\u6578\u5217\u9577\u5ea6\u81ea\u8a02\u4e14\u56fa\u5b9a\u3002(\u6700\u5c118\u7b46\u6578\u5b57)</li> <li>\u6392\u5e8f\uff1a\u5927 \u2192 \u5c0f \u3001 \u5c0f \u2192 \u5927\uff0c\u4e8c\u9078\u4e00\u5373\u53ef\u3002</li> <li>\u6f14\u7b97\u6cd5\u4e0d\u9650\u3002</li> </ol>"},{"location":"Hardware-Software-Codesign/Lab/Lab3-AXI-lite/#block-design","title":"\u53c3\u8003 block design","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab3-AXI-lite/#_1","title":"\u9810\u8a2d\u7d50\u679c\u5448\u73fe:(\u5927\u5230\u5c0f)","text":"<pre><code>77743217 -&gt; 77774321\n\n1fb4a219 -&gt; fba94211\n\n123489af -&gt; fa984321\n</code></pre>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/","title":"FPGA Design Lab4","text":"<p>\u672c\u6b21 lab \u5c07\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 AXI BRAM Controller\uff0c\u4e26\u5b78\u7fd2\u76f4\u63a5\u900f\u904e Verilog \u8a9e\u6cd5\u547c\u53eb Block BRAM\uff0c\u4e5f\u5c31\u662f <code>Verilog Template</code> \u7684\u8a2d\u8a08\u65b9\u6cd5\uff0c\u5be6\u4f5c\u4e00\u500b On-Chip Memory System\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#verilog-template-vs-vivado-ip-core","title":"\ud83d\udee0\ufe0f Verilog Template vs Vivado IP Core","text":"\u9805\u76ee \u624b\u5beb Verilog Template \u4f7f\u7528 Vivado IP Core (e.g. FIFO Generator) \u2699 \u8a2d\u8a08\u5f48\u6027 \u2705 \u9ad8\uff0c\u53ef\u81ea\u5b9a\u8cc7\u6599\u5bec\u5ea6\u3001\u63a7\u5236\u65b9\u5f0f\u7b49 \u274c \u4e2d\u7b49\uff0c\u5f48\u6027\u4f9d IP \u8a2d\u5b9a\u9805\u76ee\u800c\u5b9a \ud83d\udd0d \u53ef\u8b80\u6027 / \u53ef\u7dad\u8b77\u6027 \u274c \u8f03\u4f4e\uff0c\u9700\u624b\u52d5\u7ba1\u7406 FIFO \u908f\u8f2f \u2705 \u8f03\u9ad8\uff0cIP \u6709\u5716\u5f62\u5316\u4ecb\u9762\u8207\u6587\u6a94\u652f\u6301 \ud83d\udd04 \u6574\u5408 Vivado BD \u274c \u9700\u624b\u52d5 RTL instantiation \u548c port mapping \u2705 \u81ea\u52d5\u6574\u5408\uff0c\u5bb9\u6613\u9023\u63a5\u5230 AXI/AXI-Stream \ud83e\uddea \u9a57\u8b49\u65b9\u4fbf\u6027 \u274c \u8f03\u9ebb\u7169\uff0c\u9700\u8981\u81ea\u5df1\u5beb testbench \u6216\u8207 AXI \u5c0d\u63a5 \u2705 \u5df2\u77e5\u529f\u80fd\u7a69\u5b9a\uff0cXilinx \u5df2\u9a57\u8b49 \ud83e\uddf1 \u8cc7\u6e90\u4f7f\u7528\u6548\u7387 \u2705 \u53ef\u6700\u4f73\u5316\uff0c\u4f9d\u7167\u7279\u5b9a\u9700\u6c42\u88c1\u526a\u8cc7\u6e90 \u274c \u901a\u5e38\u8f03\u5927\u3001\u4fdd\u5b88\uff0c\u70ba\u6cdb\u7528\u6027\u8a2d\u8a08 \u23f1 \u958b\u767c\u6642\u9593 \u274c \u9577\uff0c\u9700\u8981\u958b\u767c\u8207\u9664\u932f \u2705 \u5feb\uff0c\u5e7e\u5206\u9418\u5167\u53ef\u7522\u751f\u4e26\u9023\u63a5\u597d \ud83d\udce4 \u6642\u5e8f\u512a\u5316\u8207\u5efa\u8b70 \u274c \u81ea\u5df1\u8ca0\u8cac reset\u3001clock domain\u3001timing closure \u2705 IP \u901a\u5e38\u5df2\u8003\u616e CDC/latency \ud83d\udcda \u5b78\u7fd2\u8207\u7406\u89e3\u50f9\u503c \u2705 \u975e\u5e38\u597d\uff0c\u5e6b\u52a9\u4e86\u89e3 FIFO / memory \u5be6\u4f5c \u274c \u62bd\u8c61\u5316\u9ad8\uff0c\u5b78\u7fd2\u50f9\u503c\u76f8\u5c0d\u5c11"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#verilog-template","title":"Verilog Template","text":"<p>\u4e3b\u8981\u5206\u6210\u5169\u500b\u90e8\u5206 : <code>Available Attributes</code> \u3001 <code>Port Descriptions</code></p> <ol> <li> <p><code>Available Attributes</code> : \u53ef\u8a2d\u5b9a Block RAM \u7684\u64cd\u4f5c\u6a21\u5f0f\u3001\u521d\u59cb\u503c\u3001\u8cc7\u6599\u5bec\u5ea6\u7b49\u7b49\u53c3\u6578\u3002</p> </li> <li> <p><code>Port Descriptions</code> : \u5b9a\u7fa9 Block RAM \u7684 I/O Ports\u3002</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#spec","title":"Spec","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#bram-controller","title":"Bram controller \u914d\u7f6e","text":"<p>AXI BRAM controller\u53ea\u6703\u88ab\u5206\u914d\u5230\u4e00\u500bAddress\uff0c\u53ea\u80fd\u63a7\u5236\u4e00\u500b port \uff0c\u56e0\u6b64\u672c\u6b21\u8a2d\u8a08\u70ba <code>True Dual Port</code> \u7684\u60c5\u6cc1\u4e0b\u9700\u4f7f\u7528\u5230\u5169\u9846 AXI BRAM Controller \uff0c \u9019\u6a23\u5b50\u624d\u80fd\u7372\u5f97\u5169\u500b Address \u4f86\u7d66 BRAM \u7684 Port A\u3001 Port B \u505a\u4f7f\u7528\u3002</p> <p></p> <p>AXI protocol\u70baByte Addressable\u7684\uff0c \u800c\u6211\u5011\u8981\u63a7\u5236\u7684BRAM\u70ba32Kb\u7684\u5927\u5c0f\uff0c \u63db\u7b97\u6210Byte\u70ba32Kb / 8bit = 4KB\uff0c\u56e0\u6b64\u5728 Range\u8a2d\u5b9a\u9019\u908a\u9700\u4f7f\u75284K\u3002</p> <p></p> <p>\u6839\u64da <code>address path diagram</code>\u53ef\u4ee5\u770b\u5230\uff0c\u5206\u914d\u7d66AXIBram Controller \u7684 0x4000_0000 - 0x4000_0FFF \u7d93\u904e AXI Smart Connect \u5f8c\u5c31\u6703\u8b8a\u6210 0x0 - 0xFFF\uff0c\u7d66\u5f8c\u7e8c32Kb(4KB)\u7684BRAM\u505a\u4f7f\u7528\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#ramb36e1-template","title":"RAMB36E1 template\u53c3\u6578\u8a2d\u7f6e","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#ip-io","title":"IP I/O","text":"<p>Addr Width \u70ba 12bit\uff0c\u56e0\u70ba <code>AXI protocol \u70ba Byte Addressable</code>\u7684\uff0c32Kb \u7684\u8a18\u61b6\u9ad4\u9700\u8981\u7528\u5230 4K \u7684 range \u53bb\u505a\u5b9a\u5740\uff0c\u56e0\u6b64\u70ba 12bit-width\u3002</p> <p>Data Width \u70ba 32bit\uff0c\u56e0\u6b64 input(D_in_X)\u3001output(D_out_X) \u7684\u90e8\u5206\u90fd\u8a2d\u7f6e\u70ba32bit\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#ramb36e1-available-attributes","title":"RAMB36E1 Available Attributes","text":"<p>\u6839\u64da SPEC \u8981\u6c42\uff0c\u5c07 RAM_MODE \u8a2d\u7f6e\u70ba True Dual Port  mode\u3002</p> <p>DOA_REG\u3001DOB_REG \u90fd\u8a2d\u6210 1\uff0c\u5728 RAMB36E1 \u7684 output \u5c07\u6703\u6709\u4e00\u500b\u984d\u5916\u7684 Register \u62ff\u4f86\u5132\u5b58\u8f38\u51fa\u7684\u503c\uff0c\u8b93\u5f8c\u7e8c\u7684\u96fb\u8def\u53ef\u4ee5\u6709\u4e00\u500b\u5b8c\u6574\u7684 cycle \u4f86 \u505a\u5b58\u53d6\u8cc7\u6599\u3002</p> <p><code>ECC</code>\u8a2d\u7f6e\u7686\u8a2d\u5b9a\u6210 <code>FALSE</code>\uff0c\u56e0 RAMB36E1 \u8a2d\u7f6e\u6210TDP\u6a21\u5f0f\u6642\u4e0d\u80fd\u4f7f\u7528 ECC\u3002</p> <p></p> <p>RAMB36E1 \u5728 TDP \u6a21\u5f0f\u4e0b\uff0c<code>Port Data Width</code> \u53ea\u80fd\u8a2d\u7f6e\u6210\u4e0b\u65b9\u5e7e\u7a2e\u6578\u5b57\uff0c\u6b64\u6b21\u8a2d\u8a08\u70ba read/write width  \u70ba 32bit \u7684 BRAM \uff0c\u56e0\u6b64\u8a2d\u7f6e\u6210 36bit \uff0c 36bit \u5176\u4e2d 32bit \u70ba data \u53e6\u59164\u500b bit \u70ba Paritybit \uff0c\u96d6\u7136 TDP \u4e0b\u4e0d\u652f\u63f4 ECC \u4f46\u6839\u64da xilinx \u63d0\u4f9b\u7684\u6587\u6a94\u6211\u5011\u4e0d\u80fd\u55ae\u7d14\u8a2d\u7f6e\u6210 32bit \u4ecd\u9700\u8a2d\u7f6e\u6210 36bit \u624d\u6b63\u78ba\u3002</p> <p></p> <p>\u4f9d SPEC \u8981\u6c42\uff0c\u6bcf 32 bit \u70ba\u4e00\u500b word\u3002 Offset \u5247\u70ba\u5f9e Base address \u5f80\u5f8c\u5e7e\u500b Byte\uff0c\u5176\u4e2d\u6bcf4\u500b offset \u4ee3\u8868 4 byte\uff0c\u4ea6\u5373 1 word \u3002 E.g. offset=28\uff0c\u5247\u5c07\u6578\u503c\u8a2d\u7f6e\u5728\u7b2c 7 \u500b word \u4e0a\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#ramb36e1-port-descriptions","title":"RAMB36E1 Port Descriptions","text":"<p>RAMB36E1 \u5728 True Dual Port (TDP) \u6a21\u5f0f\u4e0b\u652f\u63f4 <code>asynchronous clock domains</code>\uff0cPort A\u3001Port  B\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684clock\u3002</p> <p></p> <p>\u56e0 RAMB36E1 \u652f\u63f4 <code>Byte wise write</code>\uff0c\u56e0\u6b64 WriteEnable \u8a0a\u865f\u70ba 4bit\uff0c\u56e0\u70ba 32bit width \u70ba 4Byte\uff0cWriteEnable \u7684 4 \u500b bit \u5404\u63a7\u5236\u5176\u4e2d\u4e00\u500b Byte \u7684\u8b80\u5beb\u3002</p> <p>E.g.:\u82e5\u53ea\u8981\u66f4\u65b0\u7b2c\u4e00\u500bbyte\uff0c\u5247WEA\u5c07\u88ab \u8a2d\u5b9a\u62104\u2019b0001</p> <p></p> <p></p> <p>\u5148\u524d\u5728 Avaliable attribute \u6642\uff0c\u6709\u8a2d\u5b9a output register \uff0c\u800c\u4e0b\u5716\u5169\u500b\u8a0a\u865f\u5247\u63a7\u5236\u8a72 output register \u662f\u5426\u53bb\u505a\u66f4\u65b0\uff0c\u56e0\u6b64\u90fd\u8a2d\u70ba1\uff0c\u4f7f\u4ed6\u4fdd\u6301\u66f4\u65b0 output register\u3002</p> <p></p> <p>RAM input/output data \u7686\u70ba 32-bit\uff0c\u800c DOADO()\u3001DOBDO() \u70ba output dual port\uff0cDIADI()\u3001 DIBDI() \u70ba input dual port\u3002</p> <p></p> <p>RAMB36E1 \u5be6\u969b\u4e0a\u5305\u542b 36Kb \u7684\u5bb9\u91cf\uff0c\u5176\u4e2d32Kb \u7528\u65bc\u8cc7\u6599\u5132\u5b58\uff08Data Bits\uff09\uff0c\u984d\u5916\u76844Kb \u5247\u5c08\u9580\u7528\u4f86\u5132\u5b58 Parity Bits\uff0c\u9019\u4e9b\u4f4d\u5143\u53ea\u6703\u5728\u555f\u7528 ECC \u6a21\u5f0f\u6642\u4f7f\u7528\u3002</p> <p>RAMB36E1 \u652f\u63f4\u6700\u5c0f\u8cc7\u6599\u5bec\u5ea6\u70ba 1-bit\uff0c\u56e0\u6b64\u82e5\u914d\u7f6e\u70ba 1-bit \u6a21\u5f0f\uff0c\u4fbf\u9700\u8981 2^15 \u500b\u5730\u5740\u624d\u80fd\u5b58\u6eff 32Kb\u3002 Address Width \u4e4b\u6240\u4ee5\u8a2d\u5b9a\u70ba 16-bit\uff0c\u662f\u56e0\u70ba\uff1a</p> <p>\u5be6\u969b\u5730\u5740\u9700\u898115-bit \u3002</p> <p>\u6700\u524d\u9762\u4fdd\u7559\u76841-bit \u662f\u7528\u4f86\u4f5c\u70ba cascade \u6a21\u5f0f\uff08\u4e32\u63a5\u591a\u500bBRAM\uff09\u6642\u7684\u9078\u64c7 bit\u3002</p> <p>\u56e0\u6b64\u7e3d\u5171\u9700\u898116-bit \u7684\u5730\u5740\u8f38\u5165\u3002</p> <p>\u5728\u4f7f\u7528 AXI BRAM Controller \u6642\uff0caddr_A \u63d0\u4f9b\u7684\u662f <code>Byte Address</code>\uff0c \u800c RAMB36E1 \u5be6\u969b\u4ee5\u6bcf1 word = 32 bits = 4 bytes \u70ba\u55ae\u4f4d\u5b58\u53d6\u3002\u56e0\u6b64\u5728\u9023\u63a5\u6642\u9700\u5c07\u6700\u4f4e 0\uff5e1 \u4f4d\u5143\u5ffd\u7565\uff0c\u5730\u5740\u5f9e <code>addr_A[11:2]</code>\u958b\u59cb\u4f7f\u7528\uff0c\u6b64\u8655\u7684\u4f4d\u5143\u8868\u793a\u7684\u662f\u7b2c\u5e7e\u500b word \u55ae\u4f4d\u7684\u5730\u5740\u3002</p> <p></p> <p>\u6839\u64daxilinx\u63d0\u4f9b\u7684BRAM\u914d\u7f6e\u6587\u6a94\u53ef\u4ee5\u770b\u5230\uff0c<code>Port Address Width = 10bit</code> \u5c0d\u61c9\u5230\u6211\u5011\u8a2d\u7f6e\u7684 addr_A[11:2]\uff0cADDR Bus = [14:5] \u5247\u5c0d\u61c9\u5230 .ADDRARDADDR \u88e1\u9762\u7684\u7b2c 14 \u500b bit\u5230\u7b2c2\u500b bit \u525b\u597d\u70ba addr_A[11:2] \u7684\u4f4d\u5b50\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#utilization-of-bram","title":"Utilization of BRAM","text":"<p>\u6839\u64da <code>Utilization report</code> \u53ef\u4ee5\u770b\u5230 Pynq-z2 \u7684 BRAM \u5171\u6709 140 \u500b\u53ef\u4f7f\u7528\uff0c\u800c\u6211\u5011\u9019\u6b21\u900f\u904e <code>RAMB36E1 template</code> \u5be6\u4f8b\u5316\u4e86\u4e00\u9846 dual port BRAM \u4f7f\u7528\u4e86\u5176\u4e2d\u7684 1 \u500b BRAM \u3002\u56e0\u6b64\u5f9e\u4e0a\u65b9 utilization report \u770b\u5230\u6211\u5011BRAM \u7528\u4e861/140 = 0.71%\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#software-testing-result","title":"Software Testing Result","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab4-BRAM/#_1","title":"\u9032\u968e\u7df4\u7fd2 :","text":"<p>\u4f7f\u7528 <code>Verilog Template</code> \u7684\u65b9\u6cd5 \uff0c \u5c07 RAMB36E1 Configure \u6210 <code>36Kb FIFO</code> \u3002</p> <p>\ud83d\udca1 Hint\uff1a \u4f7f\u7528\u4e00\u9846 TDP mode \u7684 BRAM \uff0c\u5c07\u8981\u5beb\u5165 FIFO \u7684 Data \u900f\u904e PortA \u5beb\u5165\uff0c\u8981\u8b80\u7684 Data \u900f\u904e Port B \u8b80\u51fa\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/","title":"FPGA Design Lab5","text":"<p>\u672c\u6b21 lab \u8acb\u4f7f\u7528 DSP \u6a21\u7d44\u4f86\u5be6\u505a Convolution sysem\u3002</p> <p>\ud83d\udccc \u70ba\u4ec0\u9ebc DSP \u9069\u5408\u505a Convolution\uff1f</p> <p>\u56e0\u70ba convolution \u7684\u672c\u8cea\u662f\u5927\u91cf\u7684\u4e58\u6cd5\u8207\u52a0\u6cd5\uff08MAC\uff09\u904b\u7b97\uff0c\u800c DSP \u6a21\u7d44\u525b\u597d\u5167\u5efa\u4e58\u52a0\u7d50\u69cb\uff0c\u80fd\u5728\u4e00\u500b\u6642\u9418\u9031\u671f\u5167\u5b8c\u6210\u9019\u7a2e\u904b\u7b97\u3002\u76f8\u8f03\u7528\u908f\u8f2f\u96fb\u8def\u5be6\u4f5c\uff0cDSP \u4e0d\u4f46\u904b\u7b97\u66f4\u5feb\u3001\u8cc7\u6e90\u66f4\u7701\uff0c\u9084\u80fd\u652f\u63f4\u56fa\u5b9a\u9ede\u8a08\u7b97\u8207\u4e26\u884c\u8655\u7406\uff0c\u975e\u5e38\u9069\u5408\u7528\u4f86\u52a0\u901f\u5f71\u50cf\u8655\u7406\u3001\u6ffe\u6ce2\u5668\u7b49 convolution \u61c9\u7528\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#problem1","title":"Problem1","text":"<p>\u5728 <code>Problem1</code> \u4e2d\uff0c\u4f7f\u7528 <code>DSP</code> \u6a21\u7d44\u53bb\u5b8c\u6210 <code>Convolution sysem</code>\u3002</p> <p>\u672c\u7cfb\u7d71\u5be6\u4f5c\u4e00\u500b\u4ee5\u786c\u9ad4\u52a0\u901f\u70ba\u6838\u5fc3\u7684 <code>2D Convolution</code> \u904b\u7b97\u6a21\u7d44\uff0c\u61c9\u7528\u65bc\u8655\u7406\u56fa\u5b9a\u5927\u5c0f\uff0828\u00d728\uff09\u7684\u5f71\u50cf\u8f38\u5165\u8cc7\u6599\uff0c\u4e26\u914d\u5408 <code>3\u00d73</code> \u7684\u6372\u7a4d\u6838 <code>Kernel</code> \u9032\u884c\u7279\u5fb5\u8403\u53d6\u3002</p> <p>\ud83d\udccc \u7cfb\u7d71\u67b6\u69cb\u8207\u529f\u80fd \u8f38\u5165\u8cc7\u6599\u683c\u5f0f\uff1a \u4f7f\u7528 .hex \u6a94\u6848\u5132\u5b58 28\u00d728 \u5927\u5c0f\u7684\u5f71\u50cf\u8cc7\u6599\uff0c\u6bcf\u7b46\u70ba 32-bit\uff0c\u50c5\u4f7f\u7528\u5f8c 16 bits \u4f5c\u70ba\u5be6\u969b\u50cf\u7d20\u503c\u3002</p> <ol> <li>Convolution Kernel\uff1a \u56fa\u5b9a\u70ba 3\u00d73 \u7a97\u53e3\uff0c\u4f7f\u7528\u4e00\u7d44\u9810\u5b9a\u7fa9\u7684 16-bit \u6b0a\u91cd\u53c3\u6578\u9032\u884c\u52a0\u6b0a\u7d2f\u52a0\u904b\u7b97\u3002</li> <li>\u908a\u754c\u8655\u7406\uff1a \u4e0d\u4f7f\u7528 Zero Padding\uff0c\u56e0\u6b64\u8f38\u51fa\u5f71\u50cf\u5c3a\u5bf8\u70ba 26\u00d726\u3002</li> <li>\u8f38\u51fa\u8cc7\u6599\u683c\u5f0f\uff1a \u8a08\u7b97\u7d50\u679c\u4ee5 32-bit \u683c\u5f0f\u5132\u5b58\uff0c\u4e26\u8f38\u51fa\u70ba golden_32bit.hex\uff0c\u4f9b\u5f8c\u7e8c\u6bd4\u5c0d\u8207\u9a57\u8b49\u3002</li> </ol> <p>\u9a57\u8b49\u6d41\u7a0b\uff1a \u4f7f\u7528 Python \u6e2c\u8a66\u8173\u672c\u6bd4\u5c0d\u8a18\u61b6\u9ad4\u4e2d\u8b80\u51fa\u7684\u8a08\u7b97\u7d50\u679c\u8207 Golden Model\uff0c\u652f\u63f4\u932f\u8aa4\u6bd4\u5c0d\u63d0\u793a\u53ca\u7d50\u679c\u8f38\u51fa\u3002</p> <p>\ud83e\udde0 \u8a2d\u8a08\u76ee\u7684\u8207\u61c9\u7528 \u6b64\u7cfb\u7d71\u6a21\u64ec\u5178\u578b\u7684\u5f71\u50cf\u8655\u7406\u786c\u9ad4\u52a0\u901f\u61c9\u7528\uff0c\u5e38\u898b\u65bc\u908a\u7de3\u5075\u6e2c\u3001\u7279\u5fb5\u6ffe\u6ce2\u8207\u524d\u8655\u7406\u7b49\u5834\u666f\u3002\u900f\u904e\u786c\u9ad4\u5be6\u73fe\uff0c\u53ef\u52a0\u901f\u8cc7\u6599\u541e\u5410\u3001\u964d\u4f4e\u5ef6\u9072\uff0c\u4e26\u5177\u5099\u9ad8\u5ea6\u53ef\u64f4\u5c55\u6027\uff0c\u9069\u5408\u5c0e\u5165\u66f4\u8907\u96dc\u7684 CNN \u67b6\u69cb\u4e2d\u4f5c\u70ba\u57fa\u790e\u6a21\u7d44\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#step-1","title":"Step 1","text":"<p>\u52a0\u5165 <code>CONV16.v</code> \u5230 project \u5f8c\uff0c\u4f7f\u7528 <code>CONV16.tcl</code> \u53bb\u9084\u539f\u51fa convolution system \u7684 project\u3002</p> <p></p> <p>\u8a73\u7d30 project \u4ecb\u7d39\u8acb\u770b Extra-Lab-Convolution-system \u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#step-2","title":"Step 2","text":"<p>\u5c07 IP \u4e2d\u7684 MAC \u904b\u7b97\u6539\u6210\u4f7f\u7528 <code>DSP48E1</code> \u4f86\u5b8c\u6210\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#block-design","title":"\u53c3\u8003 block design","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#problem2-","title":"Problem2 - \u9032\u968e\u984c","text":"<p>\u8207 Problem1 \u76f8\u4f3c \uff0c\u4f46\u6bcf\u7b46\u8cc7\u6599\u8207 Kernel \u7686\u70ba <code>32-bit</code>\u3002</p> <p><code>.tcl</code>\u53ef\u4f7f\u7528 Extra-Lab-Convolution-system \u4e2d\u7684\u7bc4\u4f8b\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#dsp48e-cascade","title":"\u600e\u9ebc\u7528 DSP48E \u7684 Cascade \u65b9\u5f0f\u5b8c\u6210\u300c\u5927\u4f4d\u6578\u4e58\u6cd5\u300d?","text":"<p>\ud83d\udccc Xilinx DSP48E \u57fa\u672c\u898f\u683c\u56de\u9867</p> Port \u5bec\u5ea6\u9650\u5236 \u652f\u63f4 signed? A 25 bits \u2705 Yes B 18 bits \u2705 Yes C 48 bits \u2705 Yes P (\u8f38\u51fa) 48 bits \u2705 Yes"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#dsp","title":"\u65b9\u6cd5\u4e00\uff1a\u624b\u52d5\u62c6\u89e3 + \u591a\u9846 DSP \u76f8\u4e58\u518d\u52a0\u7e3d","text":"<p>\u5c07\u5169\u500b 32-bit signed \u6578\u62c6\u6210 \u9ad8 16-bit \u548c \u4f4e 16-bit\u3002</p> <p></p> <p>\u4f9d\u5e8f\u4f7f\u7528 4 \u500b DSP48 \u5be6\u4f5c\u4e58\u6cd5\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#vivado-hlshigh-level-synthesis","title":"\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528 Vivado HLS\uff08High-Level Synthesis\uff09","text":"<p>\u53ef\u4ee5\u7528 <code>C/C++</code> \u64b0\u5beb\u7a0b\u5f0f\uff0c\u7136\u5f8c\u8b93 <code>HLS</code> \u81ea\u52d5\u7522\u751f RTL\uff08Verilog/VHDL\uff09\u548c\u5c0d\u61c9\u7684 <code>DSP48E1</code> \u5be6\u73fe\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#_1","title":"\u2705 \u4e00\u3001\u6e96\u5099\u5de5\u5177","text":"<p>\u5b89\u88dd\u4e26\u958b\u555f\u4f7f\u7528 <code>Vitis HLS</code>\uff08Vivado 2021.1 \u4e4b\u5f8c\uff09</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab5-DSP/#_2","title":"\u2705 \u4e8c\u3001\u57fa\u672c\u6d41\u7a0b","text":"<ol> <li>\u6253\u958b Vitis HLS </li> <li> <p>\u65b0\u5efa\u4e00\u500b project</p> </li> <li> <p>\u64b0\u5beb <code>C/C++ code</code>\uff08\u5982 32\u00d732 \u4e58\u6cd5\uff09 </p> </li> <li> <p>\u5beb <code>Testbench</code>\uff08\u7528\u4f86\u9a57\u8b49\u529f\u80fd\uff09</p> </li> <li> <p>\u57f7\u884c <code>C simulation</code> \u6e2c\u8a66 </p> </li> <li> <p>\u8a2d\u5b9a <code>Top function</code> : \u5de6\u4e0a\u65b9 <code>Project</code> &gt; <code>Project settins</code> &gt; <code>Synthesis</code> \u9078\u64c7 top function\u3002 </p> </li> <li> <p>\u6309\u4e0b <code>C Synthesis</code> \u7522\u751f <code>RTL</code> </p> </li> <li> <p>\u67e5\u770b\u5831\u544a\u78ba\u8a8d <code>DSP</code> \u6709\u88ab\u4f7f\u7528 </p> </li> <li> <p>\u532f\u51fa <code>RTL</code> \u5230 <code>Vivado block design</code> </p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Lab/Lab6-CDMA/","title":"FPGA Design Lab7","text":"<p>\u5728\u672c\u6b21 Lab \u4e2d\uff0c\u5c07\u7d50\u5408 Xilinx \u63d0\u4f9b\u7684 IP \u8207\u81ea\u884c\u8a2d\u8a08\u7684 IP\uff0c\u5efa\u7acb\u4e00\u500b\u5b8c\u6210\u52a0\u6cd5\u904b\u7b97\u7684\u7cfb\u7d71\u3002</p> <p>\u7cfb\u7d71\u6d41\u7a0b\u70ba\uff1a</p> <ul> <li>(1) \u4f7f\u7528 CDMA \u5c07\u8cc7\u6599\u50b3\u9001\u81f3 Block Memory\u3002</li> <li>(2) \u786c\u9ad4 IP \u5f9e Bram \u4e2d\u8b80\u53d6\u8cc7\u6599\u5f8c\u9032\u884c\u4e58\u6cd5\u904b\u7b97\u3002</li> <li>(3) \u786c\u9ad4 IP \u5c07\u8a08\u7b97\u5b8c\u6210\u7684\u7d50\u679c\u5132\u5b58\u56de Bram \u5167\u3002</li> <li>(4) \u904b\u7b97\u5b8c\u6210\u5f8c\uff0cCDMA \u5c07\u7d50\u679c\u642c\u56de ZYNQ\u3002</li> </ul> <p>\u672c\u6b21 Lab \u6709\u63d0\u4f9b\u5b8c\u6210\u7684 add.v \u6a94\u6848\uff0c\u8acb\u81ea\u884c\u5c07\u5176\u5305\u88dd\u6210\u53ef\u5728 Vivado \u4e2d\u4f7f\u7528\u7684 IP\uff0c\u4e26\u5b8c\u6210\u6574\u9ad4\u7cfb\u7d71\u7684\u5efa\u69cb\u8207\u5c0d\u61c9\u7684 Jupyter \u8edf\u9ad4\u8a2d\u8a08\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab6-CDMA/#_1","title":"\u7cfb\u7d71\u67b6\u69cb\u5716","text":"<p>\u6ce8\u610f AXI smartConnect \u9593 master \u548c slave \u7684\u95dc\u4fc2\u3002 \u5728 ZYNQ Processing System \u4e0a\u9700\u8981\u591a\u52a0\u5165\u4e00\u500b slave port \u7d66 CDMA \u4f7f\u7528\u3002</p> <p>\u9ede\u9078 <code>ZYNQ7 Processing System IP &gt; PS-PL Configuration &gt; HP Slave AXI Interface &gt;  S AXI HP0 interfate</code></p> <p></p> <p>Block design \u7684 address Editor\u53ef\u81ea\u884c\u8a2d\u5b9a\u3002  </p> <p>\ud83d\udccc Note: Zynq7020 \u67b6\u69cb\u4e2d\uff0c\u8a18\u61b6\u9ad4\u4f4d\u5740\u5340\u9593 0x0000_0000 ~ 0x1FFF_FFFF \u70ba<code>PS</code> \u7684\u5c08\u7528\u7a7a\u9593\uff0c\u56e0\u6b64\uff0c\u5728 Vivado \u7684 Address Editor \u4e2d\uff0c\u4e00\u822c PL \u5074\u7684 AXI IP\uff08\u5982 BRAM\u3001GPIO\u3001AXI-Lite Slave \u7b49\uff09\u4e0d\u53ef\u5c07\u5176\u8a18\u61b6\u9ad4\u6620\u5c04\u5230\u6b64\u5340\u9593\uff0c\u5426\u5247\u53ef\u80fd\u6703\u9020\u6210\u8207 PS \u7684\u8a18\u61b6\u9ad4\u7a7a\u9593\u885d\u7a81\uff0c\u82e5\u662f\u4f7f\u7528\u50cf AXI DMA \u6216 CDMA\uff0c\u5b83\u5011\u53ef\u4ee5\u5408\u6cd5\u5730\u5b58\u53d6\u6b64\u8a18\u61b6\u9ad4\u5340\u6bb5\uff0c\u4f46\u524d\u63d0\u662f\u8981\u900f\u904e Zynq \u7684 High Performance (HP) Port \u8207 DDR \u505a\u9023\u63a5\u3002</p> <p></p> <p>add IP \u7684 clk \u548c\u5176\u4ed6 ip \u7684 aclk \u7b49\u8173\u4f4d\u63a5\u540c\u4e00 clk \u8a0a\u865f\u5373\u53ef\uff0crst \u70ba\u8ca0\u7de3\u89f8\u767c\uff0c\u63a5\u5728Process System Reset\u7684peripheral_aresetn\u4e0a\u5373\u53ef\u3002</p> <p></p> <p>\u5176\u9918 Bram \u8a2d\u5b9a\u8acb\u81ea\u884c\u5224\u65b7\u3002</p>"},{"location":"Hardware-Software-Codesign/Lab/Lab6-CDMA/#block-diagram","title":"\u53c3\u8003 Block diagram","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab6-CDMA/#_2","title":"FPGA Design Lab7","text":""},{"location":"Hardware-Software-Codesign/Lab/Lab6-CDMA/#_3","title":"\u6e2c\u8a66\u7d50\u679c\u7bc4\u4f8b","text":""},{"location":"Hardware-Software-Codesign/Part1-Zynq-Processor/","title":"Part1-Zynq-Processor","text":"<p>Zynq \u4e0d\u50c5\u662f\u4e00\u9846 FPGA\uff0c\u5b83\u9084\u5167\u5efa\u4e86\u5b8c\u6574\u7684\u8655\u7406\u7cfb\u7d71\uff0c\u5305\u62ec\uff1a</p> <ul> <li> <p>\u96d9\u6838\u5fc3 ARM Cortex-A9 \u8655\u7406\u5668</p> </li> <li> <p>DDR \u8a18\u61b6\u9ad4\u63a7\u5236\u5668\u3001\u5404\u985e I/O \u4ecb\u9762\uff08UART\u3001SPI\u3001USB\u2026\uff09</p> </li> <li> <p>AXI \u532f\u6d41\u6392\uff08\u7528\u4f86\u8207 PL \u505a\u8cc7\u6599\u4ea4\u63db\uff09</p> </li> <li> <p>\u53ef\u9078\u64c7\u57f7\u884c Linux\u3001PetaLinux\u3001Ubuntu \u6216 Baremetal \u7a0b\u5f0f</p> </li> </ul> <p>\u9019\u4e9b\u8655\u7406\u529f\u80fd\uff08\u5305\u542b ARM \u8655\u7406\u5668\u3001DDR \u63a7\u5236\u5668\u3001AXI \u532f\u6d41\u6392\u7b49\uff09\u5728\u6676\u7247\u5167\u90e8\u662f\u4ee5 Hard IP \u7684\u5f62\u5f0f\u5b58\u5728\u3002</p> <ul> <li> <p>PS\uff08Processing System\uff09\u662f\u9810\u5148\u5be6\u4f5c\u5728 Zynq \u6676\u7247\u4e0a\u7684\u96fb\u8def\u5340\u584a\uff0c\u4e0d\u50cf PL \u662f\u53ef\u7a0b\u5f0f\u5316\u908f\u8f2f\u3002</p> </li> <li> <p>\u4f7f\u7528\u8005\u7121\u6cd5\u6539\u8b8a\u5176\u7d50\u69cb\uff08\u4f8b\u5982 CPU \u67b6\u69cb\u3001I/O \u5206\u914d\u7b49\uff09\uff0c\u4f46\u53ef\u4ee5\u900f\u904e Vivado \u7684\u4ecb\u9762\u555f\u7528\u3001\u8a2d\u5b9a\u3001\u9023\u63a5\u3002</p> </li> <li> <p>\u958b\u767c\u8005\u53ef\u4ee5\u900f\u904e Vivado Block Design \u4e2d\u7684 ZYNQ7 Processing System IP \u5c0d PS \u505a\u914d\u7f6e\uff0c\u4f8b\u5982\u9078\u64c7\u662f\u5426\u958b\u555f USB\u3001Ethernet\u3001UART\u3001SD \u5361\u7b49\u529f\u80fd\u3002</p> </li> </ul>"},{"location":"Hardware-Software-Codesign/Part1-Zynq-Processor/#purpose","title":"Purpose","text":"<p>\u900f\u904e Vivado \u914d\u7f6e <code>ZYNQ7 PS</code>\uff0c\u4e26\u5efa\u7acb Vitis Project \u9054\u6210\u7c21\u6613\u7684 <code>UART</code> \u986f\u793a</p>"},{"location":"Hardware-Software-Codesign/Part1-Zynq-Processor/#part-11-running-a-basic-uart-application-on-zynq-ps","title":"Part 1.1 Running a Basic UART Application on Zynq PS","text":"<p>\u5728\u672c\u6b21\u5be6\u4f5c\u4e2d\uff0c\u6211\u5011\u5c07\u793a\u7bc4\u5982\u4f55\u50c5\u4f7f\u7528 Zynq PS\uff08Processing System\uff09 \u7684\u8cc7\u6e90 \uff08\u4e0d\u9023\u63a5 PL \u908f\u8f2f\uff09\uff0c\u5229\u7528 ARM Cortex-A9 \u8655\u7406\u5668\u9032\u884c\u7c21\u55ae\u7684\u8cc7\u6599\u8655\u7406\u4e26\u900f\u904e UART \u50b3\u56de\u7d50\u679c\u3002</p> <ol> <li> <p>Create a New Vivado Project</p> </li> <li> <p>Create Block Design</p> </li> <li> <p>\u9ede\u9078 Block Design \u5167\u7684 <code>+</code>\uff0c\u641c\u5c0b <code>ZYNQ7 Processing System</code>\uff0c\u4e26\u52a0\u5165 Block Design \u7576\u4e2d  </p> <p> </p> </li> <li> <p>\u9ede\u9078\u4e0a\u65b9\u7da0\u8272\u6a6b\u5e45 <code>Run Block Automation</code>\uff0c Vivado\u6703\u81ea\u52d5\u5e6b\u4f60\u5b8c\u6210\u4e00\u4e9b\u9023\u63a5\u7dda\u7684\u8a2d\u7f6e</p> <p></p> <p>\u9023\u63a5\u5b8c\u6210\u5f8c\u6703\u8df3\u51fa <code>DDR</code> \u3001 <code>FIXED_IO</code> </p> <p></p> <ul> <li>DDR : Zynq PS \u8207\u5916\u90e8 DDR3 \u8a18\u61b6\u9ad4\u7684\u9023\u63a5 Port</li> <li>FIXED_IO    : Zynq PS \u5c0d\u5916\u90e8\u9031\u908a I/O \u7684\u63a5\u53e3</li> </ul> </li> <li> <p>\u5c0d ZYNQ7 \u9ede\u5169\u4e0b\u9032\u884c <code>customize</code>\uff0c\u672c\u6b21\u5be6\u9a57\u53ea\u9700\u7528\u5230 ZYNQ processor \u672c\u8eab\uff0c\u6240\u4ee5\u8981\u628a\u6c92\u7528\u5230\u7684 I/O \u53d6\u6d88\u3002</p> <p></p> </li> <li> <p>\u9ede\u9078\u8df3\u51fa\u7684\u8a2d\u5b9a\u9801\u9762\u4e2d\u5de6\u5074\u7684 <code>Peripheral I/O Pins</code>\uff0c\u4e26\u5c07\u6240\u6709\u7684 <code>Peripheral</code> \u90fd\u5148\u53d6\u6d88\u6389\uff0c\u6700\u5f8c\u52fe\u9078 <code>UART0</code> \u5373\u53ef</p> <p></p> <p>I/O Bank ?</p> <p>Xilinx FPGA \u7684 I/O \u8173\u4f4d\u901a\u5e38\u6703\u88ab\u5283\u5206\u70ba\u591a\u500b I/O Bank\uff08\u5982 Bank 0\u3001Bank 1...\uff09\uff0c \u6bcf\u500b Bank\uff1a - \u5177\u6709\u7368\u7acb\u7684\u4f9b\u96fb\u96fb\u58d3\uff08\u5982 3.3V\u30011.8V\uff09\u6240\u5c6c\u8173\u4f4d\u5fc5\u9808\u4f7f\u7528\u540c\u6a23\u7684\u96fb\u58d3\u7b49\u7d1a - \u6bcf\u500b Bank \u7684\u8173\u4f4d\u652f\u63f4\u7684 I/O \u6a19\u6e96\uff08LVCMOS33\u3001LVCMOS18 \u7b49\uff09\u6839\u64da\u96fb\u58d3\u800c\u7570  </p> </li> <li> <p>\u9ede\u9078\u5de6\u5074 <code>PS-PL Configuration -&gt; General -&gt; UART0 Baud Rate</code> \u53ef\u4ee5\u8a2d\u5b9a UART \u7684 Baud Rate  </p> <p> </p> </li> <li> <p>\u9ede\u9078\u5de6\u5074 <code>Clock Configuration -&gt; PL Fabric Clocks -&gt; FCLK_CLK0\u53d6\u6d88\u52fe\u9078</code></p> <p> </p> <p>\ud83d\udccc FCLK (Fabric Clock) \u662f\u4ec0\u9ebc\uff1f</p> <p>FCLK_CLK \u662f\u7531 Zynq \u7684 Processing System \u5167\u90e8\u7522\u751f\u7684Clock\u8a0a\u865f\uff0c\u901a\u5e38\u63d0\u4f9b\u7d66 Programmable Logic \u4f7f\u7528\u3002</p> <p>\u9019\u6b21\u7684\u8a2d\u8a08\u662f\u7d14 PS\u3001\u672a\u4f7f\u7528 PL \u96fb\u8def\uff0c\u53ef\u4ee5\u5c07 FCLK_CLK \u95dc\u9589\uff0c\u4ee5\u7c21\u5316\u7cfb\u7d71\u8cc7\u6e90\u8207 P&amp;R\u3002</p> <p>\u82e5\u65e5\u5f8c\u6709\u9700\u8981\u7531 PS \u63d0\u4f9b clock \u7d66 PL\uff0c\u518d\u555f\u7528 FCLK_CLK \u5373\u53ef\u3002  </p> </li> <li> <p><code>PS-PL Configurations -&gt; General -&gt; Enable Clock Resets -&gt; FCLK_RESET0_N</code> \u53d6\u6d88\u52fe\u9078 <code>PS-PL Configurations -&gt; AXI Non Secure Enablement -&gt; GP Master AXI Interface -&gt; M AXI GP0 Interface</code> \u53d6\u6d88\u52fe\u9078  </p> <p></p> </li> <li> <p>\u4fee\u6539\u5b8c\u6210\u5f8c\uff0cPS\u6700\u5f8c\u6703\u9577\u5982\u4e0b\u5716  </p> <p></p> </li> <li> <p>\u5c07\u5b8c\u6210\u7684 block design \u5305\u6210 HDL wrapper  </p> <p></p> </li> <li> <p>Run Implementation\uff0c\u6309\u4e0b <code>PROJECT MANAGER &gt; Run Implementation</code>\uff0c\u5373\u5b8c\u6210\u672c\u6b21\u8a2d\u8a08</p> <p></p> </li> <li> <p>Implementation \u5b8c\u5f8c\uff0c\u9ede\u9078\u4e0a\u65b9 <code>File &gt; Export &gt; Export Hardware</code> </p> <p></p> </li> <li> <p>\u9078\u64c7 <code>Pre Synthesis</code> \uff0c\u9019\u6b21\u8a2d\u8a08\u6c92\u6709\u4f7f\u7528\u5230 Programmable Logic \u6240\u4ee5\u6c92\u6709 Bitstream \uff0c\u5f8c\u7e8c\u8a2d\u8a08\u5982\u679c\u6709\u4f7f\u7528\u5230 PL \u7aef\u5c31\u9700\u8981 <code>include Bitstream</code></p> <p> </p> <p>\ud83d\udccc \u70ba\u4ec0\u9ebc\u9019\u88e1\u53ef\u4ee5\u4e0d\u7522\u751f Bitstream? Bitstream \u662f\u7528\u4f86\u300c\u914d\u7f6e FPGA \u7684 Programmable Logic\u300d\u3002 \u5982\u679c\u4f60\u53ea\u7528 PS\uff08\u4f8b\u5982 ARM Cortex-A9 \u8dd1\u4e00\u6bb5 UART \u7a0b\u5f0f\uff09\uff0c\u5b8c\u5168\u6c92\u6709\u7528\u5230 PL\uff0c\u5c31\u4e0d\u9700\u8981\u7522\u751f .bit \u6a94\uff0c\u4e5f\u4e0d\u9700\u8981\u4e0b\u8f09\u5230 PL \u88e1\u3002 Bitstream\u4ecb\u7d39\u5728 Vivado-Tutorial/Part3-FPGA-Design-Flow \u53ef\u56de\u53bb\u8907\u7fd2</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part1-Zynq-Processor/#part-12-vitis-project","title":"Part 1.2 Vitis Project","text":"<ol> <li> <p>\u5728\u96fb\u8166\u4e2d\u641c\u5c0b <code>Vitis 2023.2</code> \u4e26\u6253\u958b</p> <p></p> </li> <li> <p>\u9ede\u9078 <code>Open Workspace</code>\uff0c \u4e26\u5728\u4f60\u7684 Vivado Project \u88e1\u9762\u5275\u5efa <code>workspace</code> \u6216\u662f\u4f60\u81ea\u5df1\u60f3\u8981\u7684\u5730\u65b9\u4e5f\u53ef\u4ee5  </p> <p></p> </li> <li> <p>\u5efa\u7acb\u65b0\u7684 <code>Platform Component (Hardware)</code> </p> <p></p> </li> <li> <p>\u9078\u64c7\u525b\u525b export hardware \u4f4d\u7f6e\u7684 <code>*.xsa</code> </p> <p></p> </li> <li> <p>Operating System: <code>standlone</code>     Processor: <code>ps7_cortexa9_0</code></p> <p></p> </li> <li> <p>\u5275\u5efa\u597d <code>Platform Component</code> \u5f8c\u5c07\u5982\u4e0b\u5716</p> <p></p> <p>\ud83d\udccc What's Platform Component? Platform Component \u662f\u5728 Vitis \u4e2d\u7528\u4f86\u63cf\u8ff0\u786c\u9ad4\u5e73\u53f0\u7684\u4e00\u500b\u5143\u4ef6\uff0c\u5b83\u662f\u6839\u64da\u4f60\u5f9e Vivado \u532f\u51fa\u7684 .xsa \u6a94\uff08Hardware Specification + Bitstream\uff09\u6240\u5efa\u7acb\u7684\uff0c\u4e26\u63d0\u4f9b\u7d66\u5f8c\u7e8c Application Project \u4f7f\u7528\u7684\u786c\u9ad4\u57fa\u790e\u74b0\u5883\u3002</p> <p>\u4e00\u500b Platform Component \u901a\u5e38\u5305\u542b\uff1a</p> <ul> <li> <p>\u532f\u5165\u7684 .xsa \u786c\u9ad4\u63cf\u8ff0\u6a94\u6848</p> </li> <li> <p>\u53ef\u9078\u7684 boot \u5143\u4ef6\uff08\u5982 FSBL\u3001PMUFW\uff09</p> </li> <li> <p>Domain \u8a2d\u5b9a\uff08ARM Core / \u4f5c\u696d\u7cfb\u7d71 / \u7de8\u8b6f\u5de5\u5177\u93c8\uff09  </p> </li> </ul> </li> <li> <p>Create <code>Application Project (software)</code> </p> <p></p> </li> <li> <p>\u9078\u64c7\u525b\u525b\u5b8c\u6210\u7684 platform  </p> <p></p> <p>Note: \u6bcf\u4e00\u500b <code>Application Project (Software)</code> \u90fd\u5fc5\u9808\u5efa\u7acb\u5728\u4e00\u500b <code>Platform</code> \u4e4b\u4e0a  </p> </li> <li> <p>\u5efa\u7acb\u5b8c <code>Application Project</code> \u5f8c\uff0c\u5c07\u5982\u4e0b\u5716\u6240\u793a</p> <p></p> </li> <li> <p>\u5148 <code>build platform</code> </p> <p> </p> <p><code>Build Platform</code> \u5f8c\uff0c\u53ef\u4ee5\u5c07\u76ee\u524d\u958b\u8d77\u4f86\u7684 <code>helloworld.c</code> tab \u95dc\u6389\u91cd\u958b\uff0c<code>file not found</code> \u7684\u554f\u984c\u57fa\u672c\u4e0a\u5c31\u6703\u89e3\u6c7a\u4e86</p> <p></p> <p>\u518d <code>build application</code></p> <p></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part1-Zynq-Processor/#part-13-run-the-program","title":"Part 1.3 Run the Program","text":"<ol> <li> <p>\u5c07 PYNQ-z2 \u63a5\u4e0a\u96fb\u8166\u4e26\u5c07\u958b\u6a5f\u914d\u7f6e\u6210 <code>JTAG</code> (8\u865f\u5340 Jumper)  </p> <p> </p> </li> <li> <p>\u958b\u555f <code>MobaXterm</code> \u4e26\u9078\u64c7\u5efa\u7acb <code>Serial</code> \u9023\u7dda\uff0cBaud Rate \u8a2d\u7f6e\u6210 <code>115200</code>\uff0c COM port \u5247\u6839\u64da\u4f60\u7684 FPGA \u9023\u63a5\u5728\u54ea\u500b COM port \u81ea\u5df1\u6c7a\u5b9a  </p> <p> </p> <p>\u5efa\u7acb\u9023\u7dda  </p> <p></p> </li> <li> <p>\u56de\u5230 <code>Vitis</code> \u9ede\u9078 Run  </p> <p></p> </li> <li> <p>\u5373\u53ef\u5728 <code>MobaXterm</code> \u770b\u5230 \"Hello World!\" \u7684\u7d50\u679c  </p> <p></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part2-AXI-GPIO/","title":"Part2-AXI-GPIO","text":"<p>\u672c\u7ae0\u5c07\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 AXI GPIO (General Purpose Input/Output) IP\uff0c\u900f\u904e\u8edf\u9ad4\u7a0b\u5f0f\u63a7\u5236\u677f\u5b50\u4e0a\u7684 Switch \u8207 LED\uff0c\u4e26\u9032\u4e00\u6b65\u5c07\u8cc7\u6599\u5beb\u5165 GPIO \u4f5c\u70ba\u63a7\u5236\u8a0a\u865f\uff0c\u9a45\u52d5\u786c\u9ad4\u96fb\u8def\uff08\u5982 Adder/Subtracter\uff09\u3002</p>"},{"location":"Hardware-Software-Codesign/Part2-AXI-GPIO/#purpose","title":"Purpose","text":"<p>\u900f\u904e\u672c\u7ae0\u7bc0\u7684\u5be6\u4f5c\uff0c\u5b78\u7fd2\u5982\u4f55\u4f7f\u7528 AXI GPIO IP \u8207 Processing System (PS) \u9032\u884c\u4e92\u52d5\uff0c\u4e26\u900f\u904e\u8edf\u9ad4\u7a0b\u5f0f\uff1a</p> <ul> <li> <p>\u63a7\u5236 GPIO \u8f38\u51fa\uff0c\u4f8b\u5982\u9ede\u4eae LED \u6216\u50b3\u9001\u63a7\u5236\u8a0a\u865f\u81f3\u786c\u9ad4\u6a21\u7d44\uff08Adder/Subtracter\uff09</p> </li> <li> <p>\u8b80\u53d6 GPIO \u8f38\u5165\uff0c\u4f8b\u5982\u5f9e Switch \u6216\u5176\u4ed6\u611f\u6e2c\u88dd\u7f6e\u7372\u53d6\u8a0a\u865f</p> </li> <li> <p>\u5be6\u4f5c\u4e00\u500b\u7c21\u55ae\u7684\u53ef\u63a7\u5236\u52a0\u6e1b\u6cd5\u904b\u7b97\u96fb\u8def\uff0c\u4e26\u53ef\u900f\u904e UART \u4e92\u52d5\u5f0f\u63a7\u5236\u8207\u7d50\u679c\u986f\u793a</p> </li> </ul>"},{"location":"Hardware-Software-Codesign/Part2-AXI-GPIO/#part-21-vivado-block-design","title":"Part 2.1 Vivado Block Design","text":"<ol> <li> <p>Create a new Vivado Project  </p> </li> <li> <p>Create a new Block Design</p> </li> <li> <p>\u5148\u52a0\u5165 <code>ZYNQ7_Processing System</code> \u4e26\u9ede\u9078\u4e0a\u65b9 <code>Run Block Automation</code> </p> <p></p> </li> <li> <p>\u5c0d <code>ZYNQ7 Processing System</code> \u9ede\u5169\u4e0b\u9032\u5165\u8a2d\u5b9a\uff0c\u9ede\u9078\u5de6\u5074 <code>Peripheral I/O pins</code>\uff0c\u5c07\u5168\u90e8\u90fd\u95dc\u6389\u5f8c\uff0c\u6253\u958b<code>UART0</code>\u5c31\u597d  </p> <p></p> </li> <li> <p>\u518d\u52a0\u5165<code>\u516d\u500b GPIO</code>\u3001<code>Adder/Subtracter</code>\u3001<code>Constant</code> </p> <p></p> </li> <li> <p>\u9ede\u9078\u4e0a\u65b9\u7da0\u8272\u6a6b\u5e45 <code>Run Connection Automation</code>\uff0c\u4e26\u5168\u90e8\u6253\u52fe\u6309 <code>OK</code> </p> <p> </p> <p>\u81ea\u52d5\u9023\u7dda\u5b8c\u6210\u5f8c\uff0c\u9ede\u9078 <code>Regenerate Layout</code> \uff0c\u8b93 Vivado \u5e6b\u4f60\u81ea\u52d5\u6392\u7248  </p> <p> </p> </li> <li> <p>\u79fb\u9664\u6240\u6709 <code>GPIO</code> \u7684 Port</p> <p></p> </li> <li> <p>\u63a5\u4e0b\u4f86\u8981\u4f9d\u5e8f\u5c0d\u5404\u500b GPIO \u505a\u4e0d\u540c\u7684\u8a2d\u5b9a\uff0c\u9700\u8981\u5c0d\u6e05\u695a\u540d\u7a31\uff0c\u82e5\u6c92\u6709\u7167\u9806\u5e8f\u5247\u9700\u8981\u4fee\u6539 C code  </p> <ul> <li> <p>axi_gpio_0:  </p> <p> </p> </li> <li> <p>axi_gpio_1:  </p> <p> </p> </li> <li> <p>axi_gpio_2:  </p> <p> </p> <p> </p> </li> <li> <p>axi_gpio_3:  </p> <p> </p> <p></p> </li> <li> <p>axi_gpio_4:  </p> <p> </p> <p> </p> </li> <li> <p>axi_gpio_5:  </p> <p> </p> <p> </p> </li> </ul> </li> <li> <p>\u8abf\u6574 <code>Constant</code> \u8a2d\u5b9a  </p> <p></p> </li> <li> <p>\u8abf\u6574 <code>Adder/Subtracter</code> \u8a2d\u5b9a     </p> <p>\ud83d\udccc Fabric / DSP ? \u5728\u8a2d\u5b9a<code>Adder/Subtracter</code>\u7684\u8a2d\u5b9a\u6642\u53ef\u4ee5\u770b\u5230\u6700\u4e0a\u9762\u6709\u4e00\u500b <code>implement using</code> \u7684\u9078\u9805\uff0c\u5728 FPGA \u4e0a\u9762\uff0c\u904b\u7b97\u908f\u8f2f\u901a\u5e38\u6703\u900f\u904e <code>LUT</code> \u548c <code>DSP</code> \u7684\u65b9\u5f0f\u4e0b\u53bb\u5be6\u4f5c\u3002  </p> <p>Fabric\uff1a\u4f7f\u7528 FPGA \u4e2d\u7684 Lookup Table (LUT) \u8207\u908f\u8f2f\u9598\u4f86\u5be6\u73fe\u52a0\u6e1b\u6cd5\u908f\u8f2f\u3002  </p> <ul> <li>\u9069\u5408\u4f4d\u5143\u6578\u8f03\u5c11\uff08\u5982 8 \u6216 16-bit\uff09\u7684\u57fa\u672c\u52a0\u6e1b\u6cd5\u904b\u7b97  </li> <li>\u4e0d\u6703\u5360\u7528 DSP \u8cc7\u6e90\uff0c\u9069\u5408\u5c0f\u578b\u908f\u8f2f  </li> </ul> <p>DSP\uff1a\u4f7f\u7528 FPGA \u5167\u5efa\u7684 DSP Slice\uff0c\u5373\u5c08\u7528\u7684\u6578\u4f4d\u8a0a\u865f\u8655\u7406\u5668\u8cc7\u6e90\u3002  </p> <ul> <li>\u9069\u5408\u8655\u7406\u9ad8\u4f4d\u5143\u904b\u7b97\uff08\u5982 32-bit \u52a0\u6cd5\u3001\u4e58\u6cd5\u3001MAC\uff09  </li> <li>\u9ad8\u6548\u80fd\u3001\u9ad8\u541e\u5410\uff0c\u5e38\u7528\u65bc\u5f71\u50cf\u8655\u7406\u3001\u6a5f\u5668\u5b78\u7fd2\u4e2d\u7684 <code>MAC</code> \u904b\u7b97  </li> </ul> <p>\ud83d\udccc What's MAC operation? MAC\uff08Multiply-Accumulate\uff09\u6307\u7684\u662f\u300c\u4e58\u52a0\u904b\u7b97\u300d\uff0c\u4f8b\u5982 <code>a \u00d7 b + c</code>\uff0c\u662f\u6578\u4f4d\u6ffe\u6ce2\u5668\u3001CNN \u795e\u7d93\u7db2\u8def\u7b49\u904b\u7b97\u6838\u5fc3\uff0cDSP Slice \u5c08\u9580\u91dd\u5c0d\u6b64\u985e\u904b\u7b97\u8a2d\u8a08\u3002</p> </li> <li> <p>\u5c07 <code>axi_gpio_2</code>\u3001<code>axi_gpio_3</code>\u3001<code>axi_gpio_4</code>\u3001<code>axi_gpio_5</code>\u3001<code>Adder/Subtracter</code>\u3001<code>Constant</code>\uff0c\u4f9d\u7167\u4e0b\u65b9\u5716\u7684\u65b9\u5f0f\u505a\u9023\u63a5  </p> <p> </p> </li> <li> <p>\u9023\u63a5\u5b8c\u5f8c\u9ede\u9078\u4e0a\u65b9 <code>Run Connection Automation</code>\uff0c\u4e26\u5168\u90e8\u6253\u52fe</p> <p> </p> </li> <li> <p>\u6700\u5f8c\u9ede\u9078 <code>Validation</code> \u548c <code>Regenerate Layout</code>\uff0c\u770b\u770b\u6709\u6c92\u6709\u932f\u8aa4  </p> <p></p> </li> <li> <p>\u5b8c\u6574\u96fb\u8def  </p> <p> </p> </li> <li> <p>Create HDL Wrapper  </p> </li> <li> <p>Generate Bitstream  </p> </li> <li> <p><code>File -&gt; Export -&gt; Export Hardware</code></p> <p></p> </li> <li> <p>\u9019\u6a23\u5c31\u5b8c\u6210 Vivado \u7aef\u7684\u96fb\u8def\u8a2d\u8a08\u90e8\u5206\uff0c\u518d\u4f86\u8981\u53bb Vitis \u505a\u8edf\u9ad4\u8a2d\u8a08</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part2-AXI-GPIO/#part-22-vitis-project","title":"Part 2.2 Vitis Project","text":"<ol> <li> <p>\u7167 <code>Part1</code> \u7684\u65b9\u5f0f\u5275\u7acb\u4e00\u500b Vitis Project  </p> </li> <li> <p>\u4f7f\u7528 Part2.1 \u7522\u751f\u7684 <code>.xsa</code> \u6a94\u6848\uff0c\u5275\u5efa <code>Platform Component</code> </p> </li> <li> <p>\u4e00\u6a23\u4f7f\u7528 <code>Example Design</code> \u88e1\u9762\u7684 <code>Hello_World</code> \u4f5c\u70ba\u521d\u59cb\u7684 <code>Application Project</code></p> <p> </p> </li> <li> <p>\u5c07 <code>Application Project</code> \u5167\u7684 <code>hello_world.c</code> \u66ff\u63db\u6210\u8a72\u6b21Lab\u88e1\u9762\u7684<code>src/main.c</code> </p> <p> </p> </li> <li> <p>\u5148 <code>build platform</code></p> </li> <li> <p>\u518d <code>build application</code></p> </li> <li> <p>\u9023\u63a5\u4e0a PYNQ \u677f</p> </li> <li> <p>\u6253\u958b <code>MobaXterm</code> Serial \u65b9\u5f0f\u9023\u63a5\u4e0a PYNQ</p> </li> <li> <p>\u9ede\u9078<code>Run</code></p> <p></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part2-AXI-GPIO/#part-23-run-result","title":"Part 2.3 Run &amp; Result","text":"<p>\u7576\u57f7\u884c\u7a0b\u5f0f\u5f8c\uff0c\u4f7f\u7528\u8005\u53ef\u4ee5\u900f\u904e UART \u8f38\u5165\u64cd\u4f5c\u6307\u4ee4\u8207\u6578\u5b57\uff0c\u9032\u884c\u52a0\u6cd5\u6216\u6e1b\u6cd5\u7684\u904b\u7b97\uff0c\u540c\u6642\u89c0\u5bdf\u8f38\u51fa\u7d50\u679c\u8207 LED \u986f\u793a\uff1a</p> <ul> <li> <p>\u900f\u904e UART \u8f38\u5165 '+' \u6216 '-'\uff1a\u6c7a\u5b9a\u6b64\u6b21\u8981\u9032\u884c\u52a0\u6cd5\u6216\u6e1b\u6cd5\u3002</p> </li> <li> <p>\u8f38\u5165\u7b2c\u4e00\u8207\u7b2c\u4e8c\u500b\u64cd\u4f5c\u6578\uff080~255\uff09\uff1a\u5206\u5225\u5beb\u5165\u81f3 AXI GPIO\uff0c\u4f5c\u70ba\u96fb\u8def\u7684\u8f38\u5165\u8cc7\u6599\u3002</p> </li> <li> <p>\u7531 Adder/Subtracter \u6a21\u7d44\u8a08\u7b97\u7d50\u679c\uff1a\u5c07\u7d50\u679c\u900f\u904e GPIO \u56de\u50b3\u5230\u96fb\u8166\u986f\u793a\u3002</p> </li> <li> <p>\u540c\u6642\u53ef\u4f7f\u7528 Switch \u5207\u63db\u4e0d\u540c\u72c0\u614b\uff0c\u4e26\u900f\u904e LED \u5be6\u6642\u986f\u793a\u5c0d\u61c9\u7684\u4e8c\u9032\u4f4d\u503c\u3002  </p> <p> </p> </li> </ul> <p>\ud83d\udccc \u900f\u904e AXI GPIO IP Block \u4f86\u5b58\u53d6\u786c\u9ad4\u4e0a\u7684 Switch \u548c LED \u7b49\u677f\u5b50\u4e0a\u7684\u786c\u9ad4\u6642\uff0c\u901a\u5e38\u4e0d\u9700\u8981\u81ea\u5df1\u624b\u52d5\u8a2d\u5b9a Constraint\uff0cVivado\u6703\u81ea\u52d5\u5e6b\u4f60\u751f\u6210\u5176\u5c0d\u61c9\u7684 <code>Physical Constraint</code> </p> <pre><code>e.g.:project\\project.gen\\sources_1\\bd\\design_1\\ip\\design_1_axi_gpio_0_0  \n\n#--------------------Physical Constraints-----------------\n\nset_property BOARD_PART_PIN {sws_2bits_tri_i_0} [get_ports gpio_io_i[0]]\n\nset_property BOARD_PART_PIN {sws_2bits_tri_i_1} [get_ports gpio_io_i[1]]\n\n</code></pre>"},{"location":"Hardware-Software-Codesign/Part2-AXI-GPIO/#additional","title":"Additional","text":"<p>Extra1-Vitis-Change-xsa-and-Update-Bitstream</p> <p>Extra2-AXI-Mapping</p> <p>Extra3-AXI-Protocol</p>"},{"location":"Hardware-Software-Codesign/Part3-AXI-Lite/","title":"Part3-AXI-Lite","text":"<p>AXI-Lite \u662f AXI4 \u7684\u7c21\u5316\u7248\u672c\uff0c\u53ea\u6709 <code>\u55ae\u4e00\u50b3\u8f38\u901a\u9053</code>\u3001<code>\u4e0d\u652f\u63f4 burst</code>\uff0c\u9069\u5408\u5c0f\u8cc7\u6599\u91cf\u50b3\u8f38  </p> <p>\u5e38\u7528\u65bc\uff1a\u63a7\u5236 IP \u6838\u5fc3\u7684\u555f\u52d5\u3001\u521d\u59cb\u503c\u8a2d\u5b9a\u3001\u8b80\u53d6\u72c0\u614b\u8207\u7d50\u679c</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part3-AXI-Lite/#part31-create-axi-lite-ip","title":"Part3.1 Create AXI-Lite IP","text":"<ol> <li> <p>Create a new Vivado project</p> </li> <li> <p>Add <code>./XDC/pynq-z2_v1.0</code> into project</p> </li> <li> <p>\u9ede\u9078\u4e0a\u65b9 <code>Tool -&gt; Create and Package New IP</code>\uff0c\u63a5\u8457\u9078\u64c7 <code>Create a new AXI4 peripheral</code>\u3002</p> <p></p> </li> <li> <p>\u53d6\u540d\u70ba adder\uff0c\u4e26\u4e14\u5275\u5efa\u4e00\u500b IP_repo \u7684\u8cc7\u6599\u593e\u4f86\u88dd IP</p> <p></p> </li> <li> <p>\u9ede\u9078 <code>Interface Type -&gt; Lite</code>\uff0c\u4e26\u4e14\u5c07 <code>Number of Registers</code> \u8a2d\u6210 <code>4</code></p> <p></p> <p>\ud83d\udccc AXI Interface Type \u7c21\u4ecb\uff1a</p> <ul> <li>AXI4\uff1a\u652f\u63f4 burst \u50b3\u8f38\uff0c\u9069\u5408\u5927\u7b46\u8cc7\u6599\u50b3\u8f38\uff08\u5982 DMA\uff09\u3002</li> <li>AXI4-Lite\uff1a\u7c21\u5316\u7248 AXI4\uff0c\u4e0d\u652f\u63f4 burst\uff0c\u9069\u5408\u63a7\u5236\u985e IP \u4f7f\u7528\uff08\u8a2d\u5b9a\u53c3\u6578\u3001\u8b80\u5beb Register\uff09\u3002</li> <li>AXI4-Stream\uff1aStream \u4ecb\u9762\uff0c\u6c92\u6709 Address wire\uff0c\u9069\u5408\u9023\u7e8c\u8cc7\u6599\u8655\u7406\uff08\u5982\u5f71\u50cf\u3001\u97f3\u8a0a\uff09</li> </ul> <p>\ud83d\udccc Number of Register - \u6307\u7684\u662f IP \u53ef\u5c0d\u5916\u6620\u5c04\u5230\u8a18\u61b6\u9ad4\u4f4d\u7f6e\u7684 Register\uff08\u5373 slave registers\uff09 - \u6bcf\u500b register \u9810\u8a2d\u70ba 32-bit\uff0c\u53ef\u7531 ZYNQ PS \u900f\u904e AXI4-Lite \u4ee5 offset \u5b58\u53d6\uff08\u5982\uff1a0x00, 0x04, 0x08, ...\uff09</p> </li> <li> <p>\u9ede\u9078 <code>Edit IP</code></p> <p></p> </li> <li> <p>\u6b64\u6642 Vivado \u6703\u8df3\u51fa\u4e00\u500b\u65b0\u7684 project\uff0c\u4e26\u5c07 <code>HDL/adder.v</code> \u52a0\u5165\u5230\u7576\u4e2d\u53bb\uff0c\u8a72 project \u662f\u7528\u4f86\u4fee\u6539 IP \u8a2d\u5b9a\u7684</p> <p></p> </li> <li> <p>\u4f9d\u5e8f\u7167\u4e0b\u65b9\u5716\u7247\u4fee\u6539 Verilog Code</p> <p> </p> </li> <li> <p>\u4e0b\u5716\u70ba\u6700\u7d42\u7684 File Hierarchy</p> <p> - adder_v1_0.v: \u6700\u5916\u5c64\u7684 Top-Level Wrapper \u6a21\u7d44 - adder_v1_0_S00_AXI.v:  AXI4-Lite Interface \u63a7\u5236\u6a21\u7d44 - adder.v:  \u81ea\u5df1\u8a2d\u8a08\u7684\u908f\u8f2f\u96fb\u8def\u6a21\u7d44</p> <p>\u5c0d\u65bc <code>AXI Handshake Protocol</code> \u6709\u8208\u8da3\u7684\u53ef\u4ee5\u89c0\u770b <code>adder_v1_0_S00_AXI.v</code> \u5167\u90e8\u7684\u5be6\u505a\u908f\u8f2f  </p> <p>AXI-Lite \u4f7f\u7528\u8207 AXI4 \u76f8\u540c\u7684\u300c\u63e1\u624b\u6a5f\u5236\u300d\u4f86\u63a7\u5236\u6bcf\u4e00\u7b46\u8cc7\u6599\u7684\u50b3\u8f38\u3002\u6bcf\u500b channel\uff08\u4f8b\u5982\u5beb\u5165\u4f4d\u5740\u3001\u5beb\u5165\u8cc7\u6599\u3001\u8b80\u53d6\u4f4d\u5740\u7b49\uff09\u90fd\u63a1\u7528\u4ee5\u4e0b\u9019\u7d44\u8a0a\u865f\u914d\u5c0d\uff1a</p> <p><code>txt valid \u2194 ready</code></p> <p>VALID\uff1a\u7531 Master \u63d0\u51fa\uff0c\u8868\u793a\u300c\u6211\u6e96\u5099\u597d\u8981\u9001\u8cc7\u6599\u4e86\u300d</p> <p>READY\uff1a\u7531 Slave \u63d0\u51fa\uff0c\u8868\u793a\u300c\u6211\u6e96\u5099\u597d\u8981\u63a5\u8cc7\u6599\u4e86\u300d</p> <p>\u53ea\u6709\u7576\u5169\u908a\u540c\u6642\u70ba 1 \u6642\uff0c\u50b3\u8f38\u624d\u6703\u88ab\u57f7\u884c</p> </li> <li> <p>\u9ede\u958b\u4f60\u7684 IP repo \u8cc7\u6599\u593e\uff0c\u627e\u5230 Adder IP \u7684 <code>driver -&gt; your_IP_name -&gt; src</code> \u8cc7\u6599\u593e\uff0c\u5c07\u5167\u90e8\u7684 <code>Makefile</code> \u5167\u5bb9\u66ff\u63db\u6210 <code>Driver/Makefile</code> \uff0c \u76f4\u63a5\u8907\u88fd\u8cbc\u4e0a\u5167\u90e8\u7684\u5167\u5bb9\uff0c\u4e0d\u8981\u53d6\u4ee3\u6389\u8a72\u6a94\u6848</p> <p></p> </li> <li> <p>\u56de\u5230 package IP \u756b\u9762\u5c07\u6c92\u6709\u6253\u52fe\u7684\u90e8\u5206\u9ede\u9032\u53bb\u4fee\u6539\uff0c\u6700\u5f8c Package IP\u3002</p> <p></p> </li> <li> <p>\u56de\u5230\u539f\u4f86\u7684 Project \u5c07\u525b\u525b\u5305\u88dd\u597d\u7684 IP \u52a0\u5165\u9032\u4f86     </p> </li> <li> <p>Create Block Design</p> </li> <li> <p>\u52a0\u5165 <code>ZYNQ7 PS</code> \u548c <code>adder_v1.0</code>\uff0c\u4e26\u5b8c\u6210\u4e0b\u65b9\u63a5\u7dda (\u57fa\u672c\u4e0a\u81ea\u52d5\u9023\u63a5\u5373\u53ef)</p> <p></p> </li> <li> <p>\u5c0d <code>adder_v1.0</code> \u7684 Output port led[3:0] \u9ede\u53f3\u9375 <code>Make External</code></p> <p></p> </li> <li> <p>\u5c07\u8a72 Output Port \u6539\u540d\u70ba <code>led</code></p> <p></p> </li> <li> <p>\u6aa2\u67e5 Address Editor \u6709\u6c92\u6709\u81ea\u52d5\u5206\u914d Address \u7d66\u6211\u5011\u525b\u5beb\u597d\u7684 IP</p> <p></p> </li> <li> <p>Create HDL Wrapper and Generate Bitstream</p> </li> <li> <p>Export <code>.xsa</code> (include bitstream)</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part3-AXI-Lite/#part32-vitis-project","title":"Part3.2 Vitis Project","text":"<ol> <li> <p>\u958b\u555f Vitis \u5efa\u7acb workspace \u8cc7\u6599\u593e\uff0c\u4e26\u4f7f\u7528\u525b\u525b Export \u51fa\u4f86\u7684 <code>*.xsa</code> \u5efa\u7acb Platform Component</p> </li> <li> <p>\u900f\u904e Example Project\u4e2d\u7684 <code>Hello World</code> \u5efa\u7acb\u65b0\u7684 Application Project \u52a0\u5165\u6a94\u6848 <code>src/main.c</code> \u4ee5\u53ca <code>Driver/*</code> \u5167\u7684\u7a0b\u5f0f\u8907\u88fd\u5230\u4e0b\u5716\u7d05\u8272\u90e8\u5206</p> <p></p> <p>\u6b64\u6b21\u6559\u5b78 Driver \u70ba\u5beb\u597d\u7684\u7248\u672c\uff0c\u82e5\u4e4b\u5f8c\u5305\u88dd\u5176\u4ed6 AXI IP \u9700\u8981\u64b0\u5beb Driver \u53ef\u81f3\u8a72 IP \u7684\u8cc7\u6599\u593e\uff0c\u5167\u90e8\u6709\u8a72 IP \u7684 Driver Code \u53ef\u4fee\u6539</p> <p></p> </li> <li> <p>Vitis \u9700\u8981\u7684\u662f <code>ps7_init.tcl</code>\uff0c\u7136\u800c\u81ea\u88fd IP \u4e5f\u6709\u5c6c\u65bc\u81ea\u5df1\u7684 <code>tcl</code>\uff0c\u56e0\u6b64\u9700\u8981\u5230 <code>Settings\\launch.json</code> \u7684 <code>Initialization file</code> \u4fee\u6b63</p> <p></p> </li> <li> <p>Run the Program</p> <p></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part3-AXI-Lite/#note","title":"Note","text":"<p>\u82e5\u6c92\u6709\u57f7\u884c Part 3.1 \u7684\u7b2c 10 \u9ede\uff0c\u5247\u9700\u8981\u4fee\u6539 platform \u4e2d\u7684\u4e09\u500b makefile</p> <ul> <li>platform/Sources/hw/sdt/drivers//src/Makefile <li>platform/Sources/ps7_cortex_a9_0/standalone_domain/bsp/hw_artifacts/drivers//src/Makefile <li>platform/Sources/zynq_fsbl/zynq_fsbl_bsp/hw_artifacts//src/Makefile   <p>\u5c07makefile\u4e2d\u7684 <code>OUTS = *.o</code> \u4fee\u6539\u70ba <code>OUTS=$(addsuffix .o, $(basename $(wildcard *.c)))</code></p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/","title":"Part4-BRAM","text":""},{"location":"Hardware-Software-Codesign/Part4-BRAM/#what-is-bram","title":"What is BRAM?","text":"<p>BRAM\uff08Block RAM\uff09\u662f FPGA \u5167\u5efa\u7684\u4e00\u7a2e\u9ad8\u901f\u8a18\u61b6\u9ad4\u8cc7\u6e90\uff0c\u5c08\u9580\u7528\u65bc\u5132\u5b58\u5927\u91cf\u8cc7\u6599\uff0c\u53ef\u7531<code>\u908f\u8f2f\u96fb\u8def</code>\u6216 <code>ZYNQ \u7684 ARM \u6838\u5fc3</code> \u9032\u884c\u8b80\u5beb\u3002\u8207\u5916\u90e8\u8a18\u61b6\u9ad4\uff08 DDR \uff09\u76f8\u6bd4\uff0cBRAM \u64c1\u6709\u66f4\u5feb\u7684\u5b58\u53d6\u901f\u5ea6\u8207\u66f4\u4f4e\u7684\u5ef6\u9072\uff0c\u9069\u5408\u7528\u65bc\u5c0d\u901f\u5ea6\u8207\u6642\u5e8f\u8981\u6c42\u8f03\u9ad8\u7684\u61c9\u7528\u3002</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#bram-in-zynq-7020","title":"BRAM in Zynq-7020","text":"<p>Zynq-7000 \u7cfb\u5217\u4e2d\u7684 Zynq-7020 SoC\uff0c\u5167\u90e8 PL \u4e2d\u63d0\u4f9b\uff1a  </p> \u8cc7\u6e90\u985e\u578b \u6578\u91cf \u8aaa\u660e 36K BRAM blocks 140 \u500b \u6bcf\u500b Block \u70ba 36Kbits\uff084.5KB\uff09\uff0c\u53ef\u914d\u7f6e\u70ba Single Port \u6216 Dual Port \u8a18\u61b6\u9ad4 \u7e3d\u5bb9\u91cf \u7d04 630KB \u5408\u8a08\u5bb9\u91cf\u70ba 140 \u00d7 4.5KB \u2248 630KB"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#part-41-bram-configuration","title":"Part 4.1 BRAM Configuration","text":"<ol> <li> <p>Create a New Vivado Project and Create a New Block Design</p> </li> <li> <p>\u52a0\u5165 <code>Block Memory Generator</code></p> <p></p> </li> <li> <p>\u9032\u5165\u8a72 IP \u8a2d\u5b9a\u9801\u9762  </p> <p> </p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#mode","title":"Mode","text":"Mode \u8aaa\u660e BRAM Controller \u642d\u914d Vivado \u4e2d\u7684 AXI BRAM Controller IP \u4f7f\u7528\uff0c\u7531 AXI \u63a7\u5236 BRAM Controller \u4f86\u751f\u6210 BRAM \u8b80\u53d6\u5beb\u5165\u6240\u9700\u7684\u8a0a\u865f\u3002\u53ef\u900f\u904e\u8edf\u9ad4\u7aef\u5c0d\u8a72BRAM\u9032\u884c\u5beb\u5165\u8b80\u53d6\u3002 Standalone \u4e0d\u642d\u914d <code>BRAM Controller</code>\u4f86\u4f7f\u7528\uff0c\u7121\u6cd5\u7531\u8edf\u9ad4\u76f4\u63a5\u5b58\u53d6\uff0c\u9700\u7531\u786c\u9ad4\u81ea\u884c\u7ba1\u7406\u8cc7\u6599\u7684\u8b80\u5beb\u6642\u5e8f\uff0c\u4f46\u5728\u7d30\u7bc0\u914d\u7f6e\u4e0a\u66f4\u9748\u6d3b\u3002"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#memory-type","title":"Memory Type","text":"\u8a18\u61b6\u9ad4\u985e\u578b \u8aaa\u660e Single Port RAM \u55ae\u4e00\u8b80\u5beb port\uff0c\u6bcf\u500bClock\u5167\u53ea\u80fd\u9032\u884c\u4e00\u6b21 Read \u6216 Write\u3002 True Dual Port RAM \u5169\u500b\u7368\u7acb\u7684\u8b80\u5beb port\uff08Port A \u8207 Port B\uff09\uff0c\u53ef\u540c\u6642\u6216\u4ea4\u932f\u9032\u884c\u5169\u7b46\u8cc7\u6599\u7684\u8b80\u5beb\u64cd\u4f5c\u3002 Simple Dual Port RAM\uff08\u90e8\u5206\u7248\u672c\u4e2d\u624d\u6709\uff09 \u4e00\u500b port \u5c08\u9580\u5beb\u5165\u3001\u4e00\u500b port \u5c08\u9580\u8b80\u51fa\uff0c\u7121\u6cd5\u96d9\u5411\u64cd\u4f5c\uff0c\u9069\u7528\u65bc FIFO \u6216\u8cc7\u6599\u642c\u79fb\u61c9\u7528\u3002 Single Port ROM \u55ae Port \u552f\u8b80\u8a18\u61b6\u9ad4\uff0c\u50c5\u652f\u63f4\u8b80\u53d6\uff0c\u5e38\u7528\u4f86\u521d\u59cb\u5316\u5e38\u6578\u8cc7\u6599\uff08\u5982\u67e5\u627e\u8868 LUT\uff09\u3002 Dual Port ROM \u96d9 Port \u552f\u8b80\u8a18\u61b6\u9ad4\uff0c\u652f\u63f4\u5169\u7d44\u7368\u7acb\u7684\u8b80\u53d6\u5b58\u53d6\u3002"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#write-enable","title":"Write Enable","text":"\u9078\u9805 \u8aaa\u660e Byte Write Enable \u555f\u7528\u5f8c\uff0c\u5141\u8a31\u4ee5\u300cByte \u70ba\u55ae\u4f4d\u300d\u9032\u884c\u9078\u64c7\u6027\u5beb\u5165\uff08\u4f8b\u5982\uff1a\u53ea\u6539\u67d0\u4e00\u500b Byte\uff0c\u4e0d\u5f71\u97ff\u6574\u500b word\uff09\uff0c\u5728 <code>BRAM Controller</code> \u4e0b\u9810\u8a2d\u958b\u555f\u3002 Byte Size (bits) \u6307\u5b9a\u4e00\u500b\u300cByte\u300d\u7684\u5927\u5c0f\uff0c\u9078\u9805\u6709\uff1a8-bit\uff081 Byte\uff09\u30019-bit\uff08\u5e36 parity bit\uff09\u3002\u8a72\u9078\u9805\u6703\u5f71\u97ff Write Enable mask \u7684 bit \u6578\u3002\u4f8b\u5982\uff1a\u82e5\u8cc7\u6599\u5bec\u5ea6\u70ba 32-bit\u3001Byte Size \u70ba 8-bit \u2192 \u5247\u6703\u6709 4-bit \u7684 write enable mask\uff08\u6bcf bit \u63a7\u5236\u4e00\u500b Byte\uff09\u3002"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#standalone-mode-port","title":"Standalone mode Port","text":"\u6b04\u4f4d\u540d\u7a31 \u8aaa\u660e Write Width / Read Width \u8cc7\u6599\u7684\u5beb\u5165\u8207\u8b80\u51fa width\uff08bit\uff09\uff0c\u8a72\u5bec\u5ea6\u5373\u70ba BRAM \u5167\u4e00\u500b word \u7684\u5927\u5c0f\uff0c\u5728 <code>standalone</code> \u6a21\u5f0f\u4e0b\u6bcf\u500b address \u5c31\u5c0d\u61c9\u5230\u4e00\u7b46\u8cc7\u6599 (word)\u3002 Write Depth / Read Depth \u8a18\u61b6\u9ad4\u7684\u6df1\u5ea6\uff08\u5373\u6709\u5e7e\u7b46\u8cc7\u6599\uff09 Operating Mode BRAM \u5beb\u5165\u884c\u70ba Enable Port Type \u63a7\u5236\u4f7f\u80fd\u8a0a\u865f\uff0c\u53ef\u8a2d\u5b9a\u6210 <code>Use ENA Pin</code>\uff0c\u4f7f\u7528\u55ae\u7368\u7684 ENA \u8173\u4f4d\u63a7\u5236\u555f\u7528\uff0c<code>Always Enabled</code>\uff0c\u6c38\u9060\u555f\u7528 Primitives Output Register \u555f\u7528\u5f8c\uff0c\u4f7f\u7528 BRAM \u7684\u8f38\u51faRegister\uff0c\u6703\u9020\u6210\u8b80\u51fa\u8cc7\u6599\u7684 delay \u589e\u52a0\uff0c\u4f46\u53ef\u4ee5\u6539\u5584 <code>Critical Path</code> Core Output Register \u5f9e IP \u6838\u5fc3\u63d2\u5165\u4e00\u7d1a Register\uff0c\u7528\u65bc\u540c\u6b65\u8cc7\u6599\u8f38\u51fa\uff0c\u53ef\u6539\u5584\u6539\u5584 <code>Critical Path</code>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#operating-mode","title":"Operating Mode","text":"<p><code>Operating Mode</code> \u662f\u7528\u4f86\u63a7\u5236\u7576\u4f60\u5c0d BRAM \u5beb\u5165\u8cc7\u6599\u6642\uff0c\u8f38\u51fa\u7aef\uff08\u5373 DO \u6216 DOUT\uff09\u7684\u884c\u70ba\u3002  </p> <p>\ud83d\udccc\u5beb\u8cc7\u6599\u7684\u540c\u6642\uff0c\u8f38\u51fa\u7aef\u5230\u5e95\u8981\u986f\u793a\u4ec0\u9ebc\uff1f</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#write-first","title":"Write First","text":"<p>\u5beb\u5165\u8cc7\u6599\u8207\u8f38\u51fa\u540c\u6b65\u66f4\u65b0\u3002\u5beb\u5165 clock \u89f8\u767c\u5f8c\uff0cDOUT \u7acb\u5373\u53cd\u6620\u5beb\u5165\u503c\u3002</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#read-first","title":"Read First","text":"<p>\u5beb\u5165 clock \u89f8\u767c\u6642\uff0cDOUT \u8f38\u51fa\u5beb\u5165\u4f4d\u7f6e\u7684\u820a\u8cc7\u6599\u3002</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#no-change","title":"No Change","text":"<p>\u5beb\u5165 clock \u89f8\u767c\u6642\uff0cDOUT \u4fdd\u6301\u524d\u4e00\u6b21\u8f38\u51fa\u7684\u503c\u4e0d\u8b8a\u3002</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#bram-controller-mode-port","title":"BRAM Controller mode Port","text":"<p>\u7576\u4f60\u5728 <code>Block Memory Generator IP</code> \u4e2d\u9078\u64c7 <code>BRAM Controller Mode</code> \u6642\uff0c\u8a72 IP \u5c31\u4e0d\u518d\u662f\u4e00\u500b\u7368\u7acb\u7684 BRAM\uff0c\u800c\u662f\u7531 AXI BRAM Controller \u6240\u4e3b\u63a7\u7684\u8a18\u61b6\u9ad4\u8cc7\u6e90\u3002  </p> <p>\u6b64\u6642\u7684 BRAM \u662f\u900f\u904e AXI \u7e3d\u7dda\u8207 PS \u7aef\u9032\u884c\u8cc7\u6599\u4ea4\u63db\uff0c\u7121\u6cd5\u81ea\u884c\u4fee\u6539 <code>Write/Read Width</code>\uff0c\u6240\u6709\u8a2d\u5b9a\u7686\u7531 AXI \u63a5\u53e3\u5354\u5b9a\u6240\u6c7a\u5b9a\u3002</p> <p></p> <p>BRAM \u7684 <code>Depth</code> \u4e0d\u518d\u7531 <code>Block Memory Generator IP</code> \u7684\u4ecb\u9762\u8a2d\u5b9a\uff0c\u800c\u662f\u7531 Vivado \u7684 Address Editor \u4e2d\u7684 Address Map \u4f86\u6c7a\u5b9a\u3002  </p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#memory-initialization","title":"Memory Initialization","text":"<p>\u5728 Standalone \u6a21\u5f0f \u4e0b\u4f7f\u7528 BRAM \u6642\uff0c\u8a18\u61b6\u9ad4\u7684\u5167\u5bb9\u53ef\u4ee5\u900f\u904e <code>.coe</code> \u6a94\u6848\uff08Coefficient file\uff09 \u9032\u884c\u521d\u59cb\u5316\u3002</p> <p><code>.coe</code> \u6a94\u6848\u662f\u4e00\u7a2e\u6587\u5b57\u683c\u5f0f\u7684\u8a18\u61b6\u9ad4\u521d\u59cb\u5316\u6a94\u6848\uff0cVivado \u6703\u5728\u7522\u751f bitstream \u6642\u5c07\u5176\u5167\u5bb9\u5beb\u5165 BRAM \u4e2d\u3002</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#bram-summary","title":"BRAM Summary","text":"<p>\u53ef\u4ee5\u5f9e\u8a72\u9801\u9762\u770b\u5230\u6240\u4f7f\u7528\u7684 BRAM \u6578\u91cf\u8ddf Port Read Latency</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#part-42-standalone-bram","title":"Part 4.2 Standalone BRAM","text":"<p>\u5728\u9032\u884c\u7d14\u786c\u9ad4\u8a2d\u8a08\uff08Pure RTL or Block Design without Processor\uff09\u7684\u60c5\u5883\u4e0b\uff0cBRAM \u662f\u6211\u5011\u5728 FPGA \u88e1\u6700\u5e38\u7528\u4f86\u5132\u5b58\u5927\u91cf\u8cc7\u6599\u7684\u5143\u4ef6\u3002</p> <p>Standalone BRAM \u8acb\u81ea\u884c\u7df4\u7fd2\u8a2d\u8a08\uff0cStandalone BRAM \u4f7f\u7528\u4e0a\u8ddf ASIC Design \u7684 SRAM \u985e\u4f3c</p>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#part-43-bram-controller","title":"Part 4.3 BRAM Controller","text":"<ol> <li> <p>Create a New Vivado Project and Create a New Block Design</p> </li> <li> <p>\u52a0\u5165 <code>ZYNQ7 Processing System</code>\uff0c\u4e26\u9ede\u9078\u4e0a\u65b9\u7684 <code>Run Block Automation</code></p> </li> <li> <p>\u5c07 <code>ZYNQ7 Processing System</code> \u8a2d\u5b9a\u4e2d\u7684 <code>Peripheral I/O Pins</code>\uff0c\u5168\u90e8\u53d6\u6d88\u4e26\u53ea\u52fe\u9078 <code>UART0</code></p> <p></p> </li> <li> <p>\u52a0\u5165 <code>AXI BRAM Controller</code></p> <p></p> </li> <li> <p>\u9ede\u9078\u5de6\u5074\u9078\u55ae <code>Project Manager -&gt;  Add Sources</code>\uff0c\u52a0\u5165 <code>HDL/mul16.v</code></p> <p></p> </li> <li> <p>\u5c07 <code>mul16.v</code> \u52a0\u5165 Block Design\uff0c\u53ef\u5c0d <code>mul16.v</code> \u9ede\u53f3\u9375\u6309 <code>Add Module to Block Design</code> \u6216 \u76f4\u63a5\u62d6\u66f3\u5230\u53f3\u908a\u7684 Block Design  </p> <p> </p> </li> <li> <p>\u672a\u9023\u7dda\u524d\u61c9\u8a72\u5982\u4e0b\u5716\u6240\u793a  </p> <p></p> </li> <li> <p>\u9ede\u9078\u4e0a\u65b9 <code>Run Connection Automation</code>\uff0c\u9664\u4e86 BRAM_PORTB \u4e4b\u5916\u90fd\u52fe\u9078</p> <p></p> </li> <li> <p>\u5c07 <code>Block Memory Generator</code> \u8a2d\u5b9a\u6210 TDP (True Dual Port)</p> <p></p> </li> <li> <p>\u5c07 <code>mul16</code> \u63a5\u5230 <code>Block Memory Generator</code>\uff0c\u5fc5\u9808\u624b\u52d5\u4e00\u500b\u4e00\u500b\u63a5\uff0c\u5176\u4e2d<code>rstb</code> \u70ba\u6b63\u7de3\u89f8\u767c\uff0c\u5fc5\u9808\u63a5\u5728 Process System Reset \u7684 <code>peripheral_reset</code> \u4e0a</p> <p></p> </li> <li> <p>\u5c07 <code>AXI BRAM Controller</code> \u8a2d\u5b9a\u4e2d\uff0c<code>Number of BRAM interfaces</code> \u8a2d\u5b9a\u6210 1  </p> <p></p> </li> <li> <p>\u96fb\u8def\u8a2d\u8a08\u5b8c\u6210\u5716  </p> <p></p> </li> <li> <p><code>Create HDL Wrapper</code> -&gt; <code>Generate Bitstream</code> -&gt; <code>Export .xsa</code></p> </li> </ol> <p>\ud83d\udccc \u96d6\u7136 AXI BRAM Controller IP \u53ef\u4ee5\u9023\u63a5\u5169\u7d44 BRAM \u63a5\u53e3\uff08Port A \u8207 Port B\uff09\uff0c\u4f46\u6574\u500b IP \u5728 AXI \u7cfb\u7d71\u4e2d\uff0c\u53ea\u6703\u5c0d\u61c9\u5230\u4e00\u500b AXI Address Range\uff0c\u6240\u4ee5\u6211\u5011\u4e0d\u80fd\u900f\u904e\u4e00\u9846 <code>AXI BRAM Controller</code> \u53bb\u63a7\u5236\u5169\u584a <code>Block Memory Generator</code> \ud83d\udccc \u5728\u8a2d\u8a08 TDP\uff08True Dual Port\uff09BRAM \u6642\uff0c\u5e38\u898b\u7684\u4f5c\u6cd5\u662f\uff1a</p> <ul> <li> <p>\u4e00\u500b Port\uff08\u5982 Port A\uff09\u7528\u4f86\u9023\u63a5 AXI BRAM Controller\uff0c\u7531 \u8655\u7406\u5668\uff08\u5982 MicroBlaze \u6216 ARM\uff09\u7aef\u63a7\u5236</p> </li> <li> <p>\u53e6\u4e00\u500b Port\uff08\u5982 Port B\uff09\u5247\u76f4\u63a5\u9023\u63a5\u5230 \u81ea\u8a02\u7684 RTL \u786c\u9ad4\u6a21\u7d44</p> </li> </ul>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#part-44-vitis-project","title":"Part 4.4 Vitis Project","text":"<ol> <li> <p>\u7167 <code>Part1</code> \u7684\u65b9\u5f0f\u5275\u7acb\u4e00\u500b Vitis Project  </p> </li> <li> <p>\u4f7f\u7528 Part4.3 \u7522\u751f\u7684 <code>.xsa</code> \u6a94\u6848\uff0c\u5275\u5efa <code>Platform Component</code> </p> </li> <li> <p>\u4e00\u6a23\u4f7f\u7528 <code>Example Design</code> \u88e1\u9762\u7684 <code>Hello_World</code> \u4f5c\u70ba\u521d\u59cb\u7684 <code>Application Project</code></p> </li> <li> <p>\u5c07 <code>Application Project</code> \u5167\u7684 <code>hello_world.c</code> \u66ff\u63db\u6210\u8a72\u6b21Lab\u88e1\u9762\u7684<code>src/main.c</code></p> </li> <li> <p>\u5148 <code>build platform</code></p> </li> <li> <p>\u518d <code>build application</code></p> </li> <li> <p>\u9023\u63a5\u4e0a PYNQ \u677f</p> </li> <li> <p>\u6253\u958b <code>MobaXterm</code> Serial \u65b9\u5f0f\u9023\u63a5\u4e0a PYNQ</p> </li> <li> <p>\u9ede\u9078<code>Run</code></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part4-BRAM/#part-45-run-result","title":"Part 4.5 Run &amp; Result","text":"<ul> <li> <p>\u5c07\u5169\u7b46\u8cc7\u6599\uff0860 \u548c 20\uff09\u5beb\u5165 BRAM \u7684\u7279\u5b9a\u4f4d\u5740</p> </li> <li> <p>\u8b93\u786c\u9ad4\u908f\u8f2f\uff08mul16 \u6a21\u7d44\uff09\u81ea\u52d5\u8b80\u53d6\u9019\u5169\u7b46\u8cc7\u6599\u3001\u9032\u884c\u4e58\u6cd5</p> </li> <li> <p>\u5f9e BRAM \u7684\u7d50\u679c\u4f4d\u5740\u8b80\u56de\u786c\u9ad4\u8a08\u7b97\u51fa\u4f86\u7684\u4e58\u7a4d\uff08\u61c9\u70ba 1200\uff09</p> </li> <li> <p>\u900f\u904e UART \u5370\u51fa\u9019\u4e9b\u64cd\u4f5c\u7684\u904e\u7a0b\u8207\u7d50\u679c</p> </li> </ul> <p></p>"},{"location":"Hardware-Software-Codesign/Part5-DSP/","title":"Part5-DSP","text":""},{"location":"Hardware-Software-Codesign/Part5-DSP/#what-is-dsp48e1","title":"What is DSP48E1\uff1f","text":"<p><code>DSP48E1 Slice</code> \u662f <code>Xilinx 7 \u7cfb\u5217</code> FPGA \u4e2d\u5c08\u9580\u7528\u65bc\u9ad8\u901f\u6578\u4f4d\u8a0a\u865f\u8655\u7406\uff08DSP\uff09\u7684\u786c\u9ad4\u8cc7\u6e90\u3002\u5b83\u6574\u5408\u4e86\u4e00\u7d44 Configurable \u7684\u4e58\u6cd5\u5668\u3001\u52a0\u6cd5\u5668\u3001\u7d2f\u52a0\u5668\u8207\u908f\u8f2f\u55ae\u5143\uff0c\u4e26\u53ef\u7528\u65bc\u9ad8\u6548\u80fd\u904b\u7b97\u4e2d\u3002</p> <p></p> <p>\ud83d\udd27 \u7d44\u6210\u8207\u529f\u80fd DSP48E1 Slice \u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u5143\u4ef6\uff1a</p> <ol> <li> <p>25\u00d718 \u4e58\u6cd5\u5668\uff08Multiplier\uff09</p> <pre><code>\u53ef\u8655\u7406\u5169\u6578\u76f8\u4e58\uff0c\u652f\u63f4\u4e8c\u88dc\u6578\u3002\n</code></pre> </li> <li> <p>48-bit \u4e09\u8f38\u5165\u52a0\u6cd5\u5668 / \u7d2f\u52a0\u5668\uff08Accumulator / ALU\uff09</p> <pre><code>\u652f\u63f4\u52a0\u3001\u6e1b\u3001\u7d2f\u52a0\u3001\u908f\u8f2f\u904b\u7b97\uff08AND, OR, XOR \u7b49\uff09\u3002\n</code></pre> </li> <li> <p>Pre-Adder</p> <pre><code>D + A\uff0c\u5728\u9032\u5165\u4e58\u6cd5\u5668\u524d\u505a\u524d\u8655\u7406\uff0c\u5e38\u7528\u65bc Symmetric filter\u3002\n</code></pre> </li> <li> <p>Pattern Detector</p> <pre><code>\u53ef\u7528\u65bc\u6ea2\u4f4d/\u6536\u6582\u6368\u5165\u5075\u6e2c\u3001\u81ea\u52d5\u91cd\u8a2d\u3002\n</code></pre> </li> <li> <p>SIMD \u6a21\u5f0f\uff08Single Instruction Multiple Data\uff09</p> <pre><code>\u652f\u63f4 2\u00d724-bit \u6216 4\u00d712-bit \u4e26\u884c\u904b\u7b97\u3002\n</code></pre> </li> <li> <p>\u53ef\u7a0b\u5f0f\u5316\u7ba1\u7dda\u66ab\u5b58\u5668</p> <pre><code>\u652f\u63f4\u9ad8\u6548\u80fd\u7ba1\u7dda\u8a2d\u8a08\u3002\n</code></pre> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part5-DSP/#part-51-input-port","title":"Part 5.1 Input Port","text":"Port \u540d\u7a31 \u529f\u80fd\u8aaa\u660e A, B, C \u6578\u64da\u8f38\u5165\uff0cA \u548c B \u662f\u4e58\u6cd5\u5668\u8f38\u5165\uff0cC \u662f\u7b2c\u4e8c\u968e\u6bb5\u52a0\u6cd5\u5668\u7684\u8f38\u5165\u3002 D \u53ef\u7528\u65bc <code>Pre-Adder</code> \u6216\u4e58\u6cd5\u5668\u7684\u8f38\u5165\uff0c\u5bec\u5ea6\u70ba 25-bit\u3002\u642d\u914d A \u505a <code>D+A</code>\u3002 INMODE \u63a7\u5236 D\u3001A\u3001B \u8f38\u5165\u4f86\u6e90\u8207 Pre-Adder \u529f\u80fd\uff08\u5171 5 \u500b bits\uff09\uff0c\u53ef\u8a2d\u5b9a Pre-Adder \u958b\u95dc\u3001\u8f38\u5165\u7d44\u5408\u8207\u9078\u64c7\u3002 CARRYIN \u5916\u90e8\u4f86\u7684\u9032\u4f4d\u8f38\u5165\uff0c\u7528\u65bc\u52a0\u6cd5\u6216\u7d2f\u52a0\u64cd\u4f5c\u3002 CARRYINSEL \u63a7\u5236 CARRYIN \u7684\u4f86\u6e90\u3002 OPMODE \u63a7\u5236\u591a\u5de5\u5668\u7684\u904b\u7b97\u8def\u5f91\u9078\u64c7\uff0c\u5b9a\u7fa9 DSP \u7684\u64cd\u4f5c\u6a21\u5f0f\u3002 BCIN / ACIN <code>Cascade input</code>\uff0c\u5141\u8a31\u5c07\u524d\u4e00\u500b <code>DSP48E1</code> \u7684\u8f38\u51fa\u76f4\u63a5\u8f38\u5165\u4e0b\u4e00\u500b\u3002 PCIN \u524d\u4e00 <code>DSP slice</code> \u7684\u8f38\u51fa\u7d2f\u52a0\u5668\u7d50\u679c\u8f38\u5165\u3002 ALUMODE \u63a7\u5236 ALU\uff08\u908f\u8f2f/\u52a0\u6cd5\uff09\u55ae\u5143\u7684\u64cd\u4f5c\u6a21\u5f0f\u3002 CARRYCASCIN <code>Cascade</code> \u9032\u4f4d\u8f38\u5165\uff0c\u4f86\u81ea\u524d\u4e00\u500b <code>DSP slice</code> \u7684\u9032\u4f4d\u7d50\u679c\u3002 MULTSIGNIN \u4e58\u6cd5\u7d50\u679c\u7684\u7b26\u865f\u4f4d\u8f38\u5165\uff0c\u7528\u65bc\u591a\u968e\u4e58\u52a0\u904b\u7b97\u4e32\u63a5\u3002"},{"location":"Hardware-Software-Codesign/Part5-DSP/#part-52-output-ports","title":"Part 5.2 Output Ports","text":"Port \u540d\u7a31 \u529f\u80fd\u8aaa\u660e P <code>48-bit</code> \u7684\u4e3b\u8f38\u51fa\uff0c\u7528\u65bc\u4e58\u52a0\u3001\u52a0\u6cd5\u3001\u7d2f\u52a0\u7b49\u7d50\u679c\u8f38\u51fa\u3002\u53ef\u4ee5\u7d93\u7531 PCOUT cascade \u81f3\u4e0b\u4e00\u500b DSP48E1 \u7684 PCIN\uff0c\u5f62\u6210\u8cc7\u6599\u4e32\u63a5\u3002 PCOUT P \u7684\u5167\u90e8 <code>cascade \u8f38\u51fa</code>\uff0c\u7528\u65bc\u5c07\u904b\u7b97\u7d50\u679c\u4e32\u63a5\u7d66\u4e0b\u4e00\u500b DSP48E1\u3002 CARRYOUT[3:0] <code>4-bit carry \u8f38\u51fa</code>\uff0c\u8996 <code>SIMD</code> \u6a21\u5f0f\u800c\u5b9a\u4ee3\u8868\u4e0d\u540c\u52a0\u6cd5\u5340\u6bb5\u7684\u9032\u4f4d\u3002\u53ea\u6709\u67d0\u4e9b\u6a21\u5f0f\u4e0b\u7684\u7279\u5b9a\u4f4d\u5143\u624d\u662f\u6709\u6548\u503c\u3002 CARRYCASCOUT 1-bit cascade \u9032\u4f4d\u8f38\u51fa\uff0c\u5c0d\u61c9\u65bc CARRYOUT\uff0c\u4f46\u5728\u786c\u9ad4\u4e0a\u662f\u7368\u7acb\u7684\uff0c\u7528\u65bc\u591a\u968e\u52a0\u6cd5/\u4e58\u52a0\u904b\u7b97\u7684\u4e32\u63a5\u3002\u4e5f\u53ef\u88ab\u56de\u994b\u81f3 CARRYINSEL\u3002 MULTSIGNOUT \u4e58\u6cd5\u5668\u7d50\u679c\u7684 MSB\uff0c\u7528\u65bc\u5ef6\u4f38 <code>MACC</code>\uff08\u4e58\u52a0\u7d2f\u52a0\uff09\u64cd\u4f5c\u6642\u50b3\u905e\u4e58\u865f\u4f4d\uff0c\u642d\u914d MULTSIGNIN \u4f7f\u7528\u4ee5\u652f\u63f4 96-bit \u904b\u7b97\u3002 PATTERNDETECT (PD) \u7528\u65bc\u5075\u6e2c\u8f38\u51fa\u7d50\u679c\u662f\u5426\u7b26\u5408\u6307\u5b9a\u6a23\u5f0f\u6216\u5176\u88dc\u6578\uff0c\u4e26\u5e38\u61c9\u7528\u65bc\u6536\u6582\u6368\u5165\u3001\u98fd\u548c\u63a7\u5236\u8207\u81ea\u52d5\u91cd\u8a2d\u7b49\u908f\u8f2f\u529f\u80fd\u3002 PATTERNBDETECT (PBD) \u82e5 P \u7d50\u679c\u7b26\u5408 pattern \u7684\u53cd\u78bc\uff0c\u8f38\u51fa High\u3002\u642d\u914d mask \u4f7f\u7528\u53ef\u5ffd\u7565\u90e8\u5206 bit\u3002 OVERFLOW, UNDERFLOW \u900f\u904e <code>pattern detector</code> \u5075\u6e2c\u52a0\u6cd5/\u7d2f\u52a0\u904b\u7b97\u662f\u5426\u8d85\u51fa\u7279\u5b9a\u4f4d\u5143\u754c\u9650\u3002\u9808\u555f\u7528 P \u5bc4\u5b58\u5668\u6642\u624d\u6709\u6548\u3002"},{"location":"Hardware-Software-Codesign/Part5-DSP/#part-53-embedded-functions","title":"Part 5.3 Embedded Functions","text":"\u6a21\u7d44\u529f\u80fd \u8aaa\u660e \u4e3b\u8981\u53c3\u6578/\u63a7\u5236\u4fe1\u865f \u5099\u8a3b Pre-Adder \u4f4d\u65bc A \u8f38\u5165\u8def\u5f91\u4e2d\u7684 25-bit \u52a0\u6e1b\u5668\uff0c\u53ef\u5be6\u4f5c\u524d\u52a0/\u524d\u6e1b\u904b\u7b97 INMODE, D, A - \u8f38\u51fa\u9001\u5165\u4e58\u6cd5\u5668- \u7121\u98fd\u548c\u4fdd\u8b77\uff0c\u5efa\u8b70\u8f38\u5165\u9650\u5236\u70ba 24-bit \u4e8c\u88dc\u6578- \u6700\u591a 10 \u7a2e\u64cd\u4f5c\u6a21\u5f0f- \u53ef\u7e5e\u904e\u6539\u7528 D \u76f4\u63a5\u8f38\u5165 Multiplier 25-bit \u00d7 18-bit \u7684\u4e8c\u88dc\u6578\u4e58\u6cd5\u5668\uff0c\u652f\u63f4\u4e58\u6cd5\u90e8\u5206 cascade \u7121\u9700\u984d\u5916\u63a7\u5236 - \u8f38\u51fa 43-bit \u00d72 partial products\uff08\u5171 86-bit\uff09- \u652f\u63f4 17-bit \u53f3\u79fb\u5f8c\u7684 cascade\uff08MULT-to-MULT \u7d1a\u806f\uff09- \u53ef\u6a21\u64ec unsigned \u904b\u7b97\uff08\u5c07 MSB \u8a2d\u70ba 0\uff09- \u8f38\u51fa\u53ef\u4f7f\u7528 MREG \u505a pipeline Adder / Subtracter / Logic Unit \u5d4c\u5165\u5f0f ALU \u652f\u63f4\u52a0\u3001\u6e1b\u3001\u8207\u908f\u8f2f\u904b\u7b97\uff0c\u70ba\u4e09\u8f38\u5165\u7d50\u69cb OPMODE, ALUMODE, CARRYINSEL - 3 \u500b\u8f38\u5165\u70ba X\u3001Y\u3001CIN\uff08\u5e38\u70ba PCIN/CARRY\uff09- \u52a0\u6e1b\u63a7\u5236\u7531 ALUMODE \u6307\u5b9a- OPMODE \u63a7\u5236 X/Y/Z multiplexer \u7684\u8f38\u5165\u9078\u64c7- \u4f7f\u7528\u908f\u8f2f\u904b\u7b97\u6642\u7981\u6b62\u4f7f\u7528 multiplier"},{"location":"Hardware-Software-Codesign/Part5-DSP/#part-54-dsp-macro","title":"Part 5.4 DSP Macro","text":"<p>\ud83e\udde0 DSP Macro \u662f\u4ec0\u9ebc\uff1f</p> <p>DSP Macro \u662f\u57fa\u65bc DSP48E1 Slice \u7684\u5c01\u88dd\u5316 IP \uff0c\u63d0\u4f9b\u53c3\u6578\u5316\u8a2d\u5b9a\u8207\u6613\u7528\u4ecb\u9762\u3002</p>"},{"location":"Hardware-Software-Codesign/Part5-DSP/#instruction","title":"Instruction","text":"<p>\u5728 <code>Instructions</code> \u8655\u8a2d\u5b9a DSP \u8981\u8655\u7406\u7684\u904b\u7b97\u3002</p>"},{"location":"Hardware-Software-Codesign/Part5-DSP/#pipeline-options","title":"Pipeline Options","text":"<p>\ud83d\udcd8 DSP48E1 \u7684 Pipeline Options</p> \u6a21\u5f0f\u540d\u7a31 \u884c\u70ba\u7279\u6027 \u4f7f\u7528\u5efa\u8b70 \u63a7\u5236\u7a0b\u5ea6 Automatic \u6839\u64da Timing constrain \u3001\u8a2d\u8a08\u8907\u96dc\u5ea6\u81ea\u52d5\u6c7a\u5b9a\u662f\u5426\u52a0\u5165 pipeline register \u7c21\u55ae\u65b9\u4fbf \u6700\u4f4e\uff0c\u81ea\u52d5\u6c7a\u5b9a By Tier \u5de5\u5177\u6839\u64da\u6a21\u7d44\u4e0d\u540c\u968e\u6bb5\uff08\u8f38\u5165\u3001\u4e58\u6cd5\u3001\u8f38\u51fa\uff09\u505a\u51fa\u9069\u7576\u5e73\u8861\u914d\u7f6e \u8b93\u5de5\u5177\u5fae\u8abf\u6027\u80fd/\u8cc7\u6e90\u5e73\u8861 \u4e2d\u7b49\uff0c\u81ea\u52d5\u4f46\u5177\u5c64\u6b21\u5316\u8003\u91cf Expert \u53ef\u5b8c\u5168\u624b\u52d5\u914d\u7f6e pipeline \u5bc4\u5b58\u5668 timing optimization \u6216\u6975\u81f4\u8cc7\u6e90\u63a7\u5236 \u6700\u9ad8\uff0c\u624b\u52d5\u53ef\u63a7"},{"location":"Hardware-Software-Codesign/Part5-DSP/#implementation","title":"Implementation","text":"<p>\u5728 <code>Input Port Properties</code> \u8a2d\u5b9a\u8655\u5c07 <code>AUTO</code> \u6a21\u5f0f\u5207\u63db\u6210 <code>MANUAL</code> \u6a21\u5f0f\uff0c<code>Output Port Properties</code> \u8a2d\u5b9a\u6210 <code>User Defined</code> \u5373\u53ef\u81ea\u884c\u8a2d\u5b9a I/O port \u7684\u5bec\u5ea6\u3002</p>"},{"location":"Hardware-Software-Codesign/Part5-DSP/#part-55-example-project","title":"Part 5.5 Example Project","text":"<ol> <li> <p>Create a New Vivado Project and Create a New Block Design</p> </li> <li> <p>\u52a0\u5165 <code>DSP Macro</code></p> </li> <li> <p>\u9032\u5165 <code>DSP Macro</code> IP \u8a2d\u5b9a\u9801\u9762</p> <ol> <li><code>Instructions</code> \u8a2d\u5b9a\u70ba <code>A * B</code> \u3002</li> <li><code>Pipeline Options</code> \u8a2d\u5b9a\u6210 <code>automatic</code>\u3002</li> <li><code>A</code> \u3001 <code>B</code> \u8a2d\u5b9a 16 bits \uff0c <code>Output port P</code> \u8a2d\u5b9a 32 bits\u3002</li> </ol> </li> <li> <p>\u5b8c\u6210\u8a2d\u5b9a\u5f8c\uff0c\u52a0\u5165\u4e09\u500b <code>GPIO IP</code> \u3001 <code>Zynq CPU</code>\uff0c\u5b8c\u6210\u5f8c\u4e00\u6a23\u505a <code>Block Automation</code>\u3001<code>Connection Automation</code>\u3002</p> <p>\u5b8c\u6210 Block design \u5982\u4e0b\u5716 : </p> </li> <li> <p><code>Create HDL Wrapper</code> -&gt; <code>Generate Bitstream</code> -&gt; <code>Export .xsa</code></p> </li> <li> <p>\u4f9d\u7167 Part 4.4 \u7684\u65b9\u6cd5\u5efa\u7acb <code>Vitis Project</code>\u3002</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part5-DSP/#part-56-run-result","title":"Part 5.6 Run &amp; Result","text":"<p>\u900f\u904e\u5169\u500b <code>GPIO</code> \u5beb\u5165 <code>A</code>\u3001<code>B</code> \u7684\u503c\uff0c\u7d93\u904e <code>DSP</code> \u904b\u7b97\u5b8c\u6210\u5f8c \uff0c \u7d93\u7531 GPIO \u56de\u50b3 <code>A * B</code> \u7684\u7d50\u679c\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part5-DSP/#reference","title":"Reference","text":"<p>7 Series DSP48E1 Slice User Guide (UG479)</p>"},{"location":"Hardware-Software-Codesign/Part6-PYNQ-Jupyter-Notebook/","title":"Part6-PYNQ-Jupyter-Notebook","text":"<p>\u672c\u7ae0\u5c07\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 PYNQ \u7684 Jupyter Notebook \u958b\u767c\u74b0\u5883\uff0c\u900f\u904e Python \u8207 Overlay \uff0c\u5be6\u73fe\u8edf\u786c\u9ad4\u5354\u540c\u904b\u4f5c\u7684\u61c9\u7528\u958b\u767c\u6d41\u7a0b\u3002\u4f7f\u7528\u8005\u53ef\u4ee5\u5728\u7db2\u9801\u4ecb\u9762\u4e2d\uff0c\u4ee5 Python \u7a0b\u5f0f\u78bc\u8f15\u9b06\u63a7\u5236 PL\uff08Programmable Logic\uff09\u4e0a\u7684\u786c\u9ad4\u6a21\u7d44\uff0c\u5982 GPIO\u3001\u52a0\u6e1b\u5668\u3001\u5f71\u50cf\u8655\u7406\u96fb\u8def\u7b49\u3002</p>"},{"location":"Hardware-Software-Codesign/Part6-PYNQ-Jupyter-Notebook/#part-61-flashing-pynq-image-to-sd-card","title":"Part 6.1 Flashing PYNQ Image to SD Card","text":"<ol> <li> <p>\u5728\u4f7f\u7528 <code>PYNQ</code> \u677f\u5b50\u524d\uff0c\u9996\u5148\u9700\u8981\u5c07\u5b98\u65b9\u63d0\u4f9b\u7684\u6620\u50cf\u6a94\uff08\u57fa\u65bc Ubuntu \u7684 Linux \u7cfb\u7d71\uff09\u71d2\u9304\u5230 microSD \u5361\u4e2d\u4f5c\u70ba\u4f5c\u696d\u7cfb\u7d71\u3002</p> </li> <li> <p>\u4e0b\u8f09 PYNQ \u6240\u63d0\u4f9b\u7684 Ubuntu \u7cfb\u7d71  </p> <p>PYNQ Ubuntu IMG \u4e0b\u8f09\u9023\u7d50 </p> <p></p> </li> <li> <p>\u4e0b\u8f09\u71d2\u5165\u5de5\u5177\uff0c\u9019\u908a\u6211\u5011\u501f\u7528 <code>BalenaEtcher</code>\uff0c\u7576\u4f5c\u71d2\u5165\u5de5\u5177  </p> <p>BalenaEtcher \u4e0b\u8f09\u9023\u7d50 </p> <p></p> </li> <li> <p>\u5c07\u4e0b\u8f09\u7684 IMG \u6a94\uff0c\u71d2\u5165\u9032 SD \u5361\u7576\u4e2d  </p> <p></p> <p>\u6700\u5f8c\u6309\u4e0b Flash \u5c31\u53ef\u4ee5\u958b\u59cb\u71d2\u9304\u4e86</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part6-PYNQ-Jupyter-Notebook/#part-62-booting-up-the-pynq-z2-board","title":"Part 6.2 Booting Up the PYNQ-Z2 Board","text":"<ol> <li> <p>\u5c07 PYNQ-Z2 \u7684\u786c\u9ad4\u914d\u7f6e\u4f9d\u64da\u4e0b\u5716\u8a2d\u7f6e</p> <p></p> <ol> <li> <p>\u5c07\u958b\u6a5f\u6a21\u5f0f\u8abf\u6574\u81f3 SD \u7684\u4f4d\u7f6e\u3002</p> </li> <li> <p>\u8abf\u6574\u96fb\u6e90\u4f9b\u61c9\u6a21\u5f0f (\u4f7f\u7528\u96fb\u6e90\u4f9b\u61c9\u5668\u5c31\u63a5 REG\uff1b\u4f7f\u7528 USB \u4f9b\u96fb\u5c31\u63a5 USB)\u3002</p> </li> <li> <p>\u63d2\u5165 micro SD\u3002</p> </li> <li> <p>\u63a5\u4e0a\u96fb\u6e90\u3002</p> </li> <li> <p>\u63d2\u4e0a\u4e59\u592a\u7db2\u8def\u7dda\uff0c\u53e6\u4e00\u7aef\u8207\u7b46\u96fb\u9023\u63a5\u3002</p> </li> <li> <p>\u958b\u6a5f \u958b\u555f\u96fb\u6e90\u5f8c\u5148\u4e0d\u8981\u52d5\u4f5c\uff0c\u7b49\u5f85\u677f\u5b50\u7684 RGB LED \u9583\u5f69\u71c8\u5f8c\u56db\u9846 LED \u5168\u4eae\u7d05\u71c8/\u7da0\u71c8\u624d\u4ee3\u8868\u5b8c\u5168\u958b\u6a5f\u5b8c\u6210\u3002</p> </li> <li> <p>\u6253\u958b <code>MobaXterm</code> \u900f\u904e <code>Serial</code>\uff0cbaud rate \u8a2d\u5b9a <code>115200</code> \u9023\u7d50 FPGA \u5373\u53ef\u770b\u5230 Linux \u7cfb\u7d71\u7684 terminal \u7684\u756b\u9762\u3002</p> <p></p> </li> </ol> </li> <li> <p>\u67e5\u770b PYNQ \u7684 IP \u4f4d\u7f6e  </p> <p></p> </li> <li> <p>\u958b\u555f\u81ea\u5df1\u96fb\u8166\u7684\u7db2\u8def\u4ecb\u9762\u5361\u8a2d\u5b9a\uff0c\u627e\u5230\u9023\u63a5\u5230 <code>PYNQ</code> \u7684 <code>Adapter</code></p> <p></p> </li> <li> <p>\u5c07\u9023\u63a5\u5230 <code>PYNQ</code> \u7684 <code>Adapter</code>\uff0c\u4fee\u6539 <code>IPv4</code> \u8a2d\u5b9a</p> <ul> <li>IP \u8a2d\u5b9a\u6210 192.168.2.x \u53ef\u4ee5\u8a2d 192.168.2.1 ( \u4e0d\u8981\u8ddfFPGA\u677f\u672c\u8eab\u7684IP\u4f4d\u7f6e\u91cd\u8907\uff0c\u4e0d\u8981\u8a2d99 )</li> <li>Subnet mask : 255.255.255.0  </li> </ul> <p></p> </li> <li> <p>\u5982\u679c\u6c92\u6709\u7b2c2\u9ede\u5716\u4e2d\u7684 <code>inet</code> \u53ef\u4ee5\u8a66\u8a66\u770b\u5c07\u8a72 <code>Adapter</code> \u7684\u5171\u7528\u9078\u9805\u6253\u52fe  </p> <p></p> </li> <li> <p>\u8a2d\u5b9a\u597d\u5f8c\u81ea\u5df1\u96fb\u8166\u7684\u7db2\u8def\u4ecb\u9762\u5361\u8a2d\u5b9a\u5f8c\uff0c\u5728 Browser \u4e2d\u8f38\u5165  </p> <ul> <li>192.168.2.99 ( FPGA \u7684 IP ) or pynq:9090</li> </ul> </li> <li> <p>\u5bc6\u78bc : xilinx  </p> <p></p> </li> <li> <p>\u51fa\u73fe\u4ee5\u4e0b\u756b\u9762\u5c31\u4ee3\u8868\u6210\u529f\u9032\u5165 PYNQ \u7684 Jupyter Notebook \u4e86</p> <p></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part6-PYNQ-Jupyter-Notebook/#part63-pynq-overlay","title":"Part6.3 PYNQ Overlay","text":"<ol> <li> <p>Create Block Design\uff0c\u4e26\u5efa\u7acb\u5982\u4e0b\u7684 Block Design\uff0cGPIO \u9078\u64c7 <code>LED</code></p> <p></p> <p></p> </li> <li> <p>Create HDL Wrapper &amp; Generate Bitstream</p> </li> <li> <p>Export Bitstream File</p> <p></p> <p>Vivado 2021.2 \u4e4b\u5f8c\u7684\u7248\u672c\uff0c\u5c07\u96fb\u8def\u71d2\u5165\u9032\u53bb PYNQ \u88e1\u9762\u53ea\u9700\u8981 <code>*bit</code>\u3001<code>*.hwh</code>\uff0c\u82e5\u4f60\u4f7f\u7528\u7684\u662f\u4e4b\u524d\u7684\u7248\u672c\u9084\u9700\u8981\u900f\u904e <code>Export Block Design</code> \u751f\u6210\u51fa <code>*.tcl</code> \u6a94\u6848\u624d\u53ef\u4ee5\u71d2\u5165</p> </li> <li> <p>\u9023\u7dda\u9032\u5165 jupyter notebook\uff0c\u5275\u5efa\u4e00\u500b\u65b0\u8cc7\u6599\u593e\uff0c\u4e26\u4e0a\u50b3 <code>*bit</code>\u3001<code>*.hwh</code>\uff0c\u9019\u5169\u500b\u6a94\u6848\u5fc5\u9808\u5728\u76f8\u540c\u7684\u4f4d\u7f6e</p> <p>\ud83d\udccc <code>*bit</code>\u3001<code>*.hwh</code> \u5169\u8005\u6a94\u540d\u9700\u76f8\u540c</p> <p></p> <p><code>*hwh</code> \u6a94\u7bc4\u4f8b\u4f4d\u7f6e</p> <p></p> </li> <li> <p>\u57f7\u884c\u7a0b\u5f0f\u5c31\u53ef\u4ee5\u770b\u5230\u8f38\u5165\u8ddf FPGA \u677f\u4e0a LED \u71c8\u7684\u95dc\u4fc2\uff0cPYNQ \u7a0b\u5f0f\u7684\u90e8\u5206\u81ea\u884c\u7406\u89e3\uff0c\u5b98\u65b9\u7db2\u7ad9\u6709\u63d0\u4f9b\u5f88\u591alibrary \u8b93\u6211\u5011\u4f7f\u7528  </p> <p>PYNQ_Library_Website</p> <p></p> <p>\ud83d\udccc overlay = Overlay(\"example.bit\") \u662f\u4ec0\u9ebc\u610f\u601d\uff1f  </p> <p>\u9019\u884c\u6703\u8f09\u5165\u540d\u70ba example.bit \u7684 bitstream \u6a94\u6848\uff0c\u5c07\u4f60\u7684\u786c\u9ad4\u96fb\u8def\u8a2d\u8a08\u71d2\u9304\u5230 FPGA \u4e0a\uff0c\u4e26\u540c\u6642\u8b80\u5165\u5c0d\u61c9\u7684 .hwh \u6a94\u6848\u4f86\u5efa\u7acb IP \u5340\u584a\u7684\u5c0d\u61c9\u8cc7\u8a0a\uff08\u50cf\u662f\u8a18\u61b6\u9ad4\u5730\u5740\u3001Port\u9023\u63a5\u7b49\uff09\u3002</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part6-PYNQ-Jupyter-Notebook/#additional","title":"Additional","text":"<p>Extra4-ILA-with-PYNQ</p>"},{"location":"Hardware-Software-Codesign/Part7-DMA/","title":"Part7-DMA","text":"<p>\u672c\u7ae0\u5c07\u4ecb\u7d39\u5982\u4f55\u5728 PYNQ \u4e0a\u4f7f\u7528 Direct Memory Access (DMA) \u6a21\u7d44\u5be6\u73fe\u8cc7\u6599\u50b3\u8f38\uff0c\u4e26\u52a0\u901f FFT \u904b\u7b97\u3002</p>"},{"location":"Hardware-Software-Codesign/Part7-DMA/#review-axi-stream","title":"Review AXI Stream","text":""},{"location":"Hardware-Software-Codesign/Part7-DMA/#axi-stream","title":"AXI Stream \u57fa\u672c\u8a0a\u865f","text":"\u8a0a\u865f\u540d\u7a31 \u65b9\u5411 \u529f\u80fd\u8aaa\u660e <code>TVALID</code> Master \u279c Slave \u50b3\u9001\u7aef\u901a\u77e5\u63a5\u6536\u7aef\u8cc7\u6599\u6709\u6548 <code>TREADY</code> Slave \u279c Master \u63a5\u6536\u7aef\u6e96\u5099\u597d\u63a5\u6536\u8cc7\u6599 <code>TDATA</code> Master \u279c Slave \u8cc7\u6599 <code>TLAST</code> Master \u279c Slave \u8868\u793a\u6b64\u8cc7\u6599\u70ba\u6700\u5f8c\u4e00\u7b46 <code>TKEEP</code> Master \u279c Slave Byte-level \u6709\u6548\u4f4d\u5143 Mask"},{"location":"Hardware-Software-Codesign/Part7-DMA/#handshake-mechanism","title":"Handshake Mechanism","text":"<p>\u7576 <code>TVALID</code> \u8207 <code>TREADY</code> \u540c\u6642\u70ba\u9ad8\u6642\uff0c\u8cc7\u6599\u624d\u6703\u88ab\u50b3\u8f38\u3002 \u7531 <code>TLAST=1</code> \u4f86\u8868\u793a\u300c\u4e00\u7b46\u8cc7\u6599\u50b3\u8f38\u7684\u7d50\u675f\u300d\u3002  </p> <p>\u5982\u679c\u63a5\u6536\u7aef\u7a81\u7136\u628a TREADY \u5f9e 1 \u62c9\u6210 0\uff0c\u6703\u600e\u6a23\uff1f  </p> <ul> <li>\u50b3\u9001\u7aef\u4ecd\u7136\u6703\u4fdd\u6301 TVALID=1\uff0c\u8868\u793a\u8cc7\u6599\u9084\u662f\u6709\u6548\u3001\u6e96\u5099\u597d\u50b3\u9001\u3002</li> <li>\u4f46\u8cc7\u6599\u4e0d\u6703\u5be6\u969b\u9001\u51fa\u6216\u88ab\u63a5\u6536\uff0c\u56e0\u70ba TVALID &amp; TREADY \u2260 1\u3002</li> <li>\u50b3\u9001\u7aef\u6703\u300c\u505c\u4f4f\u300d\u5728\u7576\u524d\u90a3\u7b46\u8cc7\u6599\uff0c\u4e0d\u6703\u63a8\u9032\u5230\u4e0b\u4e00\u7b46\uff0c\u76f4\u5230 TREADY \u518d\u6b21\u8b8a\u6210 1\u3002</li> </ul>"},{"location":"Hardware-Software-Codesign/Part7-DMA/#dma-module","title":"DMA Module","text":"<p>DMA \u5728 Xilinx \u63d0\u4f9b\u7684 IP \u7576\u4e2d\u6709\u5206\u5169\u7a2e Mode\uff0c\u5206\u5225\u662f <code>Scatter Gather Mode (SG Mode)</code> \u548c <code>Simple Mode</code>\uff0c\u4e0a\u5716\u70ba Simple Mode \u4e0b\u7684 DMA Module\u3002</p>"},{"location":"Hardware-Software-Codesign/Part7-DMA/#port-description","title":"Port Description","text":"\u4ecb\u9762\u540d\u7a31 \u529f\u80fd\u63cf\u8ff0 AXI \u985e\u578b S_AXI_LITE \u63a7\u5236\u4ecb\u9762\uff0c\u9023\u63a5\u81f3 ZYNQ PS \u7684 AXI General Port (GP)\uff08PS\u7aef\u8a2d\u5b9a DMA \u7684\u914d\u7f6e\u7528 Register\uff09 AXI4-Lite\uff08Slave\uff09 S_AXIS_S2MM Stream to Memory-Mapped\uff1a\u8f38\u51fa\u8cc7\u6599\u5beb\u56de\u8a18\u61b6\u9ad4 AXI4-Stream\uff08Slave\uff09 M_AXIS_MM2S Memory-Mapped to Stream\uff1aDMA \u5f9e\u8a18\u61b6\u9ad4\u53d6\u8cc7\u6599 AXI4-Stream\uff08Master\uff09 M_AXI_MM2S DMA \u5f9e PS \u8a18\u61b6\u9ad4\u6293\u8cc7\u6599\u9001\u51fa AXI4 (Memory-Mapped)\uff08Master\uff09 M_AXI_S2MM DMA \u5c07\u8cc7\u6599\u5beb\u56de PS \u8a18\u61b6\u9ad4 AXI4 (Memory-Mapped)\uff08Master\uff09 introut (mm2s/s2mm) \u50b3\u8f38\u5b8c\u6210\u7684 interrupt \u8a0a\u865f\uff0c\u82e5\u4f7f\u7528 interrupt mode \u6642\u9023\u63a5\u81f3 ZYNQ PS \u2014 <p>\ud83d\udccc\u8acb\u6ce8\u610f\u4e0a\u5716 DDR Controller \u5be6\u969b\u4e0a\u662f\u5728 ZYNQ7_PS \u7576\u4e2d</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part7-DMA/#settings","title":"Settings","text":"<ul> <li> <p>Enable Scatter Gather Engine:     DMA \u7684 Scatter-Gather (SG) Mode \u662f\u70ba\u4e86\u8655\u7406\u591a\u7b46\u3001\u5206\u6563\u5728\u8a18\u61b6\u9ad4\u4e0d\u540c\u4f4d\u7f6e\u7684\u8cc7\u6599\uff0c\u8b93 DMA \u53ef\u4ee5\u81ea\u52d5\u4f9d\u7167 descriptor \u50b3\u8f38\u591a\u6bb5\u8cc7\u6599\uff0c\u800c\u4e0d\u9700\u8981 CPU \u4e00\u76f4\u4ecb\u5165\u63a7\u5236\u3002 (\u82e5\u7121\u7279\u6b8a\u9700\u6c42\uff0c\u5247\u5efa\u8b70\u505c\u7528\u6b64\u529f\u80fd\uff0c\u4f7f\u7528\u8f03\u7c21\u55ae\u7684 Simple Mode \u5373\u53ef)</p> </li> <li> <p>Width of Buffer Length Register (8\u201326):     \u9019\u662f DMA \u5beb\u5165/\u8b80\u53d6\u7684\u6700\u5927 buffer \u9577\u5ea6\u9650\u5236\uff0cDMA \u4e00\u6b21\u6700\u5927\u53ef\u4ee5\u642c\u904b\u591a\u5c11\u8cc7\u6599\uff0c\u4ee5 Byte \u70ba\u55ae\u4f4d\uff0c\u6700\u5927\u503c\u70ba26\u4ee3\u8868\u6bcf\u6b21\u6700\u591a\u53ef\u50b3\u8f38 2^26 = 64MB \u7684\u8cc7\u6599\u3002</p> </li> <li> <p>Address Width (32\u201364):     \u4ee3\u8868 DMA \u53ef\u4ee5\u642c\u904b\u7684\u8a18\u61b6\u9ad4\u7a7a\u9593\u5927\u5c0f\uff0c\u5728 Zynq7000 \u7cfb\u5217\u7684\u6676\u7247\u7d44 (PYNQ-Z2\u53ea\u6709512MB DDR) \u8a2d\u7f6e\u6210 32 \u5373\u53ef\u5c0d\u61c9\u5230 4G \u7684\u8a18\u61b6\u9ad4</p> </li> <li> <p>Memory Map Data Width:     \u5c07\u6703\u4fee\u6539 AXI_MM2S / AXI_S2MM interface \u7684 rdata \u5bec\u5ea6\uff0c\u76f4\u63a5\u5f71\u97ff DMA \u8b80\u53d6 Memory \u7684\u8cc7\u6599\u5bec\u5ea6</p> </li> <li> <p>Stream Data Width:     \u5c07\u6703\u4fee\u6539 AXIS_S2MM / AXIS_MM2S interface \u7684 tdata \u5bec\u5ea6\u3002\u5f71\u97ff\u5f8c\u7e8cStream \u7aef\u914d\u63a5\u7684 downstream IP\uff08\u5982 FFT\u3001video\uff09\u4e5f\u8981\u7528\u540c\u6a23\u5bec\u5ea6\u3002</p> </li> <li> <p>Burst:     DMA \u88e1\u7684 Burst \u8a2d\u5b9a\u662f\u5f71\u97ff AXI4-Memory Mapped interface\uff08m_axi_mm2s / m_axi_s2mm\uff09 \u7684\u884c\u70ba\uff0c\u5b83\u6c7a\u5b9a\u4e86\u4e00\u6b21 AXI Protocol Handshake \u5f8c\u53ef\u4ee5\u50b3\u8f38\u5e7e\u7b46\u8cc7\u6599\uff0c\u9032\u800c\u63d0\u5347 Throughput</p> </li> <li> <p>Allow Unaligned Transfers:     \u53ef\u652f\u63f4\u975e\u5c0d\u9f4a\u7684\u8cc7\u6599\u5730\u5740</p> </li> </ul>"},{"location":"Hardware-Software-Codesign/Part7-DMA/#part-71-vivado-block-design","title":"Part 7.1 Vivado Block Design","text":"<ol> <li> <p>Create a new Vivado Project and Create a new Block Design</p> </li> <li> <p>\u52a0\u5165 <code>Zynq7_PS</code>\u3001<code>AXI_DMA</code>\u3001<code>Fast Fourier Transform</code>\u3001<code>AXI4-Stream Data Width Converter * 2</code>\uff0c\u4e26\u4e14 <code>Run Block Automation</code></p> <p></p> </li> <li> <p>\u9ede\u958b <code>Zynq7_PS</code> \u7684\u8a2d\u5b9a\u4ecb\u9762\uff0c<code>PS-PL Configuration &gt; HP Slave AXI interface &gt; S AXI HP0 interface and S AXI HP2 interface</code> \u5c07\u5169\u8005\u90fd\u6253\u52fe\u4e26\u4e14\u5c07 width \u90fd\u8a2d\u5b9a\u6210 64bit</p> <p></p> <p>\ud83d\udccc \u70ba\u4ec0\u9ebc\u9019\u908a\u8981\u4f7f\u7528 HP(High Performance Port)? - AXI DMA \u9700\u8981\u5c07\u8cc7\u6599\u5beb\u56de DDR\uff08S2MM\uff09\u8207\u5f9e DDR \u8b80\u53d6\u8cc7\u6599\uff08MM2S\uff09 - GP Port\uff08General Purpose\uff09\u50c5\u9069\u5408\u63a7\u5236\u7528\u9014\uff0c\u983b\u5bec\u4f4e\uff0c\u4e0d\u9069\u5408\u8cc7\u6599\u642c\u79fb - HP Port \u64c1\u6709\u9ad8\u983b\u5bec\uff0c\u80fd\u8207 AXI DMA \u914d\u5408\u5be6\u73fe\u9ad8\u901f\u50b3\u8f38</p> </li> <li> <p>\u4fee\u6539 <code>Zynq7_PS</code> \u7684 Clock Configuration\uff0c\u5c07 <code>FCLK_CLK0</code> \u8a2d\u5b9a\u6210 100MHz</p> <p></p> </li> <li> <p>\u9ede\u958b <code>AXI_DMA</code> \u53d6\u6d88 <code>Scatter Gather Engine</code>\uff0c\u4e26\u4e14\u5176\u9918\u8a2d\u5b9a\u5982\u4e0b\u5716\u6240\u793a</p> <p></p> <p>\ud83d\udccc Width of Buffer Length Register \u6307\u7684\u662f\u4f60\u6700\u591a\u53ef\u4ee5\u6307\u5b9a\u300c\u4e00\u6b21\u8981\u50b3\u8f38\u591a\u5c11\u7b46\u8cc7\u6599\u300d\u7684\u6578\u503c\u5927\u5c0f\u4e0a\u9650\u3002</p> <ul> <li> <p>\u9577\u5ea6\u662f\u4ee5\u300cbyte \u70ba\u55ae\u4f4d\u300d\u4f86\u8a08\u7b97</p> </li> <li> <p>\u5bec\u5ea6\u8a2d 16\uff0c\u4ee3\u8868\u4f60\u6700\u591a\u53ef\u4ee5\u8a2d\u5b9a\u7684\u9577\u5ea6\u70ba\uff1a2^16 = 65536 bytes(= 65KB)</p> </li> </ul> <p> </p> </li> <li> <p>\u9ede\u958b <code>FFT</code> \u8a2d\u5b9a  </p> <ul> <li>Tramsform Length = 8192 : Transform Length \u8d8a\u5927\uff0c\u983b\u57df\u89e3\u6790\u5ea6\u8d8a\u9ad8</li> <li>Target Clock Freq = 100</li> <li>Target Data Throughput = 50</li> </ul> <p></p> <ul> <li>Data Format = Fixed Point</li> <li>Output Ordering Options = Natural Order</li> <li>Precision Options/Input Data Width = 16 (\u5be6\u90e8\u6216\u865b\u90e8\u7684 Width)</li> <li>Precision Options/ Phase Factor Width = 16 (Twiddle Factor \u7684 Width)</li> </ul> <p></p> <p>\ud83d\udccc \u4e0a\u8ff0\u8a2d\u5b9a FFT \u6240\u9700\u7684\u8cc7\u6599\u5f62\u5f0f\uff0c\u5f8c\u7e8c\u5728\u8edf\u9ad4\u7aef\u9700\u5982\u4e0b\u8a2d\u5b9a\u8cc7\u6599\uff0c\u518d\u8f38\u5165\u9032\u53bbFFT\u7576\u4e2d  </p> <ul> <li>Fixed Point = fix16_15 (Q1.15)</li> <li>16-bit (real) + 16-bit (imaginary) = 32-bit</li> </ul> bits \u8cc7\u6599\u5167\u5bb9 [31:16] Imag [15:0] Real <p></p> </li> <li> <p>\u4fee\u6539 <code>AXI4-Stream Data Width Converter</code> \u8a2d\u5b9a\u5982\u4e0b\u5716</p> <p>axis_dwidth_converter_0:</p> <p></p> <p>axis_dwidth_converter_1:</p> <p></p> </li> <li> <p>\u624b\u52d5\u63a5\u7dda</p> <ul> <li> <p>axis_dwidth_converter_0: M_AXIS -&gt; FFT: S_AXIS_DATA</p> </li> <li> <p>DMA: M_AXIS_MM2S -&gt; axis_dwidth_converter_0: S_AXIS</p> </li> <li> <p>axis_dwidth_converter_1: M_AXIS -&gt; DMA: S_AXIS_S2MM</p> </li> <li> <p>FFT: M_AXIS_DATA -&gt; axis_dwidth_converter_1: S_AXIS</p> </li> <li> <p>FFT: aclk -&gt; ZYNQ7_PS: FCLK_CLK0</p> </li> </ul> <p></p> </li> <li> <p><code>Run Connection Automation</code></p> <p></p> <p></p> </li> <li> <p>\u6700\u5f8c\u7684 Block Design \u548c Address Editor \u5982\u4e0b\u5716\u6240\u793a</p> <p></p> <p></p> <p>\ud83d\udccc Address Editor \u5728 PYNQ-Z2 \u7684 CPU \u6240\u4f7f\u7528\u7684\u8a18\u61b6\u9ad4\u5340\u9593\u5373\u70ba <code>0x1000_0000 ~ 0x1FFF_FFFF (512MB)</code>\uff0c\u56e0\u6b64 DMA \u6240\u9023\u63a5\u7684 HP Port \u5fc5\u9808 Memory Map \u5230\u8a72\u8a18\u61b6\u9ad4\u5340\u6bb5\uff0c\u5728 Vivado 2023.2 \u7684\u7248\u672c\u6703\u81ea\u52d5\u5e6b\u4f60\u5206\u914d\u5230\u8a72\u5340\u6bb5</p> </li> <li> <p>Create HDL Wrapper</p> </li> <li> <p>Generate Bitstream \u4e26 Export Hardware Bitstream</p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part7-DMA/#part-72-jupyter-notebook","title":"Part 7.2 Jupyter Notebook","text":"<ol> <li> <p>\u5c07 PYNQ-Z2 \u4ee5 SD \u5361\u6a21\u5f0f\u958b\u6a5f\uff0c\u4e26\u9023\u7dda\u5230 FPGA \u677f\u6253\u958b Jupyter Notebook</p> </li> <li> <p>\u5c07 <code>./src/DMA_FFT.ipynb</code>\u3001<code>*.bit</code>\u3001<code>*.hwh</code> \u9019\u4e9b\u6a94\u6848\u653e\u5230 FPGA \u677f\u88e1\u9762</p> </li> <li> <p>\u5c07\u8b80\u53d6 Overlay \u7684\u6a94\u540d\u4fee\u6539\u6210\u4f60\u7684 bit \u6a94\u540d\u7a31</p> </li> <li> <p>\u57f7\u884c\u7a0b\u5f0f</p> </li> <li> <p>\u4f60\u5c31\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u9019\u4e9b\u5716\u4e86\ud83c\udf89</p> <p></p> <p></p> <p></p> </li> </ol>"},{"location":"Hardware-Software-Codesign/Part8-CDMA/","title":"Part8-CDMA","text":""},{"location":"Hardware-Software-Codesign/Part9-HDMI/","title":"Part9-HDMI","text":"<p>\u672c\u7ae0\u7bc0\u5be6\u4f5c\u4e00\u500b\u57fa\u65bc FPGA \u7684 HDMI \u5f71\u50cf\u8f38\u51fa\u6a21\u7d44\uff0c\u76ee\u7684\u5728\u65bc\u5c07\u6578\u4f4d\u5f71\u50cf\u8cc7\u6599\u900f\u904e HDMI \u4ecb\u9762\u5373\u6642\u986f\u793a\u65bc\u5916\u90e8\u87a2\u5e55\u4e0a\u3002\u7cfb\u7d71\u53ef\u8207\u5f71\u50cf\u8655\u7406\u6a21\u7d44\u6574\u5408\uff0c\u5be6\u73fe\u5f9e\u8cc7\u6599\u8655\u7406\u5230\u756b\u9762\u986f\u793a\u7684\u5b8c\u6574\u8cc7\u6599\u6d41\u3002</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-1","title":"Step 1","text":"<p>\u81f3 https://github.com/Xilinx/PYNQ/tree/master/boards/ip</p> <p>\u4e0b\u8f09 IP <code>rgb2dvi_v1_2</code>\u53ca <code>If/tmds_v1_0</code></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-2","title":"Step 2","text":"<p>\u958b\u555f vivado project \u5f8c\uff0c\u9ede\u64ca\u5de6\u5074 <code>setting</code> &gt; <code>IP</code> &gt; <code>Repository</code>  &gt; <code>+</code> \u52a0\u5165\u5169\u500b IP \u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-3","title":"Step 3","text":"<p>\u52a0\u5165 <code>ZYNQ7 Processing System</code> \u5f8c\u9ede\u64ca<code>Run Block Automation</code> \u3002</p> <p>\u9ede\u9078 ZYNQ7 Processing System IP \u5f8c\uff0c\u9078\u64c7 <code>PS-PL Configuration</code> &gt; <code>HP Slave AXI interface</code> \u5c07 <code>HP0</code> \u6253\u52fe\uff0c\u5728 <code>PS</code> \u7aef\u958b\u555f slave port \u7d66 <code>VDMA</code> \u4f7f\u7528\u3002</p> <p></p> <p>\u9078\u64c7 <code>interrupt</code> &gt; <code>Fabric Interrupts</code> &gt; <code>PL-PS Interrupt Ports</code> \u5c07 <code>IPQ_F2P</code> \u6253\u52fe\u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-4","title":"Step 4","text":"<p>\u52a0\u5165\u56db\u500b IP</p> <ol> <li><code>AXI Video Direct Memory Access</code></li> <li><code>Video Timing Controller</code></li> <li><code>AXI4-Stream to Video Out</code></li> <li><code>RGB to DVI Video Encoder</code></li> </ol>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-5","title":"Step 5","text":"<p>\u9ede\u64ca <code>AXI Video Direct Memory Access</code></p> <p><code>Stream Data Width</code> \u8abf\u5230 24</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-6","title":"Step 6","text":"<p>\u9ede\u64ca <code>Video Timimg Controller</code></p> <p><code>Detection/Generation</code> \u53d6\u6d88 <code>Include AXI4-Lite Interface</code> \u548c <code>Enable Detection</code></p> <p></p> <p><code>Default/Constant</code> &gt; <code>Video Mode</code> \u9078 <code>720P</code></p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-7","title":"Step 7","text":"<p>\u9ede\u64ca <code>RGB to DVI Video Encoder</code> &gt; \u53d6\u6d88 <code>Reset active high</code> \u4e26\u9078\u53d6 <code>720P</code></p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-8","title":"Step 8","text":"<p>\u9ede\u9078 <code>RGB to DVI Video Encoder</code> IP\uff0c <code>output port</code> <code>TMDS</code> \u7684 <code>+</code> \u5c55\u958b\u6240\u6709\u7684 <code>output port</code> \uff0c\u9078\u53d6\u5168\u90e8\u5f8c\u9ede\u53f3\u9375 <code>make External</code> \u3002</p> <p> `</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-9","title":"Step 9","text":"<p>\u624b\u52d5\u9023\u7dda</p> <ol> <li><code>axi_vdma_0: M_AXIS_MM2S</code> -&gt; <code>v_axi4s_vid_out_0: video_in</code></li> <li><code>v_tc_0: vtiming_out</code> -&gt; <code>v_axi4s_vid_out_0: vtiming_in</code></li> <li><code>v_axi4s_vid_out_0: vid_io_out</code> -&gt; <code>rgb2dvi_0: RGB</code></li> <li><code>v_axi4s_vid_out_0: vtg_ce</code> -&gt; <code>v_tc_0: gen_clken</code></li> </ol>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-10","title":"Step 10","text":"<p>\u52a0\u5165 <code>Clocking Wizard</code> ,<code>AXI Interrupt Controller</code> \u5169\u500b IP \u3002</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-11","title":"Step 11","text":"<p>\u9ede\u64ca <code>Clocking Wizard</code> &gt; <code>Output Clocks</code> &gt; <code>Requested</code> \u8abf\u70ba <code>71.5</code> \uff0c\u5f80\u4e0b\u6ed1\u5f8c\uff0c\u53d6\u6d88 <code>reset</code> ,<code>locked</code></p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-12","title":"Step 12","text":"<p>\u624b\u52d5\u63a5\u7dda</p> <ol> <li><code>PS Block: FCLK_CLK0</code> -&gt; <code>clk_wiz_0: clk_in1</code></li> <li><code>PS Block: FCLK_CLK0</code> -&gt; <code>axi_vdma_0: s_axis_s2mm_aclk</code></li> <li><code>clk_wiz_0: clk_out1</code> -&gt; <code>v_tc_0: clk</code></li> <li><code>clk_wiz_0: clk_out1</code> -&gt; <code>axi_vdma_0: m_axis_mm2s_aclk</code></li> <li><code>clk_wiz_0: clk_out1</code> -&gt; <code>rgb2dvi_0: PixelClk</code></li> <li><code>clk_wiz_0: clk_out1</code> -&gt; <code>v_axi4s_vid_out_0: aclk</code></li> </ol>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-13","title":"Step 13","text":"<p>\u52a0\u5165<code>Concat</code></p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-14","title":"Step 14","text":"<p>\u624b\u52d5\u63a5\u7dda</p> <ol> <li><code>axi_vdma_0: mm2s_introut</code> -&gt; <code>xlconcat_0: In0</code></li> <li><code>axi_vdma_0: s2mm_introut</code> -&gt; <code>xlconcat_0: In1</code></li> <li><code>xlconcat_0: dout</code> -&gt; <code>axi_intc_0: intr</code></li> <li><code>axi_intc_0: interrupt \u9ede\u958b irq</code> -&gt; <code>PS Block: IRQ_F2P</code></li> </ol> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-15","title":"Step 15","text":"<p>\u9ede\u64ca  <code>Run Connection Automation</code> \u5169\u6b21\u3002</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-16","title":"Step 16","text":"<p>\u52a0\u5165 <code>Constant</code> \u4e14 <code>Const Val</code> \u8a2d\u70ba 1</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-17","title":"Step 17","text":"<p>\u624b\u52d5\u9023\u7dda <code>xlconstant_0: dout</code> -&gt; <code>v_tc_0: clken,resetn</code> <code>xlconstant_0: dout</code> -&gt; <code>v_axi4s_vid_out_0: aclken,aresetn,vid_io_out_ce</code></p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-18","title":"Step 18","text":"<p>\u52a0\u5165 <code>AXI GPIO</code> \u9078\u64c7 <code>btns 4bits</code>\uff0c\u4e26\u6309 <code>Run Connection Automation</code>\uff0c\u8b93 <code>vivado</code> \u81ea\u52d5\u63a5\u7dda\u3002</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-19","title":"Step 19","text":"<p>\u606d\u559c\u5b8c\u6210\u4e86 <code>block design</code> \u3002</p> <p></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-20","title":"Step 20","text":"<p>\u6309 <code>validation</code> \u78ba\u8a8d\u63a5\u7dda\u7121\u8aa4\uff0c\u6309 <code>Creat HDL Wrapper</code> \u7522\u751f <code>verilog code</code> \u3002</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-21","title":"Step 21","text":"<p>\u52a0\u5165 <code>constrains gile</code> : <code>HDMI.xdc</code>\u3002</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-22","title":"step 22","text":"<p><code>Generate Bitstream</code> \u5f8c Export <code>.bit</code> \u6a94\u548c <code>.tcl</code> \u6a94</p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#step-23","title":"step 23","text":"<p>\u958b\u555f <code>Jupyter notebook</code></p>"},{"location":"Hardware-Software-Codesign/Part9-HDMI/#reference","title":"Reference","text":"<p>https://github.com/Xinyang-ZHANG/PYNQ-Z2/blob/main</p> <p>Xilinx Video Series and Blog Posts</p> <p>Video Series 23: Generate a video output on Pynq-Z2 HDMI out</p> <p>Video Series 24: Using the AXI VDMA in Triple Buffer Mode</p>"},{"location":"Vivado-Installation-Guide/","title":"Vivado Installation Guide","text":""},{"location":"Vivado-Installation-Guide/#part-1-amd-account-registration","title":"Part 1. AMD account registration","text":"<ol> <li> <p>\u524d\u5f80 AMD \u5b98\u7db2 \u7533\u8acb\u5e33\u865f</p> <p></p> </li> <li> <p>\u7533\u8acb\u597d AMD \u5e33\u865f\u4e26\u767b\u5165\u5f8c\uff0c\u56de\u5230\u5b98\u7db2\u9ede\u9078\u4e0a\u65b9 <code>\u4e0b\u8f09\u8207\u652f\u63f4</code> -&gt; <code>Vivado ML \u958b\u767c\u5de5\u5177</code></p> <p></p> </li> <li> <p>\u9078\u64c7 <code>2023.2</code> \u7248\u672c\uff0c\u4e4b\u5f8c\u7684\u6559\u5b78\u57fa\u672c\u4e0a\u90fd\u4ee5 <code>2023.2</code> \u70ba\u4e3b</p> <p> </p> <p>\u586b\u5beb\u5b8c\u8cc7\u8a0a\u5f8c\u6309 Download</p> <p></p> </li> <li> <p>\u9ede\u958b\u525b\u525b\u4e0b\u8f09\u597d\u7684\u6a94\u6848\u4e26\u767b\u5165\u525b\u624d\u8a3b\u518a\u7684 AMD \u5e33\u865f</p> <p></p> <p>\u9078\u64c7 <code>Vitis</code> \u5b89\u88dd\u6574\u5957\u5de5\u5177\u5305\u542b\u8edf\u9ad4 <code>Vitis</code> \u786c\u9ad4 <code>Vivado</code> \u7684\u6574\u5408\u958b\u767c\u5957\u4ef6</p> <p></p> <p>\u6839\u64da\u81ea\u5df1\u4f7f\u7528\u7684 FPGA \u677f\u9078\u64c7\u5c0d\u61c9\u7684 Device:</p> <ul> <li><code>KV260</code> -&gt; Kria SOMs and Starter Kits</li> <li><code>Pynq-Z2</code> -&gt; SoC and 7 Series FPGAs</li> <li><code>Zedboard</code> -&gt; SoC and 7 Series FPGAs</li> </ul> <p>\u53ef\u4ee5\u53ea\u9078\u64c7\u4f60\u9700\u8981\u7528\u7684 FPGA \u677f\u53bb\u505a\u5b89\u88dd\uff0c\u5982\u679c\u4e5f\u5b89\u88dd Ultrascale \u6703\u4f7f\u7528\u5230\u8f03\u591a\u7684\u7a7a\u9593</p> <p></p> </li> <li> <p>\u5b89\u88dd\u8def\u5f91\u8acb\u4e00\u5b9a\u4e0d\u8981\u6709\u4e2d\u6587\u5728\u5167</p> <p></p> </li> <li> <p>\u7b49\u5f85\u4e0b\u8f09\u5b8c\u6210\u5c31\u5b89\u88dd\u597d Vivado \u4e86\uff0c\u606d\u559c\u4f60\u5f8c\u9762\u5c31\u662f\u75db\u82e6\u7684\u958b\u59cbd(`\uff65\u2200\uff65)b</p> </li> </ol>"},{"location":"Vivado-Installation-Guide/#part-2-fpga-board-file-installation","title":"Part 2. FPGA Board file installation","text":"<p>\u5982\u679c\u4e4b\u5f8c\u5efa\u7acb Project \u9078\u64c7 Boards \u6642\u6c92\u6709\u4f60\u6240\u4f7f\u7528\u7684 FPGA \u677f\uff0c\u8acb\u53c3\u8003\u4ee5\u4e0b\u6b65\u9a5f\u5b89\u88dd FPGA \u958b\u767c\u677f\u7684\u6a94\u6848\uff0c\u9019\u908a\u4ee5 Pynq-Z2 \u70ba\u4f8b\u3002</p> <ol> <li> <p>\u5047\u8a2d\u5728\u9078\u64c7\u677f\u5b50\u6642\u6c92\u6709\u770b\u5230 Pynq-Z2 \u7684 Board</p> <p></p> </li> <li> <p>\u524d\u5f80 Pynq-Z2 \u7684\u5b98\u7db2\u4e0b\u8f09 <code>FPGA Board File</code> \u548c <code>.XDC</code></p> <ul> <li> <p><code>Board File</code>: \u500b\u6a94\u6848\u80fd\u8b93\u4f60\u5728 Vivado \u88e1\u76f4\u63a5\u9078 PYNQ-Z2 \u9019\u584a\u677f\u5b50\u7576 target board\uff0c\u4e26\u81ea\u52d5\u586b\u5165\u6b63\u78ba\u7684\uff1a</p> <ul> <li>FPGA \u8173\u4f4d\u5c0d\u61c9\uff08\u4f8b\u5982 HDMI\u3001\u97f3\u8a0a\u3001LED\u3001Pmod \u63a5\u53e3\u7b49\uff09</li> <li>Zynq \u8655\u7406\u5668 preset \u8a2d\u5b9a\uff08\u5305\u62ec\u6642\u8108\u3001RAM \u914d\u7f6e\u7b49\uff09</li> </ul> </li> <li> <p><code>Master XDC</code>: \u5167\u90e8\u6709\u6240\u6709\u8173\u4f4d\u5c0d\u61c9\u7684 XDC \u6a94\u6848\uff0c\u8a72\u6a94\u6848\u6703\u544a\u77e5 compiler \u5c07 verilog \u5ba3\u544a port \u9023\u63a5\u5230\u5be6\u9ad4\u7684 pin \u8173\u4e0a\u3002</p> </li> </ul> <p></p> </li> <li> <p>\u5c07\u4e0b\u8f09\u597d\u7684\u6a94\u6848\u89e3\u58d3\u7e2e\uff0c\u4e26\u5c07 Borad File (.xdc\u4e0d\u7528) \u8cc7\u6599\u593e\u653e\u5165 Vivado \u7684 Board File \u8def\u5f91\u4e2d</p> <p>Vivado File path:</p> <p><code>C:\\Xilinx\\</code> &gt; <code>2023.2\\</code> &gt; <code>data\\</code> &gt; <code>xhub\\</code> &gt; <code>boards\\</code> &gt; <code>XilinxBoardStore\\</code> &gt; <code>boards\\</code> &gt; <code>Xilinx\\</code></p> <p></p> <p>\u4e4b\u5f8c\u6309\u4e0b <code>Refresh</code> \u6216\u662f\u91cd\u65b0\u6253\u958b Vivado \u5275\u5efa Project \u6642\u5c31\u80fd\u770b\u5230 Pynq-Z2 \u7684 Board \u4e86</p> <p></p> </li> </ol>"},{"location":"Vivado-Tutorial/","title":"Vivado-Tutorial","text":""},{"location":"Vivado-Tutorial/#_1","title":"\ud83d\udcd8 \u63a8\u85a6\u95b1\u8b80\u9806\u5e8f","text":"<ol> <li> <p>Part1-Vivado-Basic-Tutorial </p> </li> <li> <p>Part2-RTL-Design-and-Simulation </p> </li> <li> <p>Extra1-Linter</p> </li> <li> <p>Part3-FPGA-Design-Flow</p> </li> <li> <p>Extra2-Synthesis-and-Implementation-Strategies</p> </li> <li> <p>Extra3-Constraint</p> </li> <li> <p>Part4-IP-Package-and-Block-Design</p> </li> <li> <p>Extra4-Debugger</p> </li> </ol>"},{"location":"Vivado-Tutorial/Extra1-Linter/","title":"Extra1 Linter","text":"<p>\u5728 <code>2023.2</code> \u7248\u672c\u4e2d\uff0cXilinx \u65b0\u589e\u4e86 <code>RTL ANALYSIS</code> \u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u5354\u52a9\u6aa2\u67e5 RTL \u8a9e\u6cd5\uff0c Linter \u6703\u5206\u6790\u6240\u6709\u52a0\u5165 Design Sources \u7684 Verilog/VHDL \u6a94\u6848\uff1b\u6aa2\u67e5\u8a9e\u6cd5\u6b63\u78ba\u6027\u3001\u8a9e\u610f\u932f\u8aa4\u3001\u6f5b\u5728\u554f\u984c\uff08\u5982 combinational loop\u3001\u672a\u9023\u63a5\u7684\u8a0a\u865f\u7b49\uff09</p> <p></p> <ul> <li>\u4e0d\u7d93 Synthesis \u76f4\u63a5\u5728 <code>Open Elaborated Design</code> \u4e2d\u770b\u5230 RTL \u67b6\u69cb\u5716</li> <li>\u900f\u904e <code>Run Linter</code> \u5c0d\u5c55\u958b\u5f8c\u7684\u908f\u8f2f\u9032\u884c\u975c\u614b\u5206\u6790\uff08\u5982\uff1acombinational loop\u3001\u672a\u4f7f\u7528 bit\uff09</li> </ul> <p>NOTE: \u70ba\u4ec0\u9ebc\u6c92 Synthesis \u4e5f\u80fd\u770b\u5230\u96fb\u8def\u5716\uff1f</p> <p>Vivado \u7684 <code>Run Linter</code> \u548c <code>RTL Viewer</code> \u6240\u7522\u751f\u7684\u96fb\u8def\u5716\uff0c\u4e26\u4e0d\u662f\u5be6\u969b Synthesis \u7684\u7d50\u679c\uff0c\u800c\u662f\u900f\u904e Elaborated Design \u6240\u5efa\u7acb\u7684\u6a21\u7d44\u7d50\u69cb\u5716\u3002</p> <p>Elaborated Design \u662f Vivado \u5728 Functional Simulation \u968e\u6bb5\u6839\u64da\u539f\u59cb RTL \u7a0b\u5f0f\uff08Verilog/VHDL\uff09\u505a\u975c\u614b\u5206\u6790\u5f8c\uff0c \u5c07 <code>module</code>\u3001<code>always</code>\u3001<code>assign</code> \u7b49\u908f\u8f2f\u81ea\u52d5\u5efa\u69cb\u6210\u7d50\u69cb\u5316\u5716\u5f62\u3002 </p>"},{"location":"Vivado-Tutorial/Extra2-Synthesis-and-Implementation-Strategies/","title":"Extra2-Synthesis-and-Implementation-Strategies","text":"<p>Vivado \u5728\u57f7\u884c <code>Synthesis</code> \u548c <code>Implementation</code> \u6642\uff0c\u63d0\u4f9b\u4e86\u591a\u7a2e\u53ef\u9078\u7684 Strategy\uff08\u7b56\u7565\uff09\uff0c \u9019\u4e9b\u7b56\u7565\u6703\u5f71\u97ff\u5408\u6210\u8207\u5be6\u4f5c\u968e\u6bb5\u4f7f\u7528\u7684\u6f14\u7b97\u6cd5\u8207\u512a\u5316\u65b9\u5411\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u8cc7\u6e90\u4f7f\u7528\u7387\uff08LUT / FF / DSP \u4f7f\u7528\u91cf\uff09</li> <li>Timing \u6536\u6582\u80fd\u529b\uff08\u662f\u5426\u66f4\u5bb9\u6613\u9054\u6210\u6642\u5e8f\u8981\u6c42\uff09</li> <li>\u529f\u8017\u6700\u4f73\u5316\uff08\u4f4e\u529f\u8017 vs \u9ad8\u6027\u80fd\uff09</li> <li>\u7de8\u8b6f\u6642\u9593\u9577\u77ed</li> </ul> <p>\u9019\u4e9b\u7b56\u7565\u6703\u6839\u64da\u8a2d\u8a08\u7684\u4e0d\u540c\u9700\u6c42\uff08\u4f8b\u5982\u9ad8\u901f vs \u5c0f\u9762\u7a4d\uff09\u9032\u884c\u512a\u5316\u8abf\u6574\u3002</p>"},{"location":"Vivado-Tutorial/Extra2-Synthesis-and-Implementation-Strategies/#synthesis","title":"Synthesis","text":""},{"location":"Vivado-Tutorial/Extra2-Synthesis-and-Implementation-Strategies/#implementation","title":"Implementation","text":""},{"location":"Vivado-Tutorial/Extra3-Constraint/","title":"Extra3-Constraint","text":"<p>\u672c\u7ae0\u5c07\u4ecb\u7d39 PYNQ-Z2 \u958b\u767c\u677f\u5c0d\u61c9\u7684 <code>.xdc</code>\uff08constraints file\uff09\u4f7f\u7528\u65b9\u5f0f\u3002  </p> <p><code>XDC</code>\uff08Xilinx Design Constraints\uff09\u6a94\u6848\u7528\u4f86\u544a\u8a34 Vivado\uff1a \u54ea\u4e9bHDL\u5167\u7684 signal \u8981\u9023\u63a5\u5230 FPGA \u7684\u5be6\u9ad4 pin \u8173\uff0c\u4ee5\u53ca\u9019\u4e9b\u8173\u4f4d\u7684 I/O \u6a19\u6e96\u3001\u6642\u8108\u689d\u4ef6\u7b49\u3002</p>"},{"location":"Vivado-Tutorial/Extra3-Constraint/#extra31-constraint","title":"Extra3.1   \u70ba\u4ec0\u9ebc\u9700\u8981 constraint\uff1f","text":"<p>\u5728\u5be6\u9ad4 FPGA \u4e0a\uff0c<code>module</code> \u4e2d\u7684 I/O port \u4e26\u4e0d\u6703\u81ea\u52d5\u5c0d\u61c9\u5230\u958b\u767c\u677f\u4e0a\u7684\u5f15\u8173\u4f4d\u7f6e\u3002 \u5fc5\u9808\u900f\u904e <code>.xdc</code> \u9650\u5236\u6a94\uff0c\u5c07 RTL \u4e2d\u7684 port \u9023\u63a5\u5230\u5177\u9ad4\u7684 pin \u7de8\u865f\uff08e.g. H17\uff09\u3002</p>"},{"location":"Vivado-Tutorial/Extra3-Constraint/#extra32-pynq-z2-constraint","title":"Extra3.2  PYNQ-Z2 \u7684 constraint \u4f86\u6e90","text":"<p>PYNQ-Z2 \u7684 constraint\u4e0b\u8f09\u9023\u7d50 </p> <p>\u4f7f\u7528\u6642\u8acb\u8a18\u5f97\uff1a</p> <ul> <li>\u53d6\u6d88\u8a3b\u89e3\uff08\u79fb\u9664 <code>#</code>\uff09\u4f60\u9700\u8981\u4f7f\u7528\u7684\u8173\u4f4d\u8a2d\u5b9a</li> <li>\u4fee\u6539 port \u540d\u7a31\uff08<code>get_ports { XXX }</code>\uff09\u4ee5\u7b26\u5408\u4f60 RTL \u88e1\u7684 top-level signal \u540d\u7a31</li> </ul> <p>### 1. Clock \u4f86\u6e90</p> <pre><code>```xdc\nClock signal 125 MHz\n\nset_property -dict { PACKAGE_PIN H16   IOSTANDARD LVCMOS33 } [get_ports { sysclk }];\ncreate_clock -add -name sys_clk_pin -period 8.00 -waveform {0 4} [get_ports { sysclk }];\n```\n\n\u7d14\u786c\u9ad4 Design \u6642\uff0cPYNQ-Z2 \u7684\u4e3b\u8981 Clock \u8f38\u5165\u70ba 125 MHz\uff0c\u8173\u4f4d\u70ba H16\n\u4f60\u53ef\u4ee5\u5c07 **sysclk** \u6539\u6210 RTL \u4e2d\u7684 port \u540d\u7a31\uff08e.g. clk\uff09\u3002\n\n\u8edf\u786c\u9ad4 Codesign \u6642\uff0c Clock \u901a\u5e38\u90fd\u6703\u4f7f\u7528\u5230 Zynq Processing System (PS) \u532f\u51fa\u7684 FCLK\uff0c\u6b64\u6642\u5247\u4e0d\u9700\u8981\u518d\u4f7f\u7528 **set_property** \uff0c\u4f86\u6307\u5b9aClock\u8173\u4f4d\uff0ccreate_clock \u7d04\u675f Vivado \u4e5f\u6703\u81ea\u52d5\u5e6b\u4f60\u751f\u6210\u3002\n</code></pre> <p>### 2.  Switches</p> <pre><code>```xdc\n##Switches\n#set_property -dict { PACKAGE_PIN M20   IOSTANDARD LVCMOS33 } [get_ports { sw[0] }];\n#set_property -dict { PACKAGE_PIN M19   IOSTANDARD LVCMOS33 } [get_ports { sw[1] }];\n```\n\n\u677f\u4e0a\u7684\u5169\u500b\u5be6\u9ad4\u5207\u63db\u958b\u95dc\uff08SW0, SW1\uff09\uff0c\u5c0d\u61c9\u8173\u4f4d\u70ba M20 \u8207 M19\nRTL \u4e2d\u82e5\u6709 input [1:0] sw \u53ef\u76f4\u63a5\u53d6\u6d88\u8a3b\u89e3\u4e26\u4f7f\u7528\u3002\n</code></pre> <p>### 3. \u5176\u9918\u5247\u4ee5\u4e0a\u8ff0\u5373\u53ef\u985e\u63a8\u4f7f\u7528</p>"},{"location":"Vivado-Tutorial/Extra4-Debugger/","title":"Extra4-Debugger","text":"<p>\u672c\u7ae0\u5c07\u4ecb\u7d39\u5982\u4f55\u5728 Vivado \u4e2d\u4f7f\u7528 ILA\uff08Integrated Logic Analyzer\uff09 \u9032\u884c FPGA \u786c\u9ad4\u5075\u932f\u3002 \u900f\u904e ILA \u5de5\u5177\uff0c\u6211\u5011\u53ef\u4ee5\u5728\u96fb\u8def\u5be6\u969b\u904b\u884c\u65bc FPGA \u4e0a\u6642\uff0c\u89c0\u5bdf\u5167\u90e8\u8a0a\u865f\u7684\u8b8a\u5316\uff0c\u5354\u52a9\u6392\u9664\u6a21\u64ec\u968e\u6bb5\u7121\u6cd5\u6355\u6349\u7684\u554f\u984c\u3002  </p>"},{"location":"Vivado-Tutorial/Extra4-Debugger/#extra-41-ila-block-design","title":"Extra 4.1 ILA Block Design","text":"<ol> <li> <p>\u6cbf\u7528 <code>Part4-2</code> \u7684 Block Design\uff0c\u5728 Vivado \u63d0\u4f9b\u7684 IP Catalog \u4e2d\u641c\u5c0b <code>ILA</code>\uff0c\u5c07\u5176\u52a0\u5165\u8a2d\u8a08\u4e2d\u3002</p> <p></p> </li> <li> <p>\u5c0d <code>ILA</code> \u9ede\u53f3\u9375\u9078\u53d6 <code>Customize</code>\u5f8c\uff0c\u6839\u64da\u4ee5\u4e0b\u6b65\u9a5f\u8a2d\u5b9a</p> <p> </p> </li> <li> <p>\u4f9d\u7167\u4e0b\u5716\u65b9\u5f0f\u5c0d <code>ILA</code> \u505a\u9023\u63a5\uff0c\u63a5\u5b8c\u7dda\u5f8c\u505a\u4e00\u6b21 <code>Regenerate Layout</code> \u548c <code>Validate Design</code> \uff0c\u4ee5\u78ba\u8a8d\u6c92\u6709\u932f\u8aa4  </p> <p></p> </li> <li> <p>\u9a57\u8b49\u6c92\u554f\u984c\u5f8c\uff0c\u5728\u5de6\u65b9 Design Sources \u5167\u7684 block design \u9805\u76ee\u6309\u53f3\u9375\uff0c\u9078\u64c7 <code>Create HDL Wrapper</code> \u7136\u5f8c\u57f7\u884c <code>Synthesis -&gt; Implementation -&gt; Generate Bitstream</code> \u4e26\u5c07 Bitstream file \u71d2\u9304\u9032 FPGA</p> </li> <li> <p>\u53ef\u5148\u8df3\u5230 <code>Extra 4.3</code> \u89c0\u770b <code>ILA Waveform</code>\uff0c<code>Extra 4.2 Mark Debug</code> \u70ba\u53e6\u4e00\u7a2e\u8a2d\u5b9a\u65b9\u6cd5</p> </li> </ol>"},{"location":"Vivado-Tutorial/Extra4-Debugger/#extra-42-mark-debug","title":"Extra 4.2 Mark Debug","text":"<ol> <li> <p>\u5c07 <code>Part4-2</code> \u7684\u96fb\u8def\u62ff\u53bb\u5408\u6210\u5f8c\uff0c\u9ede\u9078\u5de6\u5074 <code>Open Synthesized Design -&gt; Schematic</code> </p> <p></p> </li> <li> <p>\u5047\u8a2d\u6211\u5011\u8981\u89c0\u5bdf <code>RGB LED \u7d66\u51fa\u7684\u4e09\u500b Output</code>\u3001\u4ee5\u53ca <code>PWM_Decoder \u7684 sw \u8a0a\u865f</code>\uff0c\u5c07 Schematic \u4e2d <code>design_1</code> \u5de6\u4e0a\u89d2\u7684 + \u9ede\u958b\u4e26\u627e\u5230\u6211\u5011\u8981\u770b\u7684\u56db\u689d\u8a0a\u865f\u7dda\uff0c\u6309\u4f4f Ctrl \u9078\u64c7\u9019\u56db\u689d\u7dda\u4f7f\u5176\u8b8a\u6210\u85cd\u8272\u5f8c\uff0c\u5728\u5176\u4e2d\u4e00\u689d\u7dda\u4e0a\u6309\u53f3\u9375\uff0c\u9ede\u9078 <code>Mark Debug</code></p> <p> </p> </li> <li> <p>\u9ede\u9078\u5de6\u5074 <code>Open Synthesized Design -&gt; Set Up Debug</code> </p> <p> </p> </li> <li> <p>\u5728 <code>Clock Domain Undefined</code> \u7684\u5730\u65b9\u53f3\u9375\uff0c\u9078\u64c7 <code>Select Clock Domain</code> </p> <p></p> </li> <li> <p>\u9078\u64c7 <code>clk_IBUF</code></p> <p> </p> <p>\u5b8c\u6210\u5f8c\u5982\u4e0b\u5716  </p> <p></p> </li> <li> <p>\u8a2d\u5b9a <code>Sample Data Width</code> </p> <p></p> </li> <li> <p>\u8a2d\u5b9a\u5b8c\u6210\u5f8c\u518d\u91cd\u65b0 Synthesize \u4e00\u6b21\uff0c\u518d\u6253\u958b Schematic \u6703\u767c\u73fe\u591a\u4e86\u5169\u500b Debug Blocks  </p> <p></p> </li> <li> <p><code>Implementation -&gt; Generate Bitstream</code>\uff0c\u4e26\u71d2\u9304\u5230 FPGA \u4e0a</p> </li> </ol>"},{"location":"Vivado-Tutorial/Extra4-Debugger/#extra-43-ila-waveform","title":"Extra 4.3 ILA Waveform","text":"<ol> <li> <p><code>Extra 4.1</code> \u548c <code>Extra 4.2</code> \u7684\u96fb\u8def\u71d2\u5165\u9032\u53bb FPGA \u5f8c\uff0c<code>Debug Probes</code> \u8996\u7a97\u5c07\u6703\u958b\u555f\uff0c\u82e5\u6c92\u6709\u7684\u8a71\u8acb\u9ede\u9078 <code>Window -&gt; Debug Probes</code> </p> <p></p> </li> <li> <p>\u63a5\u8457\u6211\u5011\u8981\u8a2d\u5b9a Trigger \u689d\u4ef6\uff0c\u5047\u8a2d\u6211\u5011 Trigger \u7684\u689d\u4ef6\u70ba sw == 2'b01 \u5728 Trigger Setup \u7684\u8996\u7a97\u9ede\u9078 + \u865f\u5c07 sw \u8a0a\u865f\u52a0\u5165\uff0c\u7136\u5f8c\u5c0d\u5176\u505a\u8a2d\u5b9a </p> </li> <li> <p>\u6b64\u6642\u5148\u628a FPGA \u7248\u4e0a\u7684 <code>sw0</code> \u548c <code>sw1</code> \u90fd\u64a5\u5230\u96f6\u7684\u4f4d\u5b50\u5f8c\uff0c\u9ede\u9078 <code>Run Trigger for this ILA core</code> </p> <p> </p> <p>\u82e5\u4f60\u6709\u7167\u4e0a\u65b9\u6240\u8aaa\u5148\u628a FPGA \u7248\u4e0a\u7684 <code>sw0</code> \u548c <code>sw1</code> \u90fd\u64a5\u5230\u96f6\u7684\u4f4d\u5b50\uff0c\u6b64\u6642\u6703\u5728 <code>Wait for Trigger</code> \u7684\u72c0\u614b\uff0c\u6b64\u6642 <code>ILA</code> \u6703\u4e00\u76f4\u7d00\u9304\u6578\u503c\u76f4\u5230\u6211\u5011\u628a <code>sw0</code> \u64a5\u52301\u7684\u4f4d\u7f6e\u5c31\u6703\u88ab\u89f8\u767c</p> <p></p> <p><code>sw0</code> \u64a5\u52301\u7684\u4f4d\u5b50\u96a8\u5373\u89f8\u767c\uff0c\u4e26\u5728\u4e0a\u65b9\u6ce2\u578b\u5716\u986f\u793a\u89f8\u767c\u524d\u5f8c\u7684\u6ce2\u578b  </p> <p> </p> </li> </ol>"},{"location":"Vivado-Tutorial/Extra4-Debugger/#capture-mode-settings","title":"Capture Mode Settings","text":"\u540d\u7a31 \u610f\u601d Sample of data depth \u5728\u5efa\u7acb ILA core \u6642\uff0c\u8a2d\u5b9a\u7684 Sample of data depth\u3002\u5b83\u6703\u8b8a\u6210 ILA \u7684\u786c\u9ad4\u53c3\u6578 <code>C_DATA_DEPTH</code>\u3002 Window data depth \u5728 ILA \u5be6\u969b\u6293\u8cc7\u6599\u6642\uff0c\u4e00\u6b21\u8981\u6293\u591a\u5c11\u7b46\u8cc7\u6599\u3002\u4e0a\u9650\u5c31\u662f sample of data depth\u3002 Trigger position in window \u8a2d\u5b9a\u300c\u89f8\u767c\u9ede\u5728\u9019\u6b21\u64f7\u53d6\u7684\u54ea\u500b\u4f4d\u7f6e\u300d\uff0c\u9019\u6703\u6c7a\u5b9a\u64f7\u53d6\u591a\u5c11\u8cc7\u6599\u662f\u5728\u300c\u89f8\u767c\u9ede\u4e4b\u524d\u300d\u8207\u300c\u89f8\u767c\u9ede\u4e4b\u5f8c\u300d\u3002 <ol> <li> <p><code>ILA IP</code> \u81ea\u8a02\u6642\u53ef\u4ee5\u9078\u64c7 <code>Sample Data Width</code>\uff0c\u6df1\u5ea6\u958b\u5f97\u8d8a\u5927\uff0c\u4f7f\u7528\u7684 <code>FPGA BRAM</code> \u8cc7\u6e90\u5c31\u8d8a\u591a\uff0c <code>ILA IP</code> \u5132\u5b58 Capture \u7684\u8cc7\u6599\u4e3b\u8981\u5c31\u662f\u4f7f\u7528 <code>BRAM</code> </p> <p></p> </li> <li> <p><code>ILA</code> \u958b\u555f\u5f8c\u53ef\u4ee5\u900f\u904e\u8abf\u6574\u5de6\u4e0b\u89d2\u7684 <code>Window data depth</code> \u6216 <code>Trigger postition in window</code> \u4f86\u53bb\u8abf\u6574\u4f60\u8981\u7d00\u9304 Trigger \u524d\u5f8c\u591a\u5c11\u7684\u8cc7\u6599  </p> <p></p> </li> <li> <p>For Example:  </p> <p> </p> <p></p> </li> </ol>"},{"location":"Vivado-Tutorial/Extra4-Debugger/#trigger-mode-settings","title":"Trigger Mode Settings","text":"<ol> <li> <p>\u900f\u904e <code>+</code> \u865f\u53ef\u4ee5\u589e\u52a0 Trigger \u7684\u689d\u4ef6\uff0c\u53ef\u4ee5\u8907\u6578\u689d Trigger \u689d\u4ef6\u540c\u6642\u5b58\u5728</p> <p></p> </li> <li> <p>\u9ede\u9078\u4e0a\u65b9 <code>\u908f\u8f2f\u9598</code> \u53ef\u4ee5\u9078\u64c7\u4e0b\u65b9\u7684\u689d\u4ef6\u8981\u5728\u5982\u4f55\u7684 Boolean \u689d\u4ef6\u4e0b\u767c\u751f Trigger     </p> </li> </ol> <p>\ud83d\udccc Note\uff1a  </p> <ul> <li>\u82e5\u8a0a\u865f\u70ba\u9ad8\u901f clock domain\uff0c\u5efa\u8b70\u5148\u7d93\u904e D Flip-Flop \u9032\u884c\u89f8\u767c\u5ef6\u9072\u518d\u63a5\u5165 ILA  </li> <li>ILA \u5fc5\u9808\u7531 free-running clock \u9a45\u52d5\uff0c\u78ba\u4fdd\u6642\u8108\u4e0d\u6703\u88ab gating\u3001reset\u3001\u6216\u63a7\u5236\u908f\u8f2f\u4e2d\u65b7  </li> <li>\u907f\u514d\u4f7f\u7528 gated clock \u6216\u689d\u4ef6\u6027 enable \u7684 clock \u4f5c\u70ba ILA \u7684 clock source  </li> <li>\u82e5\u89c0\u5bdf\u8de8 clock domain \u8a0a\u865f\uff0c\u8acb\u5148\u5c07\u5176\u540c\u6b65\u8655\u7406\u5f8c\u518d\u63a5\u5165 ILA\uff0c\u4ee5\u907f\u514d metastability</li> </ul> <p>\ud83d\udccc Free-running clock\uff1a</p> <ul> <li>\u4e0d\u6703\u88ab\u8a2d\u8a08\u4e2d\u7684\u63a7\u5236\u8a0a\u865f\uff08\u5982 enable/reset\uff09\u4e2d\u65b7\u7684\u6642\u8108  </li> <li>\u8207\u88ab\u89c0\u5bdf\u8a0a\u865f\u5728\u540c\u4e00\u500b clock domain \u6216\u53ef\u88ab\u540c\u6b65\u8de8\u57df  </li> </ul> <p>Free-running clock Example in PYNQ-Z2 :</p> <ul> <li>\u7cfb\u7d71\u4e3b\u6642\u8108( H16 pin in PYNQ-Z2 ): clk_125MHz  </li> <li>Zynq PS \u9001\u51fa\u7684 FCLK_CLK0</li> </ul>"},{"location":"Vivado-Tutorial/Part1-Vivado-Basic-Tutorial/","title":"Part1 Vivado Basic Tutorial","text":""},{"location":"Vivado-Tutorial/Part1-Vivado-Basic-Tutorial/#part-11-create-vivado-project","title":"Part 1.1 Create Vivado Project","text":"<ol> <li> <p>\u958b\u555f Vivado \u4e26\u4e14\u6309\u4e0b Create Project</p> <p></p> </li> <li> <p>\u81ea\u884c\u9078\u64c7\u8def\u5f91\uff0c\u6ce8\u610f\u8def\u5f91\u4e0d\u80fd\u51fa\u73fe\u4e2d\u6587</p> <p></p> </li> <li> <p>\u9078\u64c7 RTL project \uff0c\u82e5\u6709\u5beb\u597d\u7684 RTL code \u5247\u4e0d\u5fc5\u52fe\u9078 <code>Do not specify sources at this time</code>\uff0c\u53ef\u4ee5\u5728\u6b64\u968e\u6bb5\u5c07 RTL code \u8ddf Design Constraint import \u9032 project \u4e2d</p> <p></p> </li> <li> <p>\u9078\u64c7 FPGA Board \uff0c\u9019\u908a\u4ee5 Pynq-Z2 \u505a\u8209\u4f8b</p> <p></p> </li> <li> <p>\u82e5\u6210\u529f\u5efa\u7acb Project \u5f8c\uff0cVivado \u5c07\u986f\u793a\u4e0b\u65b9\u7684\u756b\u9762</p> <p></p> </li> </ol>"},{"location":"Vivado-Tutorial/Part1-Vivado-Basic-Tutorial/#part-12-introduction-to-vivado-gui","title":"Part 1.2 Introduction to Vivado Gui","text":"<ol> <li> <p>Project Manager</p> <p>\u6574\u500b Project \u7684\u7ba1\u7406\u5305\u62ec\u4e86 : \u6a94\u6848\u7ba1\u7406 , \u5c08\u6848\u8a2d\u5b9a , IP\u8cc7\u6599\u593e\u8def\u5f91\u7b49\u7b49\uff0c\u5f8c\u7e8c\u5230\u4e86\u5176\u4ed6\u7684\u8a2d\u8a08\u968e\u6bb5(e.g. synthesis / implementation )\u8981\u56de\u5230\u4fee\u6539\u7a0b\u5f0f\u6216\u65b0\u589e\u6a94\u6848\u7684\u90e8\u5206\u90fd\u9700\u6309 <code>Project Manager</code> \u56de\u53bb\u624d\u53ef\u4ee5\u505a\u4fee\u6539\u3002</p> </li> <li> <p>IP Integrator</p> <p>\u4ee5 <code>Block Design</code> \u7684\u65b9\u5f0f\u4f86\u515c\u51fa\u6574\u500b\u7cfb\u7d71\uff0c\u4e14\u53ef\u4ee5\u52a0\u5165 Xilinx \u6216\u662f\u7b2c\u4e09\u65b9\u6240\u63d0\u4f9b\u7684 IP \u4f86\u5be6\u4f5c\u6574\u500b\u7cfb\u7d71\u7684\u8a2d\u8a08</p> </li> <li> <p>Synthesis</p> <p>\u5c07\u8a2d\u8a08\u597d\u7684\u786c\u9ad4\u63cf\u8ff0\u6a94\u5408\u6210\u6210 FPGA \u4e0a\u7531 CLB , Switch Box , Embedded Element \u7b49\u5143\u4ef6\u6240\u7d44\u6210\u7684\u5be6\u969b\u96fb\u8def</p> </li> <li> <p>Implementation</p> <p>\u5c07\u5408\u6210\u597d\u7684\u5be6\u969b\u96fb\u8def\u64fa\u653e\u5230 FPGA \u4e0a\u7684\u78ba\u5207\u4f4d\u7f6e (Floor &amp; Plan)</p> </li> <li> <p>Program and Debug</p> <p>Generate Bitstream : \u5c07 Implementation \u5b8c\u7684\u96fb\u8def\u7de8\u8b6f\u6210\u4e00\u500b\u71d2\u9304\u9032 FPGA \u7684\u4f4d\u5143\u4e32\u6d41\u6a94</p> </li> <li> <p>Sources</p> <p>\u7ba1\u7406 <code>Design Sources</code> , <code>Constraints</code> , <code>Simulation Sources</code></p> </li> <li> <p>Tcl Console</p> <p>\u4f7f\u7528\u6307\u4ee4\u7684\u65b9\u5f0f\u4f86\u5be6\u4f5c Project (\u5728 GUI \u4e0a\u6bcf\u500b\u9ede\u9078\u7684\u52d5\u4f5c\u5176\u5be6\u90fd\u6709\u76f8\u5c0d\u61c9\u7684\u4e00\u689d\u6307\u4ee4\uff0c\u4e5f\u6703\u986f\u793a\u5728\u9019\u908a)</p> <ul> <li> <p>Message : \u4efb\u4f55\u7cfb\u7d71\u8a0a\u606f, warning, error \u90fd\u6703\u986f\u793a\u5728\u9019\uff0c\u82e5\u5728\u5be6\u4f5c project \u6642\u5361\u95dc\u5efa\u8b70\u5148\u5230\u9019\u88e1\u627e\u554f\u984c</p> </li> <li> <p>Log : \u7d00\u9304 Project \u6b77\u7a0b</p> </li> <li> <p>Reports : \u56de\u5831 synthesis &amp; implementation \u5982 timimg, power, utilization \u7b49\u8cc7\u8a0a</p> </li> <li> <p>Design Runs : \u986f\u793a\u8edf\u9ad4\u73fe\u5728\u6b63\u5728\u9032\u884c\u4ec0\u9ebc\u6b65\u9a5f</p> </li> </ul> </li> <li> <p>Project Summary</p> <p>\u5b8c\u6210 Create Project \u5f8c\uff0c Vivado \u6703\u986f\u793a\u5982\u5716\u6240\u793a\u7684\u5c08\u6848\u57fa\u672c\u8a2d\u5b9a\uff0c\u5305\u62ec\uff1a</p> <ul> <li>Project name</li> <li>Project location</li> <li>Product family / Project part</li> <li>Top module name</li> </ul> </li> <li> <p>Board Part</p> <p>\u76ee\u524d\u4f7f\u7528\u7684 FPGA \u8cc7\u8a0a</p> </li> <li> <p>Synthesis &amp; Implementation Summary</p> <p>\u986f\u793a Synthesis \u8207\u5be6\u4f5c Implementation \u7684\u72c0\u614b\uff0c\u5305\u62ec\uff1a</p> <ul> <li>Status</li> <li>Warning \u8a0a\u606f\u6578\u91cf</li> <li>\u4f7f\u7528\u4e4b\u6676\u7247\u578b\u865f\uff08Part: xc7z020clg400-1\uff09</li> </ul> </li> </ol>"},{"location":"Vivado-Tutorial/Part2-RTL-Design-and-Simulation/","title":"Part2 RTL Design Simulation","text":"<p>\u672c\u7bc0\u5c07\u4ecb\u7d39\u5982\u4f55\u5728 Vivado \u4e2d\u532f\u5165\u5df2\u5beb\u597d\u7684 RTL \u7a0b\u5f0f\u8207 Testbench\uff0c\u4e26\u9032\u884c\u6a21\u64ec\u9a57\u8b49\u3002</p> <p>\u958b\u59cb\u524d\u8acb\u5148\u53c3\u8003 Part1 Vivado Basic Tutorial \u5efa\u7acb\u4e00\u500b Vivado Project</p> <p>\u5047\u8a2d\u6211\u5011\u5df2\u7d93\u6709\u4e00\u500b\u7c21\u55ae\u7684\u52a0\u6cd5\u5668\u7a0b\u5f0f <code>adder.v</code>\uff0c\u4ee5\u53ca\u5c0d\u61c9\u7684 Testbench <code>tb.v</code>\uff1a</p> adder.v <pre><code>module adder(\n    input clk,\n    input rst,\n    input [7:0] a,\n    input [7:0] b,\n    output reg  [7:0]   c\n    );\n\nalways @(posedge clk or posedge rst) begin\n   if (rst)\n     c &lt;= 0;\n   else\n     c &lt;= a + b;\n end\n\nendmodule\n</code></pre> tb.v <pre><code>module tb ();\n    //Inputs\n    reg clk;\n    reg rst;\n    reg [7:0] a;\n    reg [7:0] b;\n    //Output\n    wire [7:0] c;\n\n    adder adder_i   (\n        .clk(clk),\n        .rst(rst),\n        .a(a),\n        .b(b),\n        .c(c)\n    );\n\n    initial begin\n        //Initialize\n        clk = 0;\n        rst = 0;\n        a = 0;\n        b = 0;\n        #10;\n        rst = 1;\n        #10;\n        rst = 0;\n        #100;\n        a = 4;\n        b = 7;\n        #10;\n        a = 8;\n        b = 17;\n    end\n\n    always #5 clk = ~clk ;\n\nendmodule\n</code></pre>"},{"location":"Vivado-Tutorial/Part2-RTL-Design-and-Simulation/#part-21-open-project-and-add-source-file","title":"Part 2.1 Open Project and Add Source File","text":"<ol> <li> <p>\u958b\u555f Vivado\uff0c\u9ede\u9078\u5de6\u908a\u9078\u55ae\u4e2d\u7684 <code>Open Project</code></p> </li> <li> <p>\u627e\u5230 Project \u7684\u8cc7\u6599\u593e\uff0c\u9078\u53d6\u526f\u6a94\u540d\u70ba <code>.xpr</code> \u7684\u6a94\u6848\uff08\u4f8b\u5982 <code>project_1.xpr</code>\uff09\u4e26\u958b\u555f</p> <p></p> </li> <li> <p>\u5728 Flow Navigator \u4e2d\u9ede\u9078 <code>Project Manager</code> \u2192 <code>Add Sources</code> \u6216\u5f9e <code>Source</code> \u5340\u584a\u9ede\u9078 <code>+</code></p> <p></p> </li> <li> <p>Add Source \u9078\u55ae\uff1a</p> </li> </ol> <p>\u7576\u4f60\u9ede\u9078 <code>Add Sources</code> \u5f8c\uff0c\u6703\u51fa\u73fe\u5982\u4e0b\u5716\u7684\u756b\u9762\uff0cVivado \u63d0\u4f9b\u4e09\u7a2e\u4e0d\u540c\u985e\u578b\u7684\u6a94\u6848\u52a0\u5165\u65b9\u5f0f\uff1a</p> <ul> <li> <p><code>Add or create constraints</code></p> <p>\u7528\u4f86\u65b0\u589e\u6216\u5efa\u7acb <code>.xdc</code> \u6a94\u6848\uff08\u7d04\u675f\u6a94\uff09\uff0c\u6307\u5b9a IO \u8173\u4f4d\u8207\u6642\u5e8f\u689d\u4ef6\u3002\u5e38\u5728\u5c08\u6848\u5f8c\u671f\u6216\u5be6\u4f5c\u968e\u6bb5\u4f7f\u7528\u3002</p> </li> <li> <p><code>Add or create design sources</code></p> <p>\u52a0\u5165\u4f60\u7684 RTL \u7a0b\u5f0f\uff08<code>.v</code>\u3001<code>.vhdl</code>\uff09\u3002</p> </li> <li> <p><code>Add or create simulation sources</code></p> <p>\u52a0\u5165 Testbench \u6a94\u6848\uff08\u4f8b\u5982 <code>tb.v</code>\uff09\uff0c\u9019\u4e9b\u6a94\u6848\u53ea\u6703\u7528\u65bc\u6a21\u64ec\u968e\u6bb5\uff0c\u4e0d\u6703\u53c3\u8207 Synthesis \u3002</p> <ol> <li> <p>\u5728\u672c\u7bc0\u4e2d\u5148\u9078\u64c7 <code>Add or create design sources</code></p> <p></p> </li> <li> <p>\u5c07 <code>RTL</code> \u8cc7\u6599\u593e\u5167\u7684 <code>adder.v</code> \u52a0\u5165\u7576\u4e2d\uff0c\u4e4b\u5f8c\u9ede\u9078 <code>Finish</code></p> <p></p> </li> <li> <p>\u518d\u91cd\u8907\u64cd\u4f5c\u4e00\u6b21\u9078\u64c7 <code>Add or create simulation sources</code></p> <p></p> </li> <li> <p>\u5c07 <code>RTL</code> \u8cc7\u6599\u593e\u5167\u7684 <code>tb.v</code> \u52a0\u5165\u7576\u4e2d\uff0c\u4e4b\u5f8c\u9ede\u9078 <code>Finish</code></p> <p></p> </li> </ol> <p>Note:</p> <p>\u53ef\u4ee5\u900f\u904e Simulation Set \u7ba1\u7406\u591a\u7d44 Simulation \u8a2d\u5b9a\uff0c\u4f8b\u5982\u4e0d\u540c\u7684 Testbench \u6216\u6a21\u64ec\u689d\u4ef6\u3002</p> <p>\u672c\u7bc0\u4f7f\u7528\u9810\u8a2d\u7684 <code>sim_1</code>\uff0c\u4e26\u5c07 RTL \u8cc7\u6599\u593e\u5167\u7684 <code>tb.v</code> \u52a0\u5165\u5373\u53ef\u3002</p> <p>\u672a\u4f86\u5728\u8a2d\u8a08\u8f03\u5927\u578b\u7684\u96fb\u8def\u6642\uff0c\u53ef\u4ee5\u6839\u64da\u4e0d\u540c\u7684 module \u5efa\u7acb\u5c0d\u61c9\u7684 Simulation Set\uff0c\u65b9\u4fbf\u9032\u884c\u6a21\u7d44\u5316\u6e2c\u8a66\u8207\u9664\u932f\u3002</p> </li> </ul>"},{"location":"Vivado-Tutorial/Part2-RTL-Design-and-Simulation/#part-22-run-simulation","title":"Part 2.2 Run Simulation","text":"<ol> <li> <p>\u78ba\u8a8d\u6a21\u64ec\u76f8\u95dc\u8a2d\u5b9a\u662f\u5426\u6b63\u78ba\uff1a\u9ede\u9078\u5de6\u4e0a\u89d2\u7684 <code>Project Manager</code> \uff0c\u518d\u9ede\u9078 <code>Settings</code></p> <p><code>Simulation set</code> \u7684\u5730\u65b9\u9078\u64c7\u525b\u525b\u8a2d\u5b9a\u7684 <code>sim_1</code></p> <p></p> <ul> <li>Target simulator: \u9078\u64c7 <code>Vivado Simulator</code></li> <li>Simulator language: \u9078\u64c7 <code>Mixed</code> \u6216 <code>Verilog</code></li> <li>Simulation set: \u9810\u8a2d\u70ba <code>sim_1</code>\uff0c\u53ef\u5207\u63db\u6210\u5176\u4ed6 Simulation Set</li> <li>Simulation top module name: \u8f38\u5165\u4f60\u7684 Testbench \u540d\u7a31\uff08\u4f8b\u5982 <code>tb</code>\uff09</li> </ul> <p>NOTE:</p> <p>\u4e00\u500b Simulation Set\uff08\u4f8b\u5982 sim_1\uff09\u662f Vivado \u4e2d\u7528\u4f86\u8a2d\u5b9a\u4e00\u7d44 simulation \u74b0\u5883\u7684\u96c6\u5408\u3002 \u6bcf\u7d44 Simulation Set \u90fd\u53ef\u4ee5\u5c0d\u61c9\uff1a</p> <ul> <li>\u4e00\u4efd\u6216\u591a\u4efd Testbench</li> <li>\u4e00\u500b Top Module</li> </ul> </li> <li> <p>\u9ede\u9078\u5de6\u5074\u7684 <code>Simulation</code> \u9078\u64c7 <code>Run Behavior Simulation</code></p> <p></p> </li> <li> <p>\u64cd\u4f5c\u6b63\u78ba\u5c31\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u65b9\u7684\u6ce2\u578b\u5716</p> <p></p> </li> </ol>"},{"location":"Vivado-Tutorial/Part2-RTL-Design-and-Simulation/#additional","title":"Additional","text":"<p>Extra1-Linter</p>"},{"location":"Vivado-Tutorial/Part3-FPGA-Design-Flow/","title":"Part3 FPGA Design Flow","text":"<p>Xilinx FPGA \u8a2d\u8a08\u6d41\u7a0b\u53ef\u4ee5\u5206\u70ba\u4ee5\u4e0b 6 \u500b\u6b65\u9a5f\uff1a</p> <ol> <li> <p>RTL Design</p> <ul> <li>\u4f7f\u7528 Verilog/VHDL \u64b0\u5beb module</li> </ul> </li> <li> <p>Behavior Simulation</p> <ul> <li>\u900f\u904e Testbench \u6e2c\u8a66\u529f\u80fd\u908f\u8f2f\u662f\u5426\u6b63\u78ba</li> </ul> </li> <li> <p>Synthesis</p> <ul> <li>\u5c07 RTL \u8f49\u63db\u70ba\u908f\u8f2f\u5143\u4ef6\uff08\u5982 <code>LUT</code>\u3001<code>FF</code>\u3001<code>MUX</code>\u3001<code>CLB</code> \u7b49\uff09\uff0c\u8f38\u51fa\u6210 Netlist</li> </ul> </li> <li> <p>Implementation</p> <ul> <li>\u5305\u542b Placement \u8207 Routing \u5169\u500b\u968e\u6bb5\uff0c\u5c07\u5408\u6210\u5f8c\u7684\u908f\u8f2f\u5143\u4ef6\u5be6\u969b\u914d\u7f6e\u5230 FPGA \u4e0a\uff0c\u5982 <code>CLB</code>\u3001 <code>Routing Channel</code>\u3001<code>IO Bank</code> \u7b49</li> </ul> </li> <li> <p>Generate Bitstream</p> <ul> <li>\u7522\u751f bitstream (<code>.bit</code>) \u6a94\uff0c\u4ee5\u4f9b\u71d2\u9304\u5230 FPGA \u4e2d</li> </ul> </li> <li> <p>Program &amp; Debug</p> <ul> <li>\u5c07 bitstream \u71d2\u5165\u81f3 FPGA\uff0c\u4e26\u4f7f\u7528 ILA (Integrated Logic Analyzer) \u7b49\u5de5\u5177\u9032\u884c\u908f\u8f2f\u5206\u6790\u8207\u5373\u6642\u9a57\u8b49</li> </ul> </li> </ol> <p>[!NOTE] Synthesis \u96fb\u8def\u5408\u6210</p> <p>Synthesis \u8ca0\u8cac\u5c07 RTL \u7a0b\u5f0f\u8f49\u63db\u6210\u53ef\u7531 FPGA \u5be6\u969b\u57f7\u884c\u7684\u908f\u8f2f\u5143\u4ef6\uff0c\u4f8b\u5982 LUT (Look-Up Table)\u3001Flip-Flop\u3001MUX \u7b49\u3002</p> <p>Synthesis \u7684\u8f38\u51fa\u662f Netlist\uff0c\u63cf\u8ff0\u4e86\u908f\u8f2f\u5143\u4ef6\u4e4b\u9593\u7684\u9023\u63a5\u95dc\u4fc2\uff0c \u4f9b\u4e0b\u4e00\u6b65\u7684 Implementation \u968e\u6bb5\u4f7f\u7528\u3002</p> <p> <p>[!NOTE] Implementation \u96fb\u8def\u5be6\u4f5c</p> <p>Vivado \u5728 Implementation \u968e\u6bb5\u6703\u505a\u4ee5\u4e0b\u5169\u500b\u5de5\u4f5c\uff1a</p> <ul> <li>Place Design: \u5c07\u908f\u8f2f\u5143\u4ef6\u653e\u7f6e\u5230 FPGA \u4e0a\u7684\u5177\u9ad4\u4f4d\u7f6e</li> <li>Route Design: \u5b8c\u6210\u6240\u6709\u8a0a\u865f\u9593\u7684\u9023\u7dda\uff0c\u4e26\u8003\u91cf\u6642\u5e8f\u8981\u6c42</li> </ul> <p> <p>[!NOTE] FPGA \u8207 ASIC Synthesis \u7684\u5dee\u7570</p> <p>\u96d6\u7136 FPGA \u8207 ASIC \u7686\u662f\u4f7f\u7528 RTL\uff08Verilog/VHDL\uff09\u7a0b\u5f0f\u4f86\u5408\u6210\uff0c\u4f46\u56e0\u70ba\u5169\u8005\u7684\u76ee\u6a19\u786c\u9ad4\u67b6\u69cb\u4e0d\u540c\uff0c\u5c0e\u81f4\u5408\u6210\u7d50\u679c\u6709\u6240\u5dee\u7570\uff1a</p> <p>FPGA Synthesis\uff1a</p> <ul> <li>\u76ee\u6a19\u70ba FPGA \u5143\u4ef6\uff0c\u5982 <code>LUT</code>\u3001<code>FF</code>\u3001<code>BRAM</code>\u3001<code>DSP</code> \u7b49</li> <li>\u5408\u6210\u7d50\u679c\u6703\u6620\u5c04\u5230 FPGA \u4e0a\u9762\u771f\u5be6\u5b58\u5728\u7684\u5be6\u9ad4\u908f\u8f2f\u8cc7\u6e90</li> </ul> <p>ASIC Synthesis\uff1a</p> <ul> <li>\u76ee\u6a19\u70ba Standard Cell Library\uff0c\u5982 <code>AND2_X1</code>\u3001<code>DFF_X1</code> \u7b49</li> <li>\u7522\u51fa gate-level netlist \u8207 SDF \u5ef6\u9072\u6a94\uff0c\u4f9b Place &amp; Route (P&amp;R) \u8207 Gate-level simulation \u4f7f\u7528</li> </ul>"},{"location":"Vivado-Tutorial/Part3-FPGA-Design-Flow/#part-31-add-design-source-constraint-files","title":"Part 3.1 Add Design Source / Constraint Files","text":"<ol> <li> <p>\u53c3\u8003 Part 1 \u5efa\u7acb\u4e00\u500b\u65b0 Project</p> </li> <li> <p>\u5c07 <code>/RTL</code> \u8207 <code>/xdc</code> \u76ee\u9304\u4e0b\u7684\u6a94\u6848\u52a0\u5230 project \u4e2d\uff0c\u53ef\u53c3\u8003    Part 2</p> <ul> <li>\u9ede\u9078 <code>Add or create design sources</code>\uff0c\u52a0\u5165 <code>/RTL</code> \u5167\u7684 <code>top.v</code> <code>LED.v</code> <code>divider.v</code></li> <li>\u9ede\u9078 <code>Add or create constraints</code>\uff0c\u52a0\u5165 <code>/xdc</code> \u5167\u7684 <code>blinky.xdc</code> <code>pynq-z2_v1.0.xdc</code></li> </ul> </li> <li> <p>\u6210\u529f\u7684\u8a71 Project Hierarchy \u61c9\u8a72\u6703\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p> </li> </ol> <p>[!NOTE] Constraint \u7684\u7528\u9014</p> <p>\u5728 Xilinx FPGA \u4e2d\uff0cConstraint \u6a94\u6848\u526f\u6a94\u540d\u70ba <code>.xdc</code>\uff0c\u4ed6\u7684\u4e3b\u8981\u529f\u80fd\u662f\u5b9a\u7fa9\u8a2d\u8a08\u7684\u6642\u5e8f\u8207 I/O \u9650\u5236\uff1a</p> <ul> <li>Clock Constraints\uff1a \u5b9a\u7fa9\u6642\u8108\u7684\u983b\u7387\u8207\u4f86\u6e90\uff0c\u4f8b\u5982 <code>create_clock</code></li> <li>I/O Pin Assignment\uff1a\u5b9a\u7fa9\u5be6\u9ad4\u8173\u4f4d\u5c0d\u61c9\u7684 signal\uff0c\u4f8b\u5982\u5c07 <code>clk</code> \u5c0d\u61c9\u5230 <code>W5</code></li> <li>I/O Standards\uff1a\u8a2d\u5b9a\u96fb\u58d3\u8207\u8a0a\u865f\u6a19\u6e96\uff0c\u5982 <code>LVCMOS33</code></li> </ul> <p>Constraint \u662f Implementation \u968e\u6bb5\u4e2d \u6642\u5e8f\u5206\u6790\u3001\u8cc7\u6e90\u914d\u7f6e \u7684\u91cd\u8981\u4f9d\u64da\u3002</p> <p>\u82e5\u6c92\u6709\u6b63\u78ba\u7684 <code>.xdc</code>\uff0cVivado \u53ef\u80fd\u7121\u6cd5\u6b63\u78ba\u4f48\u7dda\uff0c\u9020\u6210 Timing Violation \u7b49\u554f\u984c\u3002</p> <p> <p>[!TIP] Constraint Set</p> <p>Vivado \u652f\u63f4\u4f7f\u7528 Constraint Set \u4f86\u7ba1\u7406\u591a\u7d44\u6642\u5e8f\u8207 I/O \u9650\u5236\u8a2d\u5b9a</p> <p>\u672a\u4f86\u5728\u9762\u5c0d\u5927\u578b\u8a2d\u8a08\u6642\uff0c\u53ef\u4ee5\u6839\u64da\u4e0d\u540c\u6a21\u7d44\u8207\u9700\u6c42\u5efa\u7acb\u5c0d\u61c9\u7684 Constraint Set\uff0c\u9032\u884c\u9a57\u8b49\u8207\u5207\u63db\u8a2d\u8a08\u689d\u4ef6\u3002</p>"},{"location":"Vivado-Tutorial/Part3-FPGA-Design-Flow/#part-32-synthesis","title":"Part 3.2 Synthesis","text":"<ol> <li> <p>\u57f7\u884c RTL Synthesis\uff1a\u9ede\u9078\u5de6\u5074 <code>SYNTHESIS</code> \u2192 <code>Run Synthesis</code></p> <p>\u5728\u5f48\u51fa\u7684\u8a2d\u5b9a\u8996\u7a97\u4e2d\uff0cVivado \u6703\u8a62\u554f\u4f60\u5e0c\u671b\u5206\u914d\u591a\u5c11\u57f7\u884c\u7dd2\u4f86\u57f7\u884c\u5408\u6210\u3002</p> <p>\u53ef\u4ee5\u4f9d\u7167\u81ea\u5df1\u96fb\u8166\u7684 CPU \u6838\u5fc3\u6578\u9078\u64c7\uff0c\u5206\u914d\u8d8a\u591a\u57f7\u884c\u7dd2\uff0cSynthesis \u6240\u9700\u6642\u9593\u901a\u5e38\u6703\u8d8a\u77ed\u3002</p> <p></p> </li> <li> <p>\u6aa2\u8996\u5408\u6210\u5f8c\u7684\u7d50\u679c\uff1aSynthesis \u5b8c\u6210\u5f8c\uff0c\u53ef\u4ee5\u9ede\u64ca\u5de6\u5074 <code>SYNTHESIS</code> \u2192 <code>Open Synthesized Design</code></p> <p> Synthesis Report <p></p> <ul> <li>Report Timing Summary\uff1a\u9810\u4f30\u6642\u5e8f\u662f\u5426\u7b26\u5408\u76ee\u6a19\u983b\u7387</li> <li>Report Utilization\uff1a\u9810\u4f30\u4f7f\u7528\u591a\u5c11 CLB\u3001LUT\u3001FF \u7b49\u908f\u8f2f\u8cc7\u6e90</li> <li>Report Power\uff1a\u4f30\u7b97\u529f\u8017</li> <li>Report DRC (Design Rule Check)\uff1a\u6aa2\u67e5\u908f\u8f2f\u7d50\u69cb\u662f\u5426\u5b58\u5728\u554f\u984c</li> </ul> <p>[!WARNING] \u56e0\u70ba\u5c1a\u672a\u7d93\u904e Placement \u8207 Routing\uff0c\u7f3a\u5c11\u5be6\u9ad4\u8def\u5f91\u8207\u5be6\u969b\u5ef6\u9072\uff0c\u56e0\u6b64 Timing \u985e\u5831\u544a\u53ea\u662f\u57fa\u65bc Netlist \u7684\u9810\u4f30</p> <ol> <li> <p>\u6aa2\u8996 Synthesis \u5f8c\u7684\u96fb\u8def\uff1a\u9ede\u9078\u5de6\u5074\u7684 <code>SYNTHESIS</code> \u2192 <code>Open Synthesized Design</code> \u2192 <code>Schematic</code></p> <p> Schematic <p></p> <ul> <li> <p>LUT6 (6-input Look-Up Table)</p> <ul> <li>LUT \u662f\u7d44\u6210 FPGA \u8a2d\u8a08\u908f\u8f2f\u7684\u6838\u5fc3\u4e4b\u4e00\uff0cVivado \u6703\u81ea\u52d5\u5c07 RTL \u4e2d\u7684\u908f\u8f2f\u904b\u7b97\u6620\u5c04\u70ba LUT</li> <li>LUT6 \u6709 6 \u500b\u8f38\u5165\uff0c\u53ef\u4ee5\u5be6\u73fe\u4efb\u4f55 6-input \u7684\u5e03\u6797\u51fd\u6578</li> </ul> <p></p> </li> <li> <p>FDCE (Flip-Flop with D input, Clock, Clear, Enable)</p> <ul> <li>\u5e36\u6709 Clear \u8207 Enable \u8a0a\u865f\u7684 D \u578b\u6b63\u7de3 Flip Flop</li> </ul> <p> </p> </li> </ul> <li> <p>\u9ede\u9078\u5de6\u4e0a\u65b9 <code>Project Manager</code> \u5f8c\u8df3\u51fa\u7684 <code>Project Summary</code> \u53ef\u4ee5\u770b\u5230 Utilization\uff0c    \u5176\u4ed6\u8cc7\u8a0a\u5247\u8981\u7b49\u5230 Implementation \u5f8c\u624d\u80fd\u770b\u5230</p> <p> Project Summary <p> </p>"},{"location":"Vivado-Tutorial/Part3-FPGA-Design-Flow/#part-33-implementation","title":"Part 3.3 Implementation","text":"<ol> <li> <p>\u57f7\u884c Implementation\uff1a\u9ede\u9078\u5de6\u5074 <code>IMPLEMENTATION</code> \u2192 <code>Run Implementation</code></p> <p></p> </li> <li> <p>\u6aa2\u8996\u96fb\u8def\u5be6\u969b\u64fa\u653e\u4f4d\u7f6e\uff1aImplementation \u5b8c\u6210\u5f8c\uff0c\u9ede\u9078\u5de6\u5074\u7684 <code>IMPLEMENTATION</code> \u2192 <code>Open Implemented Design</code></p> <p> Implemented Design <p> </p> <li> <p>\u5728 Project Summary \u4e2d\u53ef\u4ee5\u770b\u5230 Implementation \u7684\u7d50\u679c\uff0c\u5305\u542b Timing\u3001Utilization\u3001Power \u7b49\u8cc7\u8a0a</p> <p> Project Summary <p> </p> <p>[!NOTE] Implementation \u968e\u6bb5 Vivado \u6703\u7d71\u6574\u51fa:</p> <ul> <li>Power Estimation\uff1a\u9810\u4f30\u529f\u8017</li> <li>Timing Analysis\uff1a\u5206\u6790 Setup/Hold Timing \u662f\u5426\u6eff\u8db3\u8a2d\u8a08\u8981\u6c42</li> <li>DRC\uff08Design Rule Check\uff09\uff1a\u6aa2\u67e5\u4f48\u7dda\u3001\u8cc7\u6e90\u4f7f\u7528\u662f\u5426\u7b26\u5408\u898f\u5247</li> <li>Utilization Report\uff1a\u5f59\u6574\u8cc7\u6e90\u4f7f\u7528\u60c5\u6cc1\uff08LUT\u3001FF\u3001BRAM \u7b49\uff09</li> <li>Schematic Viewer\uff1a\u53ef\u67e5\u770b\u5be6\u9ad4\u914d\u7f6e\u5f8c\u7684\u96fb\u8def\u5716</li> </ul>"},{"location":"Vivado-Tutorial/Part3-FPGA-Design-Flow/#part-34-generate-bitstream","title":"Part 3.4 Generate Bitstream","text":"<ol> <li>\u751f\u6210 Bitstream\uff1a\u9ede\u9078\u5de6\u5074 <code>PROGRAM AND DEBUG</code> \u2192 <code>Generate Bitstream</code></li> </ol> <p>\u5b8c\u6210\u5f8c\u6703\u6709\u4ee5\u4e0b\u756b\u9762</p> <p></p> <p>[!NOTE] Bitstream</p> <p>Bitstream (<code>.bit</code> / <code>.bin</code>) \u662f\u4e00\u500b\u4e8c\u9032\u4f4d\u6a94\u6848\uff0c\u4f9b\u71d2\u9304\u5230 FPGA \u4e2d</p> <p>\u5176\u4e2d\u5305\u542b\u4e86 FPGA \u7684\u914d\u7f6e\u8cc7\u6599\uff1a</p> <ul> <li>\u908f\u8f2f\u5143\u4ef6\u7684\u5c0d\u61c9\u8207\u9023\u63a5 (from Netlist)</li> <li>Placement &amp; Routing \u7d50\u679c</li> <li>I/O \u914d\u7f6e\u8207 Constraint (from <code>.xdc</code>)</li> </ul> <p>\u4e0b\u5716\u70ba XC4000 \u7cfb\u5217\u7684 Fast Carry \u786c\u9ad4\u67b6\u69cb\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u5716\u4e2d M \u4ee3\u8868\u591a\u5de5\u5668\uff08MUX\uff09\uff0cBitstream \u6703\u88ab\u7528\u4f86\u63a7\u5236\u9019\u4e9b MUX \u7684\u9078\u64c7\u8def\u5f91</p> <p>\u85c9\u6b64\u8a2d\u5b9a\u6bcf\u500b\u908f\u8f2f\u5143\u4ef6\u8207\u9023\u7dda\u7684\u5be6\u969b\u884c\u70ba\u8207\u914d\u7f6e</p>"},{"location":"Vivado-Tutorial/Part3-FPGA-Design-Flow/#part-35-program-to-fpga","title":"Part 3.5 Program to FPGA","text":"<ol> <li> <p>\u5c07 FPGA \u8207\u96fb\u8166\u9023\u63a5 (\u5c07 Micro USB \u63d2\u4e0a Port 2)</p> </li> <li> <p>\u5c07 8 \u865f\u5340\u7684 Jumper \u63d2\u81f3 <code>JTAG</code> \u7684\u4f4d\u7f6e</p> <p>[!NOTE] JTAG (Joint Test Action Group)</p> <p>JTAG \u662f\u4e00\u7a2e\u6a19\u6e96\u7684 Debug \u8207\u71d2\u9304\u4ecb\u9762\uff0c\u4e3b\u6d41 FPGA\uff08\u5982 Xilinx\u3001Intel\uff09\u90fd\u652f\u63f4\u6b64\u6a19\u6e96\u3002</p> <p>FPGA \u5728\u4f7f\u7528 <code>JTAG</code> \u6a21\u5f0f\u4e0b\u9032\u884c\u914d\u7f6e\u6642\uff0c\u6703\u6839\u64da IEEE 1149.1 \u6a19\u6e96\u9032\u884c\u4e32\u5217\u8cc7\u6599\u50b3\u8f38\u3002</p> <p>\u53ef\u5c07\u6211\u5011\u7684 Bitstream \u900f\u904e <code>Boundary-Scan</code> \u7684\u65b9\u5f0f\u71d2\u5165\u9032\u53bb\u677f\u5b50\u4e2d</p> </li> <li> <p>\u6253\u958b\u958b\u95dc (3\u865f\u5340)</p> <p>[!CAUTION] \u95dc\u6a5f\u6642\u4e00\u5b9a\u8981\u5148\u95dc\u9589\u958b\u95dc\u624d\u53ef\u4ee5\u62d4\u9664\u96fb\u6e90\u7dda</p> </li> <li> <p>\u958b\u555f FPGA \u5f8c\uff0c\u56de\u5230 Vivado \u4e26\u9ede\u9078 <code>Open Hardware Manager</code> \u2192 <code>Open Target</code> \u2192 <code>Auto Connect</code></p> <p></p> </li> <li> <p>\u7b49\u5f85 Vivado \u5075\u6e2c\u5230 <code>xc7z020</code> (Pynq-z2 \u6240\u4f7f\u7528\u7684 FPGA \u6676\u7247\u7d44) \u5f8c\u6309\u4e0b <code>Program device</code> \uff0c\u518d\u9ede\u9078 <code>Program</code></p> <p></p> </li> <li> <p>\u71d2\u9304\u5b8c\u6210\u5f8c\uff0c\u53ef\u4ee5\u53c3\u8003 RTL Code \u89c0\u5bdf Switch \u548c LEDs \u7684\u95dc\u4fc2</p> </li> </ol>"},{"location":"Vivado-Tutorial/Part3-FPGA-Design-Flow/#additional","title":"Additional","text":"<p>Extra2-Synthesis-and-Implementation-Strategies</p> <p>Extra3-Constraint</p>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/","title":"Part4-IP-Package-and-Block-Design","text":"<p>\u672c\u7ae0\u5c07\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 Vivado \u5efa\u7acb Block Design\u3002\u672c\u55ae\u5143\u5206\u70ba\u5169\u90e8\u5206\uff0c\u5efa\u8b70\u4f9d\u7167\u4ee5\u4e0b\u9806\u5e8f\u95b1\u8b80\uff1a</p> <ol> <li>Part4-1-IP-Package\uff1a\u4ecb\u7d39\u5982\u4f55\u5c07 RTL \u5c01\u88dd\u70ba\u81ea\u8a02 IP\uff0c\u4f9b Block Design \u4f7f\u7528  </li> <li>Part4-2-Block Design\uff1a\u5be6\u969b\u64cd\u4f5c Vivado \u7684\u5716\u5f62\u5316\u8a2d\u8a08\u4ecb\u9762\uff0c\u5c07\u591a\u500b IP \u9023\u63a5\u5f62\u6210\u7cfb\u7d71</li> </ol>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/#additional","title":"Additional","text":"<p>Extra4-Debugger</p>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-1-IP-Package/","title":"Part4-1-IP-Package","text":""},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-1-IP-Package/#hard-ip-soft-ip","title":"Hard IP / Soft IP \u5dee\u7570","text":"<p>\u5728 FPGA \u8207 ASIC \u8a2d\u8a08\u4e2d\uff0c\u5e38\u898b\u5169\u7a2e IP\uff08Intellectual Property\uff09\u5f62\u5f0f\uff1a</p> <ul> <li> <p>Hard IP\uff1a   \u6307\u5df2\u7d93\u7d93\u904e Placement and Routing \u7684\u96fb\u8def\u6a21\u7d44\uff0c\u901a\u5e38\u4ee5\u5be6\u9ad4\u96fb\u8def\u5f62\u5f0f\u5d4c\u5165\u5728\u6676\u7247\u4e2d\uff08\u5982 Zynq \u7cfb\u5217\u4e2d\u7684 ARM Cortex-A9 \u6838\u5fc3\u3001DDR \u63a7\u5236\u5668\uff09\u3002\u5b83\u7684\u6642\u5e8f\u3001\u9762\u7a4d\u8207\u529f\u8017\u7279\u6027\u56fa\u5b9a\uff0c\u6548\u80fd\u9ad8\u4f46\u53ef\u651c\u6027\u5dee\u3002</p> </li> <li> <p>Soft IP\uff1a   \u8edf IP \u662f\u7528 HDL \u64b0\u5beb\u7684\u6a21\u7d44\uff0c\u8a2d\u8a08\u5f48\u6027\u9ad8\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u88fd\u7a0b\u8207\u5e73\u53f0\u4e0a\u91cd\u65b0\u5408\u6210\u8207\u5be6\u4f5c\u3002 Vivado \u63d0\u4f9b\u7684\u5927\u591a\u6578 IP \u7686\u5c6c\u65bc Soft IP\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u5b83\u5011\u901a\u5e38\u6703\u6709 RTL \u539f\u59cb\u78bc\u6216\u662f\u53ef\u4ee5\u5728 Synthesis \u968e\u6bb5\u751f\u6210\u96fb\u8def\u908f\u8f2f\uff0c\u5c31\u5c6c\u65bc Soft IP\u3002</p> </li> </ul> <p>\u5728\u672c\u6559\u5b78\u4e2d\uff0c\u6211\u5011\u5c07\u4ee5 Soft IP \u7684\u5c01\u88dd\u6d41\u7a0b\u70ba\u4e3b\uff0c\u5b78\u7fd2\u5982\u4f55\u5c07\u81ea\u5df1\u7684 RTL \u6a21\u7d44\u5305\u88dd\u6210\u53ef\u5728 Vivado Block Design \u4e2d\u4f7f\u7528\u7684\u81ea\u8a02 IP\u3002</p>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-1-IP-Package/#design-constraints-of-ip","title":"Design Constraints of IP","text":"<p>\u5728 Vivado \u5c01\u88dd IP \u7684\u6d41\u7a0b\u4e2d\uff0cConstraints \u5fc5\u9808\u6839\u64da\u4f7f\u7528\u5834\u666f\u5206\u958b\u8655\u7406\uff0c\u4e3b\u8981\u5206\u70ba\u5169\u7a2e\uff1a</p> <ol> <li> <p>Global \u7576 IP \u662f\u6574\u500b SoC \u8a2d\u8a08\u7684\u4e00\u90e8\u5206\u6642\uff0cIP \u6240\u9700\u7684\u6642\u8108\u8207 I/O \u9650\u5236\u5c07\u7531\u4e0a\u5c64\u8a2d\u8a08\u7684 <code>.xdc</code> \u63d0\u4f9b\uff0c\u6b64\u6642 IP \u672c\u8eab\u7684 <code>.xdc</code> \u4e0d\u9700\u8981\u518d\u5b9a\u7fa9 clock\uff0c\u5426\u5247\u53ef\u80fd\u7522\u751f\u91cd\u8907\u5b9a\u7fa9\u932f\u8aa4</p> </li> <li> <p>Out-of-Context\uff08OOC\uff09 Vivado \u9810\u8a2d\u6703\u5c0d\u6bcf\u500b IP \u57f7\u884c <code>OOC synthesis</code>\uff0c\u7522\u751f <code>.dcp(design check point)</code>  \u70ba\u4e86\u8b93 IP \u5728 <code>OOC</code> \u74b0\u5883\u4e0b\u80fd\u6b63\u78ba\u7d9c\u5408\uff0c\u5fc5\u9808\u63d0\u4f9b\u4e00\u4efd\u7368\u7acb\u7684 .xdc \u4f86\u5b9a\u7fa9\uff1a<code>create_clock</code>\u3001<code>set_input_delay</code>\u3001<code>set_output_delay</code> </p> </li> </ol> <p>\ud83d\udccc Out-of-Context\uff08OOC\uff09\u5408\u6210\u662f\u6307 Vivado \u5728 IP \u5c1a\u672a\u63a5\u5165 Top-level design\u524d\uff0c\u6703\u55ae\u7368\u5c0d\u8a72 IP \u9032\u884c\u5408\u6210\u8207\u5206\u6790\u3002 \u5728\u9019\u500b\u968e\u6bb5\uff0cTop-level \u8a2d\u8a08\u6703\u5c07\u8a72 IP \u8996\u70ba\u4e00\u500b functional black box\uff0c\u4e0d\u95dc\u5fc3\u5176\u5167\u90e8\u908f\u8f2f\u7d30\u7bc0\uff0c\u53ea\u95dc\u5fc3\u5176 interface \u8207\u529f\u80fd\u884c\u70ba\u662f\u5426\u6b63\u78ba\u3002  </p> <p>\ud83d\udccc \u76f8\u5c0d\u5730\uff0c\u5728 Global \u8a2d\u8a08\u60c5\u5883\u4e0b\uff0cIP \u88ab\u6574\u5408\u9032\u6574\u9ad4\u7cfb\u7d71\uff0c\u7531\u4e0a\u5c64\u8a2d\u8a08\u7d71\u4e00\u63d0\u4f9b\u6642\u8108\u8207 I/O \u9650\u5236\uff0c\u56e0\u6b64 IP \u672c\u8eab\u7684 .xdc \u4e2d\u901a\u5e38\u53ea\u4fdd\u7559\u5fc5\u8981\u7684\u5167\u90e8\u9650\u5236\uff0c\u4e26\u907f\u514d\u91cd\u8907\u5b9a\u7fa9\u4e0a\u5c64\u7684 constraint\u3002</p> <ol> <li>IP \u5c01\u88dd\u4e2d\u7684 Design Constraints \u8655\u7406\uff0c\u5728\u539f\u59cb\u8a2d\u8a08\u4e2d\uff0c\u6211\u5011\u901a\u5e38\u6703\u91dd\u5c0d IP \u505a\u70ba\u7368\u7acb\u6a21\u7d44\uff08standalone design\uff09\u5b9a\u7fa9\u5b8c\u6574\u7684 constraints\u3002\u4f46\u7576\u4f60\u5c07\u9019\u500b\u6a21\u7d44\u5c01\u88dd\u70ba IP \u5f8c\uff0c\u6709\u4e9b\u9650\u5236\uff08\u50cf\u662f clock\uff09\u6703\u6539\u7531 Top-level design \u63d0\u4f9b\uff0c\u9019\u6642\u5c31\u9700\u8981\u5c07\u539f\u59cb XDC \u6a94\u62c6\u6210\u5169\u4efd\uff1a  </li> </ol> \u985e\u578b \u7528\u9014 \u662f\u5426\u9700\u8981\u7368\u7acb clock \u9650\u5236\uff1f OOC (Out-of-Context) IP \u55ae\u7368\u7d9c\u5408\u6642\u4f7f\u7528 \u9700\u8981\uff08\u63d0\u4f9b\u6642\u8108\u8cc7\u8a0a\uff09 Top-level \u8a2d\u8a08\u4e2d\u4f7f\u7528 (Global) IP \u88ab\u6574\u5408\u5230\u4e3b\u8a2d\u8a08\u4e2d \u4e0d\u9700\u8981\uff08\u7531\u4e0a\u5c64 <code>.xdc</code> \u63d0\u4f9b\uff09 <p></p>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-1-IP-Package/#part-411-package-your-ip","title":"Part 4.1.1 Package Your IP","text":"<ol> <li> <p>\u5728\u5305\u88dd IP \u7684\u904e\u7a0b\u4e2d\uff0c\u6709\u6642\u5019\u6703\u9700\u8981\u958b\u6578\u500b\u66ab\u6642\u62ff\u4f86\u4f7f\u7528\u7684 Vivado Project\uff0c\u9019\u908a\u6211\u5011\u5148\u5275\u5efa\u4e00\u500b\u65b0\u7684 Vivado Project\uff0c\u4e26\u5c07<code>../RTL/RGB_LED.v</code> \u548c <code>../XDC/RGB_LED_ooc.xdc</code> \u52a0\u5165\u5c08\u6848\u7576\u4e2d</p> </li> <li> <p>\u5c07<code>RTL</code>\u8ddf<code>*OOC.xdc</code>\u52a0\u5165\u5c08\u6848\u5f8c\uff0c\u7167\u8457\u5f8c\u7e8c\u64cd\u4f5c\u8abf\u6574<code>xdc</code>\u6a94\u6848\u7684 Properties </p> <p> </p> </li> <li> <p>\u4fee\u6539\u5b8c<code>xdc</code>\u7684 Property \u5f8c\uff0c\u958b\u59cb Package IP\uff0c\u9ede\u9078 <code>Tool -&gt; Create and Package New IP</code> </p> <p> </p> </li> <li> <p>\u5c07 <code>IP_repo/RGB_LED</code> \u9019\u500b\u8cc7\u6599\u593e\u653e\u5728\u4f60\u60f3\u8981\u7684\u4f4d\u5b50\uff0c\u4e4b\u5f8c\u8981\u4f7f\u7528\u9019\u4e9b IP \u5c31\u9700\u8981Import\u9019\u500b\u8cc7\u6599\u593e </p> <p></p> </li> <li> <p>\u8a2d\u5b9a\u5b8c\u6210\u5f8c Vivado \u6703\u958b\u555f\u4e00\u500b temp project \u4f86\u505a IP \u7684\u5305\u88dd\u8a2d\u5b9a  </p> <p></p> </li> <li> <p>\u9ede\u9078 <code>Review and Package -&gt; Package IP</code> </p> <p></p> </li> <li> <p>\u53e6\u5916\u518d\u91cd\u8907\u4e00\u6b21\u4e0a\u65b9\u7684\u6b65\u9a5f\u5305\u88dd\u53e6\u4e00\u500b\u65b0\u7684IP\uff0c\u4e26\u53ea\u9700\u52a0\u5165 <code>/..RTL/PWM_Decoder.v</code></p> </li> </ol>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-1-IP-Package/#part-412-instantiating-the-packaged-ip-in-rtl","title":"Part 4.1.2 Instantiating the Packaged IP in RTL","text":"<ol> <li> <p>\u958b\u555f\u4e00\u500b Vivado Project\uff0c\u4e26\u52a0\u5165 <code>../RTL/top.v</code> , <code>../XDC/pynq-z2_v1.0.xdc</code> </p> <p> </p> </li> <li> <p>\u4e0a\u4e00\u6b65\u9a5f\u52a0\u5165 <code>../RTL/top.v</code> \u5f8c\uff0c\u53ef\u4ee5\u770b\u5230\u5167\u90e8\u6709\u5ba3\u544a\u5169\u500b\u6211\u5011\u5148\u524d\u7684 IP \uff0c\u4f46\u5728File Hierarchy \u88e1\u9762\u986f\u793a\u70ba <code>Not Found</code>\uff0c\u56e0\u6b64\u6211\u5011\u8981\u5c07\u5148\u524d\u7684 IP Import \u9032\u4f86\u4e26<code>Generate</code>\uff0c\u9ede\u9078 <code>PROJECT MANAGER -&gt; setting -&gt; IP/Repository</code> </p> <p></p> </li> <li> <p>\u63a5\u8457\u9ede\u9078 <code>PROJECT MANAGER -&gt; IP Catalog</code>\uff0c\u53ef\u4ee5\u627e\u5230\u525b\u525b\u6253\u5305\u7684 IP  </p> <p></p> </li> <li> <p>\u5c0d <code>RGB_LED IP</code> \u9ede\u5169\u4e0b\uff0c\u4e26\u63a5\u7e8c\u64cd\u4f5c  </p> <p> </p> <p>\u9078\u64c7 <code>Out of context per IP</code>\uff0c\u7136\u5f8c\u9ede\u9078 <code>Generate</code> \u4f86\u9032\u884c IP \u7684\u5408\u6210  </p> <p> </p> <p>\ud83d\udccc \u5148\u524d\u5728\u5305\u88dd\u8a72 IP \u6642\u6211\u5011\u8a2d\u5b9a\u5373\u70ba <code>OOC</code>\uff0c\u56e0\u6b64\u5728 <code>Generate</code> \u6642\u9078\u64c7 <code>OOC</code> \u9032\u884c <code>Generate</code> </p> </li> <li> <p>\u4f9d\u7167\u4e0a\u8ff0\u7684\u6b65\u9a5f\u5c07 <code>PMW_Decoder IP</code> \u4e5f\u547c\u53eb\u9032\u4f86\uff0c\u7136\u5f8c\u5728\u6700\u5f8c\u4e00\u6b65\u7684 <code>Generate Output Products</code> \u9078\u64c7 <code>Global</code></p> <p> </p> </li> <li> <p><code>Top.v</code> \u5167\u90e8\u7684 IP \u5ba3\u544a\u540d\u7a31\u53ef\u4ee5\u7531 <code>IP Sources -&gt; Your_IP_name -&gt; Instantiation Template -&gt; *.veo(verilog) / *.vho(VHDL)</code> \u4e2d\u627e\u5230\u8981\u5ba3\u544a\u7684\u540d\u7a31\u8ddf port  </p> <p> </p> </li> <li> <p>\u63a5\u8457\u5373\u53ef\u57f7\u884c <code>Synthesis -&gt; Implementation -&gt; Generate Bitstream</code> (\u76f4\u63a5\u6309\u4e0b <code>Generate Bitstream</code> \u5176\u5be6\u4e5f\u6703\u628a\u524d\u9762\u5169\u6b65\u9a5f\u90fd\u4e00\u8d77\u505a\u5b8c) \u7136\u5f8c\u5c07 Bitstream file \u71d2\u9304\u9032 FPGA\u3002</p> </li> </ol>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-2-Block-Design/","title":"Part4-2-Block-Design","text":"<p>\u672c\u7ae0\u7bc0\u6703\u4f7f\u7528\u4f60\u5728 <code>Part4-1-IP-Package</code> \u4e2d\u5c01\u88dd\u597d\u7684\u81ea\u8a02 IP\u3002 \u8acb\u52d9\u5fc5\u5148\u5b8c\u6210 IP \u5305\u88dd\u6b65\u9a5f\uff0c\u624d\u80fd\u9806\u5229\u5728 Block Design \u4e2d\u52a0\u5165\u8a72 IP \u9032\u884c\u9023\u7dda\u8207\u6574\u5408\u3002</p>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-2-Block-Design/#what-is-block-design","title":"What is Block Design ?","text":"<p>Vivado \u7684 <code>Block Design</code> \u662f\u4e00\u500b\u5716\u5f62\u5316\u8a2d\u8a08\u5e73\u53f0\uff0c\u53ef\u8b93\u4f60\u4f7f\u7528\u62d6\u62c9\u65b9\u5f0f\u5c07\u591a\u500b IP \uff08\u5982 AXI IP\u3001\u81ea\u8a02 IP\u3001Zynq PS \u7b49\uff09\u7d44\u5408\u6210\u5b8c\u6574\u7cfb\u7d71\u3002 \u9019\u5927\u5e45\u7c21\u5316\u4e86 RTL \u9023\u7dda\u8207\u7cfb\u7d71\u6574\u5408\u7684\u8907\u96dc\u5ea6\uff0c\u662f\u9032\u968e FPGA \u958b\u767c\u7684\u4e3b\u6d41\u65b9\u5f0f\u4e4b\u4e00\u3002  </p> <p>\u4f60\u4e0d\u6703\u60f3\u8981\u7528\u5beb code \u7684\u65b9\u5f0f\u53bb\u62c9\u4e0b\u9762\u9019\u5f35\u5716\u7684 \ud83d\ude43  </p> <p></p>"},{"location":"Vivado-Tutorial/Part4-IP-Package-and-Block-Design/Part4-2-Block-Design/#part-421-create-block-design","title":"Part 4.2.1 Create Block Design","text":"<ol> <li> <p>\u65b0\u5275\u4e00\u500b Vivado Project\uff0c\u5148\u7167\u8457 <code>Part4.1.2</code> \u7684\u65b9\u5f0f\u5c07 <code>IP_repo</code> import\u9032\u4f86\u8a72 Project</p> </li> <li> <p>\u9ede\u9078\u5de6\u5074 <code>IP INTEGRATOR -&gt; Create Block Design</code>\uff0cBlock Design \u7684\u540d\u7a31\u53ef\u4ee5\u81ea\u5df1\u53d6\u540d  </p> <p> </p> </li> <li> <p>\u53ef\u4ee5\u900f\u904e\u5de6\u5074 <code>IP catalog</code> \u6216\u662f <code>Block Diagram\u4e2d\u7684 +</code> \u53bb\u505a\u65b0\u589eIP\u5230Block Design\u7684\u52d5\u4f5c\uff0c\u6211\u5011\u5148\u5c07\u5728 <code>Part4.1</code> \u4e2d\u505a\u597d\u7684\u5169\u9846 IP \u90fd\u52a0\u5165\u5230 Block Design \u7576\u4e2d  </p> <p>IP Catalog \u4f9d\u5e8f\u5c07\u5169\u9846 IP \u7686\u52a0\u5165:  </p> <p> </p> <p>Block Diagram\u4e2d\u7684 + \u4f9d\u5e8f\u5c07\u5169\u9846 IP \u7686\u52a0\u5165: </p> </li> <li> <p>\u52a0\u5165\u5b8c\u6210\u5f8c\u6703\u5982\u4e0b\u5716\u6240\u793a  </p> <p> </p> </li> <li> <p>\u63a5\u4e0b\u4f86\u8981\u5e6b\u96fb\u8def\u63a5\u7dda\uff0c\u8a2d\u5b9a I/O Ports\uff0c \u5728\u7a7a\u767d\u8655 \u53f3\u9375 -&gt; Create Port \uff0c\u88fd\u4f5c\u4ee5\u4e0b Ports</p> <p> </p> <p>clk: </p> <p>rst: </p> <p>sw: </p> <p>\u8acb\u7167\u9019\u500b\u547d\u540d\u683c\u5f0f\u4e00\u6a23\u88fd\u4f5c R_out\u3001G_out\u3001B_out \u7684 Ports </p> </li> <li> <p>Create Port\u5b8c\u6210\u5f8c\u61c9\u5982\u4e0b\u5716\u6240\u793a  </p> <p></p> </li> <li> <p>\u6839\u64da\u8a72\u5716\u9032\u884c\u63a5\u7dda\uff0c\u63a5\u7dda\u5b8c\u6210\u5f8c\u9ede\u9078<code>Regenerate Layout (\u8ff4\u65cb\u7b26\u865f)</code>\uff0cVivado \u6703\u81ea\u52d5\u5e6b\u4f60\u9032\u884c\u6392\u7248  </p> <p> </p> </li> <li> <p>\u6700\u5f8c\u6309\u4e0b\u4e0a\u65b9\u7684 <code>Validate Design</code>\uff0c\u8b93 Vivado \u5e6b\u4f60\u6aa2\u67e5\u63a5\u7dda\u662f\u5426\u6709\u932f\u8aa4  </p> <p></p> </li> </ol> <p>\ud83d\udccc \u5728\u9032\u884c Block Design \u6642\uff0c\u8981\u990a\u6210\u7fd2\u6163\u63a5\u5b8c\u7dda\u5f8c\u505a\u4e00\u6b21 <code>Regenerate Layout</code> \u548c <code>Validate Design</code></p> <ol> <li> <p>\u9ede\u9078 <code>Sources -&gt; your_design_name -&gt; \u53f3\u9375 Create HDL Wrapper</code>\uff0cVivado \u6703\u81ea\u52d5\u5e6b\u4f60\u628a Block Design \u751f\u6210\u51fa\u5c0d\u61c9\u7684 Verilog Code \u51fa\u4f86  </p> <p> </p> <p>\u9019\u908a\u9078\u64c7\u8b93 Vivado \u81ea\u52d5\u5e6b\u4f60\u9032\u884c\u66f4\u65b0\uff0c\u9019\u6a23\u4f60\u5f8c\u4f86\u5c0d Block Design \u6709\u4ec0\u9ebc\u66f4\u52d5\u4ed6\u90fd\u6703\u81ea\u52d5\u518d\u5e6b\u4f60\u751f\u6210\u65b0\u7684 Wrapper  </p> <p></p> </li> <li> <p>\u6700\u5f8c\u52a0\u5165 <code>../XDC/pynq-z2_v1.0.xdc</code> \u5230 project \u4e2d</p> </li> <li> <p>\u63a5\u8457\u5373\u53ef\u57f7\u884c <code>Synthesis -&gt; Implementation -&gt; Generate Bitstream</code> (\u76f4\u63a5\u6309\u4e0b Generate Bitstream \u5176\u5be6\u4e5f\u6703\u628a\u524d\u9762\u5169\u6b65\u9a5f\u90fd\u4e00\u8d77\u505a\u5b8c) \u7136\u5f8c\u5c07 Bitstream file \u71d2\u9304\u9032 FPGA\u3002</p> </li> </ol>"}]}